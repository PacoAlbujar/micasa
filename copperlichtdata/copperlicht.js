/**
  * CopperCube player implemented using the CopperLicht 3D Engine, (c) by Nikolaus Gebhardt, Ambiera e.U.
  * http://www.ambiera.com/coppercube
  */
function aa(){return function(){}}function ca(a){return function(b){this[a]=b}}function da(a){return function(){return this[a]}}function k(a){return function(){return a}}var l,n={};function fa(a,b){this.ve=this.fj=this.gh=null;a=document.getElementById(a);if(a==null)n.Xl=false;else{if(this.gh=a.parentNode){this.yh=document.createElement("div");this.gh.appendChild(this.yh);this.fp=a=document.createTextNode("Loading...");this.yh.appendChild(a)}b&&ga(this)}}function ga(a){if(a.fj==null){a.fj=document.createElement("div");a.gh.appendChild(a.fj);var b=document.createTextNode("FPS: 0");a.Hm=b;a.fj.appendChild(b);a.frames=0;a.em=(new Date).getTime()}}
fa.prototype.print=function(a){n.Xl!=false&&ha(this,a,false)};function ka(a,b){if(a.yh)if(b==null)a.yh.style.display="none";else{a.yh.style.display="block";a.fp.nodeValue=b}}function la(a,b,c){ha(a,b,true,c)}function ma(a,b){setTimeout(function(){throw new Error(b);},0)}
function ha(a,b,c,d){if(!(n.Xl==false&&c!=true)){if(a.ve==null){a.ve=document.createElement("div");a.ve.className="cldebug";a.gh.appendChild(a.ve)}if(d){a.ve.appendChild(document.createElement("br"));c=document.createElement("div");a.ve.appendChild(c);c.innerHTML=b}else{a.ve.appendChild(document.createElement("br"));b=document.createTextNode(b);a.ve.appendChild(b)}}}n.Xl=true;n.na=null;function na(a,b){this.hj=a;this.nb=false;this.zq=b;if(!this.nb&&typeof XMLHttpRequest!="undefined")try{this.nb=new XMLHttpRequest}catch(c){this.nb=false}if(!this.nb&&window.Mp)try{this.nb=window.Mp()}catch(d){this.nb=false}this.load=function(e,f){if(this.nb==false)la(n.na,"Your browser doesn't support AJAX");else{var g=this;try{this.nb.open("GET",this.hj,true);if(this.zq)this.nb.responseType="arraybuffer"}catch(i){if(f)f(i.message);else{la(n.na,"Could not open file "+this.hj+": "+i.message);var j=
navigator.appVersion;j!=null&&j.indexOf("Trident")!=-1&&la(n.na,"<i>Use a web server to run files in IE. Or start them from CopperCube.</i>",true)}return}this.nb.onreadystatechange=function(){if(g.nb.readyState==4){var o=false;if(g.nb.status!=200&&g.nb.status!=0&&g.nb.status!=null)if(f){f("");o=true}else la(n.na,"Could not open file "+g.hj+" (status:"+g.nb.status+")");!o&&e&&e(g.nb.response)}};try{this.nb.send(null)}catch(m){f?f(""):la(n.na,"Could not open file "+g.hj)}}};this.abort=function(){try{this.nb.abort()}catch(e){}}}
;n.PI=3.14159265359;n.Mq=1/3.14159265359;n.Iq=1.570796326795;n.Lq=3.141592653589793;n.yd=3.14159265359/180;n.re=57.29577951307855;n.Cp=1.0E-8;n.yi=function(a){return a*n.re};n.Sn=function(a){return a*n.yd};n.qa=function(a){return a<1.0E-8&&a>-1.0E-8};n.Ce=function(a){return a+1.0E-8>=1&&a-1.0E-8<=1};n.D=function(a,b){return a+1.0E-8>=b&&a-1.0E-8<=b};n.qc=function(a,b,c){if(a<b)return b;if(a>c)return c;return a};n.Pp=function(a){return a-Math.floor(a)};
n.bq=function(a,b,c){if(a>b){if(a>c)return a;return c}if(b>c)return b;return c};n.Xq=function(a,b,c){if(a<b){if(a<c)return a;return c}if(b<c)return b;return c};n.Td=function(a){return(a&4278190080)>>>24};n.Zc=function(a){return(a&16711680)>>16};n.Xc=function(a){return(a&65280)>>8};n.Wc=function(a){return a&255};n.Df=function(a,b,c,d){a&=255;b&=255;c&=255;d&=255;return a<<24|b<<16|c<<8|d};n.Rn=function(a){var b=new ra;b.Kf=n.Td(a)/255;b.nc=n.Zc(a)/255;b.ic=n.Xc(a)/255;b.dc=n.Wc(a)/255;return b};
n.bo=function(a,b,c){var d=1-c;return n.Df(n.Td(a)*c+n.Td(b)*d,n.Zc(a)*c+n.Zc(b)*d,n.Xc(a)*c+n.Xc(b)*d,n.Wc(a)*c+n.Wc(b)*d)};n.Ho=function(a){if(a>0)return 1;if(a<0)return-1;return 0};function ra(){this.dc=this.ic=this.nc=this.Kf=1}l=ra.prototype;l.e=function(){var a=new ra;a.Kf=this.Kf;a.nc=this.nc;a.ic=this.ic;a.dc=this.dc;return a};l.Kf=1;l.nc=1;l.ic=1;l.dc=1;function q(){return(new Date).getTime()};function s(a,b,c){if(a!=null){this.c=a;this.b=b;this.d=c}}l=s.prototype;l.c=0;l.b=0;l.d=0;l.set=function(a,b,c){this.c=a;this.b=b;this.d=c};l.e=function(){return new s(this.c,this.b,this.d)};l.Ba=function(a){a.c=this.c;a.b=this.b;a.d=this.d};l.substract=function(a){return new s(this.c-a.c,this.b-a.b,this.d-a.d)};function ta(a,b){a.c-=b.c;a.b-=b.b;a.d-=b.d}s.prototype.add=function(a){return new s(this.c+a.c,this.b+a.b,this.d+a.d)};s.prototype.pa=function(a){this.c+=a.c;this.b+=a.b;this.d+=a.d};
function ua(a,b){a.c+=b.c;a.b+=b.b;a.d+=b.d;return a}s.prototype.normalize=function(){var a=this.c*this.c+this.b*this.b+this.d*this.d;if(!(a>-1.0E-7&&a<1.0E-7)){a=1/Math.sqrt(a);this.c*=a;this.b*=a;this.d*=a}};function va(a,b){var c=a.c*a.c+a.b*a.b+a.d*a.d;if(!(c>-1.0E-7&&c<1.0E-7)){c=b/Math.sqrt(c);a.c*=c;a.b*=c;a.d*=c}}function wa(a,b){a.c=b.c;a.b=b.b;a.d=b.d}s.prototype.D=function(a){return n.D(this.c,a.c)&&n.D(this.b,a.b)&&n.D(this.d,a.d)};
function xa(a){return n.qa(a.c)&&n.qa(a.b)&&n.qa(a.d)}s.prototype.getLength=function(){return Math.sqrt(this.c*this.c+this.b*this.b+this.d*this.d)};s.prototype.ub=function(a){var b=a.c-this.c,c=a.b-this.b;a=a.d-this.d;return Math.sqrt(b*b+c*c+a*a)};function ya(a,b){var c=b.c-a.c,d=b.b-a.b;a=b.d-a.d;return c*c+d*d+a*a}function Ba(a){return a.c*a.c+a.b*a.b+a.d*a.d}function x(a,b){return new s(a.c*b,a.b*b,a.d*b)}function Ca(a,b){a.c*=b;a.b*=b;a.d*=b}function Da(a,b){a.c*=b;a.b*=b;a.d*=b;return a}
function Ea(a,b){a.c*=b.c;a.b*=b.b;a.d*=b.d}function Fa(a,b){return new s(a.c*b.c,a.b*b.b,a.d*b.d)}function Ha(a,b){return new s(a.c/b.c,a.b/b.b,a.d/b.d)}function Ia(a,b){return new s(a.b*b.d-a.d*b.b,a.d*b.c-a.c*b.d,a.c*b.b-a.b*b.c)}s.prototype.ka=function(a){return this.c*a.c+this.b*a.b+this.d*a.d};
function Ja(a){var b=new s;b.b=n.yi(Math.atan2(a.c,a.d));if(b.b<0)b.b+=360;if(b.b>=360)b.b-=360;var c=Math.sqrt(a.c*a.c+a.d*a.d);b.c=n.yi(Math.atan2(c,a.b))-90;if(b.c<0)b.c+=360;if(b.c>=360)b.c-=360;return b}function Ka(a,b){b*=n.yd;var c=Math.cos(b);b=Math.sin(b);var d=a.c,e=a.d;a.c=d*c-e*b;a.d=d*b+e*c}function La(a,b,c){var d=1-c;return new s(b.c*d+a.c*c,b.b*d+a.b*c,b.d*d+a.d*c)}s.prototype.toString=function(){return"(x: "+this.c+" y:"+this.b+" z:"+this.d+")"};
function Ma(){this.Y=new s;this.N=new s}Ma.prototype.Y=null;Ma.prototype.N=null;function Na(a){return a.N.substract(a.Y)}Ma.prototype.getLength=function(){return Na(this).getLength()};function Qa(a,b){if(a==null)this.b=this.c=0;else{this.c=a;this.b=b}}Qa.prototype.c=0;Qa.prototype.b=0;Qa.prototype.set=function(a,b){this.c=a;this.b=b};function y(){this.C=new s;this.M=new s}y.prototype.C=null;y.prototype.M=null;y.prototype.e=function(){var a=new y;a.C=this.C.e();a.M=this.M.e();return a};function Ra(a){a=a.C.add(a.M);Ca(a,0.5);return a}function Sa(a){return a.M.substract(a.C)}
function Ta(a){var b=Ra(a);a=b.substract(a.M);var c=[];c.push(new s(b.c+a.c,b.b+a.b,b.d+a.d));c.push(new s(b.c+a.c,b.b-a.b,b.d+a.d));c.push(new s(b.c+a.c,b.b+a.b,b.d-a.d));c.push(new s(b.c+a.c,b.b-a.b,b.d-a.d));c.push(new s(b.c-a.c,b.b+a.b,b.d+a.d));c.push(new s(b.c-a.c,b.b-a.b,b.d+a.d));c.push(new s(b.c-a.c,b.b+a.b,b.d-a.d));c.push(new s(b.c-a.c,b.b-a.b,b.d-a.d));return c}
function Ua(a,b,c){var d=c.substract(b),e=d.getLength();d.normalize();b=x(b.add(c),0.5);c=e*0.5;e=x(Sa(a),0.5);a=Ra(a).substract(b);if(Math.abs(a.c)>e.c+c*Math.abs(d.c)||Math.abs(a.b)>e.b+c*Math.abs(d.b)||Math.abs(a.d)>e.d+c*Math.abs(d.d))d=false;else{b=e.b*Math.abs(d.d)+e.d*Math.abs(d.b);if(Math.abs(a.b*d.d-a.d*d.b)>b)d=false;else{b=e.c*Math.abs(d.d)+e.d*Math.abs(d.c);if(Math.abs(a.d*d.c-a.c*d.d)>b)d=false;else{b=e.c*Math.abs(d.b)+e.b*Math.abs(d.c);d=Math.abs(a.c*d.b-a.b*d.c)>b?false:true}}}return d}
function z(a,b){var c=b.c,d=b.b;b=b.d;if(c>a.M.c)a.M.c=c;if(d>a.M.b)a.M.b=d;if(b>a.M.d)a.M.d=b;if(c<a.C.c)a.C.c=c;if(d<a.C.b)a.C.b=d;if(b<a.C.d)a.C.d=b}function Va(a,b){return a.C.c<=b.M.c&&a.C.b<=b.M.b&&a.C.d<=b.M.d&&a.M.c>=b.C.c&&a.M.b>=b.C.b&&a.M.d>=b.C.d}y.prototype.Kg=function(a){return a.c>=this.C.c&&a.c<=this.M.c&&a.b>=this.C.b&&a.b<=this.M.b&&a.d>=this.C.d&&a.d<=this.M.d};y.prototype.reset=function(a,b,c){this.M.set(a,b,c);this.C.set(a,b,c)};function Wa(){this.j=new s(0,1,0);ab(this,new s(0,0,0))}Wa.prototype.Xa=0;Wa.prototype.j=null;Wa.prototype.e=function(){var a=new Wa(false);a.j=this.j.e();a.Xa=this.Xa;return a};function ab(a,b){a.Xa=-b.ka(a.j)}Wa.prototype.normalize=function(){var a=1/this.j.getLength();this.j=x(this.j,a);this.Xa*=a};
function bb(a,b,c,d){var e=new s,f=new s;var g=a.j.getLength(),i=a.j.ka(b.j),j=b.j.getLength(),m=g*j-i*i;if(Math.abs(m)<1.0E-8)b=false;else{m=1/m;j=(j*-a.Xa+i*b.Xa)*m;g=(g*-b.Xa+i*a.Xa)*m;Ia(a.j,b.j).Ba(f);a=x(a.j,j);b=x(b.j,g);a.add(b).Ba(e);b=true}if(b)return c.$l(e,f,d);return false}Wa.prototype.$l=function(a,b,c){var d=this.j.ka(b);if(d==0)return false;d=-(this.j.ka(a)+this.Xa)/d;a.add(x(b,d)).Ba(c);return true};Wa.prototype.ub=function(a){return a.ka(this.j)+this.Xa};
function cb(a,b){return a.j.ka(b)<=0};function C(a,b,c){this.T=a?a:new s;this.ca=b?b:new s;this.da=c?c:new s}C.prototype.T=null;C.prototype.ca=null;C.prototype.da=null;C.prototype.e=function(){return new C(this.T,this.ca,this.da)};function db(a){var b=new Wa(false),c=a.T,d=a.da;b.j=Ia(a.ca.substract(c),d.substract(c));b.j.normalize();ab(b,c);return b}C.prototype.Kg=function(a){return eb(this,a,this.T,this.ca,this.da)&&eb(this,a,this.ca,this.T,this.da)&&eb(this,a,this.da,this.T,this.ca)};
function eb(a,b,c,d,e){a=e.substract(d);b=Ia(a,b.substract(d));c=Ia(a,c.substract(d));return b.ka(c)>=0}function fb(a){return Ia(a.ca.substract(a.T),a.da.substract(a.T))}C.prototype.$l=function(a,b){var c=fb(this);c.normalize();var d=c.ka(b);if(n.qa(d))a=null;else{var e=this.T.ka(c);c=-(c.ka(a)-e)/d;a=a.add(x(b,c))}if(a==null)return null;if(this.Kg(a))return a;return null};C.prototype.Ba=function(a){this.T.Ba(a.T);this.ca.Ba(a.ca);this.da.Ba(a.da)};function D(a){if(a==null)a=true;this.L=this.B=this.K=this.J=this.I=this.n=this.A=this.w=this.H=this.t=this.q=this.v=this.G=this.s=this.u=this.p=0;this.Oa=false;if(a){this.L=this.n=this.q=this.p=1;this.Oa=true}}function gb(a){if(a.Oa)return true;a.Oa=n.Ce(a.p)&&n.qa(a.u)&&n.qa(a.s)&&n.qa(a.G)&&n.qa(a.v)&&n.Ce(a.q)&&n.qa(a.t)&&n.qa(a.H)&&n.qa(a.w)&&n.qa(a.A)&&n.Ce(a.n)&&n.qa(a.I)&&n.qa(a.J)&&n.qa(a.K)&&n.qa(a.B)&&n.Ce(a.L);return a.Oa}
function hb(a){if(a.Oa)return true;return n.Ce(a.p)&&n.qa(a.u)&&n.qa(a.s)&&n.qa(a.G)&&n.qa(a.v)&&n.Ce(a.q)&&n.qa(a.t)&&n.qa(a.H)&&n.qa(a.w)&&n.qa(a.A)&&n.Ce(a.n)&&n.qa(a.I)&&n.Ce(a.L)}D.prototype.D=function(a){return n.D(this.p,a.p)&&n.D(this.u,a.u)&&n.D(this.s,a.s)&&n.D(this.G,a.G)&&n.D(this.v,a.v)&&n.D(this.q,a.q)&&n.D(this.t,a.t)&&n.D(this.H,a.H)&&n.D(this.w,a.w)&&n.D(this.A,a.A)&&n.D(this.n,a.n)&&n.D(this.I,a.I)&&n.D(this.J,a.J)&&n.D(this.K,a.K)&&n.D(this.B,a.B)&&n.D(this.L,a.L)};
function ib(a){return new s(a.p,a.q,a.n)}function jb(a,b){var c=b.e();b.c=c.c*a.p+c.b*a.v+c.d*a.w;b.b=c.c*a.u+c.b*a.q+c.d*a.A;b.d=c.c*a.s+c.b*a.t+c.d*a.n}function kb(a,b,c){b.c=c.c*a.p+c.b*a.v+c.d*a.w;b.b=c.c*a.u+c.b*a.q+c.d*a.A;b.d=c.c*a.s+c.b*a.t+c.d*a.n}function lb(a,b){return new s(b.c*a.p+b.b*a.v+b.d*a.w+a.J,b.c*a.u+b.b*a.q+b.d*a.A+a.K,b.c*a.s+b.b*a.t+b.d*a.n+a.B)}function mb(a,b){var c=b.c*a.u+b.b*a.q+b.d*a.A+a.K,d=b.c*a.s+b.b*a.t+b.d*a.n+a.B;b.c=b.c*a.p+b.b*a.v+b.d*a.w+a.J;b.b=c;b.d=d}
function nb(a,b){return new s(b.c+a.J,b.b+a.K,b.d+a.B)}
function E(a,b){var c=new D(false);if(a.Oa){b.Ba(c);return c}if(b.Oa){a.Ba(c);return c}c.p=a.p*b.p+a.v*b.u+a.w*b.s+a.J*b.G;c.u=a.u*b.p+a.q*b.u+a.A*b.s+a.K*b.G;c.s=a.s*b.p+a.t*b.u+a.n*b.s+a.B*b.G;c.G=a.G*b.p+a.H*b.u+a.I*b.s+a.L*b.G;c.v=a.p*b.v+a.v*b.q+a.w*b.t+a.J*b.H;c.q=a.u*b.v+a.q*b.q+a.A*b.t+a.K*b.H;c.t=a.s*b.v+a.t*b.q+a.n*b.t+a.B*b.H;c.H=a.G*b.v+a.H*b.q+a.I*b.t+a.L*b.H;c.w=a.p*b.w+a.v*b.A+a.w*b.n+a.J*b.I;c.A=a.u*b.w+a.q*b.A+a.A*b.n+a.K*b.I;c.n=a.s*b.w+a.t*b.A+a.n*b.n+a.B*b.I;c.I=a.G*b.w+a.H*b.A+
a.I*b.n+a.L*b.I;c.J=a.p*b.J+a.v*b.K+a.w*b.B+a.J*b.L;c.K=a.u*b.J+a.q*b.K+a.A*b.B+a.K*b.L;c.B=a.s*b.J+a.t*b.K+a.n*b.B+a.B*b.L;c.L=a.G*b.J+a.H*b.K+a.I*b.B+a.L*b.L;return c}
function pb(a,b){if(a.Oa){a.Ba(b);return true}var c=(a.p*a.q-a.u*a.v)*(a.n*a.L-a.I*a.B)-(a.p*a.t-a.s*a.v)*(a.A*a.L-a.I*a.K)+(a.p*a.H-a.G*a.v)*(a.A*a.B-a.n*a.K)+(a.u*a.t-a.s*a.q)*(a.w*a.L-a.I*a.J)-(a.u*a.H-a.G*a.q)*(a.w*a.B-a.n*a.J)+(a.s*a.H-a.G*a.t)*(a.w*a.K-a.A*a.J);if(c>-1.0E-7&&c<1.0E-7)return false;c=1/c;b.p=c*(a.q*(a.n*a.L-a.I*a.B)+a.t*(a.I*a.K-a.A*a.L)+a.H*(a.A*a.B-a.n*a.K));b.u=c*(a.A*(a.s*a.L-a.G*a.B)+a.n*(a.G*a.K-a.u*a.L)+a.I*(a.u*a.B-a.s*a.K));b.s=c*(a.K*(a.s*a.H-a.G*a.t)+a.B*(a.G*a.q-a.u*
a.H)+a.L*(a.u*a.t-a.s*a.q));b.G=c*(a.u*(a.H*a.n-a.t*a.I)+a.s*(a.q*a.I-a.H*a.A)+a.G*(a.t*a.A-a.q*a.n));b.v=c*(a.t*(a.w*a.L-a.I*a.J)+a.H*(a.n*a.J-a.w*a.B)+a.v*(a.I*a.B-a.n*a.L));b.q=c*(a.n*(a.p*a.L-a.G*a.J)+a.I*(a.s*a.J-a.p*a.B)+a.w*(a.G*a.B-a.s*a.L));b.t=c*(a.B*(a.p*a.H-a.G*a.v)+a.L*(a.s*a.v-a.p*a.t)+a.J*(a.G*a.t-a.s*a.H));b.H=c*(a.s*(a.H*a.w-a.v*a.I)+a.G*(a.v*a.n-a.t*a.w)+a.p*(a.t*a.I-a.H*a.n));b.w=c*(a.H*(a.w*a.K-a.A*a.J)+a.v*(a.A*a.L-a.I*a.K)+a.q*(a.I*a.J-a.w*a.L));b.A=c*(a.I*(a.p*a.K-a.u*a.J)+
a.w*(a.u*a.L-a.G*a.K)+a.A*(a.G*a.J-a.p*a.L));b.n=c*(a.L*(a.p*a.q-a.u*a.v)+a.J*(a.u*a.H-a.G*a.q)+a.K*(a.G*a.v-a.p*a.H));b.I=c*(a.G*(a.q*a.w-a.v*a.A)+a.p*(a.H*a.A-a.q*a.I)+a.u*(a.v*a.I-a.H*a.w));b.J=c*(a.v*(a.n*a.K-a.A*a.B)+a.q*(a.w*a.B-a.n*a.J)+a.t*(a.A*a.J-a.w*a.K));b.K=c*(a.w*(a.s*a.K-a.u*a.B)+a.A*(a.p*a.B-a.s*a.J)+a.n*(a.u*a.J-a.p*a.K));b.B=c*(a.J*(a.s*a.q-a.u*a.t)+a.K*(a.p*a.t-a.s*a.v)+a.B*(a.u*a.v-a.p*a.q));b.L=c*(a.p*(a.q*a.n-a.t*a.A)+a.u*(a.t*a.w-a.v*a.n)+a.s*(a.v*a.A-a.q*a.w));b.Oa=a.Oa;return true}
function qb(a){var b=new D(false);if(pb(a,b)){b.Ba(a);return true}return false}function rb(a){var b=new D(false);b.p=a.p;b.u=a.v;b.s=a.w;b.G=a.J;b.v=a.u;b.q=a.q;b.t=a.A;b.H=a.K;b.w=a.s;b.A=a.t;b.n=a.n;b.I=a.B;b.J=a.G;b.K=a.H;b.B=a.I;b.L=a.L;b.Oa=a.Oa;return b}
function sb(a,b,c){a.Oa=false;switch(b){case 0:a.p=c;break;case 1:a.u=c;break;case 2:a.s=c;break;case 3:a.G=c;break;case 4:a.v=c;break;case 5:a.q=c;break;case 6:a.t=c;break;case 7:a.H=c;break;case 8:a.w=c;break;case 9:a.A=c;break;case 10:a.n=c;break;case 11:a.I=c;break;case 12:a.J=c;break;case 13:a.K=c;break;case 14:a.B=c;break;case 15:a.L=c;break}}D.prototype.e=function(){var a=new D(false);this.Ba(a);return a};
D.prototype.Ba=function(a){a.p=this.p;a.u=this.u;a.s=this.s;a.G=this.G;a.v=this.v;a.q=this.q;a.t=this.t;a.H=this.H;a.w=this.w;a.A=this.A;a.n=this.n;a.I=this.I;a.J=this.J;a.K=this.K;a.B=this.B;a.L=this.L;a.Oa=this.Oa};function tb(a,b,c,d,e){b=1/Math.tan(b/2);a.p=b/c;a.u=0;a.s=0;a.G=0;a.v=0;a.q=b;a.t=0;a.H=0;a.w=0;a.A=0;a.n=e/(e-d);a.I=1;a.J=0;a.K=0;a.B=-d*e/(e-d);a.L=0;a.Oa=false}
function ub(a,b,c,d){c=c.substract(b);c.normalize();d=Ia(d,c);d.normalize();var e=Ia(c,d);a.p=d.c;a.u=e.c;a.s=c.c;a.G=0;a.v=d.b;a.q=e.b;a.t=c.b;a.H=0;a.w=d.d;a.A=e.d;a.n=c.d;a.I=0;a.J=-d.ka(b);a.K=-e.ka(b);a.B=-c.ka(b);a.L=1;a.Oa=false}function vb(a,b){var c=x(b,n.yd);b=Math.cos(c.c);var d=Math.sin(c.c),e=Math.cos(c.b),f=Math.sin(c.b),g=Math.cos(c.d);c=Math.sin(c.d);a.p=e*g;a.u=e*c;a.s=-f;var i=d*f;f=b*f;a.v=i*g-b*c;a.q=i*c+b*g;a.t=d*e;a.w=f*g+d*c;a.A=f*c-d*g;a.n=b*e;a.Oa=false}
function wb(a){var b=-Math.asin(a.s),c=Math.cos(b);b*=n.re;var d,e;if(Math.abs(c)>1.0E-8){var f=1/c;d=a.n*f;e=a.t*f;c=Math.atan2(e,d)*n.re;d=a.p*f;e=a.u*f}else{c=0;d=a.q;e=-a.v}a=Math.atan2(e,d)*n.re;if(c<0)c+=360;if(b<0)b+=360;if(a<0)a+=360;return new s(c,b,a)}function xb(a,b){a.J=b.c;a.K=b.b;a.B=b.d;a.Oa=false}function yb(a,b){a.p=b.c;a.q=b.b;a.n=b.d;a.Oa=false}function zb(a,b){var c=Ta(b),d;for(d=0;d<8;++d)mb(a,c[d]);a=c[0];b.C=a.e();b.M=a.e();for(d=1;d<8;++d)z(b,c[d])}
D.prototype.toString=function(){return this.p+" "+this.u+" "+this.s+" "+this.G+"\n"+this.v+" "+this.q+" "+this.t+" "+this.H+"\n"+this.w+" "+this.A+" "+this.n+" "+this.I+"\n"+this.J+" "+this.K+" "+this.B+" "+this.L};function Ab(a,b,c,d){this.d=this.b=this.c=0;this.ya=1;if(a!=null)this.c=a;if(b!=null)this.b=b;if(c!=null)this.d=c;if(d!=null)this.ya=d}l=Ab.prototype;l.c=0;l.b=0;l.d=0;l.ya=0;l.e=function(){var a=new Ab;this.Ba(a);return a};l.Ba=function(a){a.c=this.c;a.b=this.b;a.d=this.d;a.ya=this.ya};function Bb(a,b){return new Ab(a.c*b,a.b*b,a.d*b,a.ya*b)}Ab.prototype.pa=function(a){this.c+=a.c;this.b+=a.b;this.d+=a.d;this.ya+=a.ya;return this};
function Cb(a,b,c,d){var e=b.ka(c);if(e<0){b=Bb(b,-1);e*=-1}if(e+1>0.05)if(1-e>=0.05){var f=Math.acos(e),g=1/Math.sin(f);e=Math.sin(f*(1-d))*g;d=Math.sin(f*d)*g}else{e=1-d;d=d}else{c=new Ab(-b.b,b.c,-b.ya,b.d);e=Math.sin(n.PI*(0.5-d));d=Math.sin(n.PI*d)}b=Bb(b,e).pa(Bb(c,d));a.c=b.c;a.b=b.b;a.d=b.d;a.ya=b.ya}Ab.prototype.ka=function(a){return this.c*a.c+this.b*a.b+this.d*a.d+this.ya*a.ya};
function Db(a){var b=new D(false),c=a.c,d=a.b,e=a.d;a=a.ya;b.p=1-2*d*d-2*e*e;b.v=2*c*d+2*e*a;b.w=2*c*e-2*d*a;b.J=0;b.u=2*c*d-2*e*a;b.q=1-2*c*c-2*e*e;b.A=2*e*d+2*c*a;b.K=0;b.s=2*c*e+2*d*a;b.t=2*e*d-2*c*a;b.n=1-2*c*c-2*d*d;b.B=0;b.G=0;b.H=0;b.I=0;b.L=1;b.Oa=false;return b}function Eb(a,b){var c=a.ya*a.ya,d=a.c*a.c,e=a.b*a.b,f=a.d*a.d;b.d=Math.atan2(2*(a.c*a.b+a.d*a.ya),d-e-f+c);b.c=Math.atan2(2*(a.b*a.d+a.c*a.ya),-d-e+f+c);b.b=Math.asin(n.qc(-2*(a.c*a.d-a.b*a.ya),-1,1))}
function Fb(a,b,c,d){var e=b*0.5;b=Math.sin(e);var f=Math.cos(e);e=c*0.5;c=Math.sin(e);var g=Math.cos(e);e=d*0.5;d=Math.sin(e);var i=Math.cos(e);e=g*i;i=c*i;g=g*d;c=c*d;a.c=b*e-f*c;a.b=f*i+b*g;a.d=f*g-b*i;a.ya=f*e+b*c;a.normalize()}Ab.prototype.normalize=function(){var a=this.c*this.c+this.b*this.b+this.d*this.d+this.ya*this.ya;if(a!=1){a=a=1/Math.sqrt(a);this.c*=a;this.b*=a;this.d*=a;this.ya*=a}};Ab.prototype.toString=function(){return"(x: "+this.c+" y:"+this.b+" z:"+this.d+" w:"+this.ya+")"};function Gb(){this.Wa=[];for(var a=0;a<Hb;++a)this.Wa.push(new Wa)}Gb.prototype.Wa=null;var Hb=6;
Gb.prototype.rk=function(a){var b;b=this.Wa[2];b.j.c=a.G+a.p;b.j.b=a.H+a.v;b.j.d=a.I+a.w;b.Xa=a.L+a.J;b=this.Wa[3];b.j.c=a.G-a.p;b.j.b=a.H-a.v;b.j.d=a.I-a.w;b.Xa=a.L-a.J;b=this.Wa[5];b.j.c=a.G-a.u;b.j.b=a.H-a.q;b.j.d=a.I-a.A;b.Xa=a.L-a.K;b=this.Wa[4];b.j.c=a.G+a.u;b.j.b=a.H+a.q;b.j.d=a.I+a.A;b.Xa=a.L+a.K;b=this.Wa[0];b.j.c=a.G-a.s;b.j.b=a.H-a.t;b.j.d=a.I-a.n;b.Xa=a.L-a.B;b=this.Wa[1];b.j.c=a.s;b.j.b=a.t;b.j.d=a.n;b.Xa=a.B;for(a=a=0;a<Hb;++a){b=this.Wa[a];var c=-(1/b.j.getLength());b.j=x(b.j,c);b.Xa*=
c}};function Kb(a){var b=new s;bb(a.Wa[0],a.Wa[5],a.Wa[2],b);return b}function Lb(a){var b=new s;bb(a.Wa[0],a.Wa[5],a.Wa[3],b);return b}function Mb(a){var b=new s;bb(a.Wa[0],a.Wa[4],a.Wa[3],b);return b}function Nb(a){var b=new s;bb(a.Wa[0],a.Wa[4],a.Wa[2],b);return b}Gb.prototype.lb=function(a){var b=new y;b.reset(a.c,a.b,a.d);z(b,Kb(this));z(b,Lb(this));z(b,Nb(this));z(b,Mb(this));return b};
function Ob(a,b){b=Ta(b);for(var c=0;c<6;++c){for(var d=false,e=0;e<8;++e){var f;f=a.Wa[c];f=f.j.ka(b[e])+f.Xa;f=f<-1.0E-6?1:f>1.0E-6?0:2;if(f!=0){d=true;break}}if(!d)return false}return true};function Pb(a){if(a){this.f=new s;this.j=new s;this.oa=4294967295;this.Aa=new Qa;this.yg=new Qa}}l=Pb.prototype;l.f=null;l.j=null;l.oa=0;l.Aa=null;l.yg=null;function Qb(){this.l="";this.kc=false;this.gg=this.hg=this.de=this.ee=this.Ph=this.Ia=this.jd=null}Qb.prototype.Nb=function(){if(this.jd)return this.jd.width;if(this.ee!=null)return this.ee;return 0};Qb.prototype.Mb=function(){if(this.jd)return this.jd.height;if(this.de!=null)return this.de;return 0};function Rb(){this.cb="";this.Zb=null;this.ba=false;this.i="SetOverlayText"}Rb.prototype.h=function(a,b){var c=new Rb;c.cb=this.cb;c.Zb=this.Zb;c.ba=this.ba;if(c.Zb==a)c.Zb=b;return c};
Rb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.Zb!=-1)c=G(b,this.Zb);if(c&&c.nm){var d=this.cb.indexOf("$");if(d!=-1){a=this.cb;for(var e=0,f=true;f;){f=false;d=a.indexOf("$",e);if(d!=-1){e=d+1;var g=a.indexOf("$",d+1);if(g!=-1){f=true;var i=a.substr(d+1,g-(d+1));if(i=Sb(i,false,b)){d=a.substr(0,d);d+=Tb(i);e=d.length+1;d+=a.substr(g+1,a.length-g);a=d}}}}c.nm(a)}else c.nm(this.cb)}}};
function Ub(){this.nj=0;this.nf=null;this.ba=false;this.i="MakeSceneNodeInvisible"}Ub.prototype.h=function(a,b){var c=new Ub;c.nj=this.nj;c.nf=this.nf;c.ba=this.ba;if(c.nf==a)c.nf=b;return c};Ub.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.nf!=-1)c=G(b,this.nf);if(c)switch(this.nj){case 0:c.V=false;break;case 1:c.V=true;break;case 2:c.V=!c.V;break}}};function Vb(){this.Rc=this.Od=false;this.i="ChangeSceneNodePosition"}
Vb.prototype.h=function(a,b){var c=new Vb;c.qe=this.qe;c.Nc=this.Nc;c.Mc=this.Mc;c.ba=this.ba;c.jf=this.jf;c.ha=this.ha?this.ha.e():null;c.Mi=this.Mi?this.Mi.e():null;c.Od=this.Od;c.Rc=this.Rc;if(c.Nc==a)c.Nc=b;if(c.Mc==a)c.Mc=b;return c};
Vb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.Nc!=-1)c=G(b,this.Nc);if(c){var d=null;switch(this.qe){case 0:d=this.ha.e();break;case 1:d=c.f.add(this.ha);break;case 2:var e=null;if(this.jf)e=a;else if(this.Mc!=-1)e=G(b,this.Mc);if(e)d=e.f.add(this.ha);break;case 3:d=this.ha.getLength();a=c.$;b=new s(1,0,0);jb(a,b);if(c.k()=="camera")b=c.ga.substract(c.f);va(b,d);d=c.f.add(b);break;case 4:a=new y;a.reset(this.ha.c,this.ha.b,this.ha.d);z(a,this.Mi);d=new s;d.c=a.C.c+
Math.random()*(a.M.c-a.C.c);d.b=a.C.b+Math.random()*(a.M.b-a.C.b);d.d=a.C.d+Math.random()*(a.M.d-a.C.d);break;case 5:d=b.Qk.add(this.ha);break}if(d!=null)if(this.Od&&this.Rc>0){a=new Wb;a.Y=c.f.e();a.N=d;a.nd=this.Rc;a.hh=true;Xb(a);Yb(c,a)}else c.f=d}}};function Zb(){this.i="ChangeSceneNodeRotation"}Zb.prototype.h=function(a,b){var c=new Zb;c.yl=this.yl;c.pg=this.pg;c.ba=this.ba;c.ha=this.ha?this.ha.e():null;c.Oj=this.Oj;c.Kl=this.Kl;if(c.pg==a)c.pg=b;return c};
Zb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.pg!=-1)c=G(b,this.pg);if(c){b=null;switch(this.yl){case 0:b=this.ha.e();break;case 1:b=c.R.add(this.ha);break}if(b)if(this.Oj){a=new $b;b=b;var d=c.R,e=this.Kl;a.jn=true;a.te=b.e();a.ym=d.e();a.xl=a.Ma+e;Yb(c,a)}else c.R=b}}};function dc(){this.i="ChangeSceneNodeScale"}dc.prototype.h=function(a,b){var c=new dc;c.Al=this.Al;c.qg=this.qg;c.ba=this.ba;c.ha=this.ha?this.ha.e():null;if(c.qg==a)c.qg=b;return c};
dc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.qg!=-1)c=G(b,this.qg);if(c)switch(this.Al){case 0:c.ma=this.ha.e();break;case 1:c.ma=Fa(c.ma,this.ha);break}}};function ec(){this.i="ChangeSceneNodeTexture"}ec.prototype.h=function(a,b){var c=new ec;c.md=this.md;c.Zb=this.Zb;c.ba=this.ba;c.Bg=this.Bg;c.Kk=this.Kk;if(c.Zb==a)c.Zb=b;return c};
ec.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.Zb!=-1)c=G(b,this.Zb);if(c)if(c.k()=="2doverlay")c.Ia=this.Bg;else{a=c.Yc();if(this.md==0)for(b=0;b<a;++b){var d=c.sc(b);d.bb=this.Bg}else if(this.md==1){d=c.sc(this.Kk);if(d!=null)d.bb=this.Bg}}}};function fc(){this.i="ExecuteJavaScript"}fc.prototype.h=function(){var a=new fc;a.Nk=this.Nk;return a};fc.prototype.execute=function(a){n.Yl=a;eval(this.Nk);n.Yl=null};function gc(){this.i="OpenWebpage"}
gc.prototype.h=function(){var a=new gc;a.Nl=this.Nl;a.ga=this.ga;return a};gc.prototype.execute=function(){window.open(this.Nl,this.ga)};function hc(){this.i="SetSceneNodeAnimation"}hc.prototype.h=function(a,b){var c=new hc;c.og=this.og;c.ba=this.ba;c.Vb=this.Vb;c.xk=this.xk;if(c.og==a)c.og=b;return c};hc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.og!=-1)c=G(b,this.og);if(c){a=c;a.k()=="animatedmesh"&&ic(a,this.xk,this.Vb)}}};
function jc(a){this.za=a;this.i="SwitchToScene"}jc.prototype.h=function(){var a=new jc;a.mf=this.mf;return a};jc.prototype.execute=function(){this.za&&kc(this.za,this.mf,true)};function lc(a){this.za=a;this.i="SetActiveCamera"}lc.prototype.h=function(a,b){var c=new lc;c.Mf=this.Mf;if(c.Mf==a)c.Mf=b;return c};lc.prototype.execute=function(a,b){if(a&&b){a=null;if(this.Mf!=-1)a=G(b,this.Mf);a!=null&&a.k()=="camera"&&this.za&&mc(this.za,a)}};
function nc(){this.Od=false;this.Rc=0;this.i="SetCameraTarget"}nc.prototype.h=function(){var a=new nc;a.qe=this.qe;a.Nc=this.Nc;a.Mc=this.Mc;a.ba=this.ba;a.jf=this.jf;a.ha=this.ha?this.ha.e():null;a.Od=this.Od;a.Rc=this.Rc;return a};
nc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.Nc!=-1)c=G(b,this.Nc);var d=c;if(d.k()=="camera"){var e=d.ga.e();switch(this.qe){case 0:e=this.ha.e();break;case 1:e=c.f.add(this.ha);break;case 2:var f=null;if(this.jf)f=a;else if(this.Mc!=-1)f=G(b,this.Mc);if(f)e=f.f.add(this.ha);break}if(e!=null)if(this.Od&&this.Rc>0){a=new Wb;a.Y=d.ga.e();a.N=e;a.nd=this.Rc;a.hh=true;a.Wg=true;Xb(a);Yb(c,a)}else{oc(d,e);c=N(d,"camerafps");c!=null&&pc(c,e)}}}};
function qc(){this.Ri=this.fe=this.Yh=0;this.pf=-1;this.Sc=100;this.i="Shoot";this.of=-1;this.Vj=false;this.Sg=this.Vg=null;this.Uj=new s}qc.prototype.h=function(a,b){var c=new qc;c.Yh=this.Yh;c.fe=this.fe;c.Ri=this.Ri;c.pf=this.pf;c.Sc=this.Sc;c.of=this.of;c.Vj=this.Vj;c.Vg=this.Vg;c.Sg=this.Sg?this.Sg.h(a,b):null;c.Uj=this.Uj.e();if(c.pf==a)c.pf=b;if(c.of==a)c.of=b;return c};
qc.prototype.execute=function(a,b){if(a&&b){var c=new Ma,d=false,e=null,f=null,g=rc(b,"gameai");if(this.of!=-1){a=G(b,this.of);if(a!=null){d=true;e=a;c.Y=Ra(a.lb());c.Y.pa(this.Uj);mb(a.$,c.Y);f=b.fa;if(this.Vj&&f){a=new Ma;a.Y=O(f);a.N=f.ga;f=Na(a);va(f,this.Sc);a.N=a.Y.add(f);sc(this,a,g,this.Sc,b);tc(this,a,g,this.Sc,e,b);c.N=a.N}else{f=a.$;if(this.Vg){a=new D;vb(a,this.Vg);f=E(f,a)}c.N.set(1,0,0);jb(f,c.N);c.N.pa(c.Y)}}}else if(a!=null){e=a;if((f=N(a,"gameai"))&&f.Bk){c=f.Ck;d=true}}if(!d)if(f=
b.fa){e=f;c.Y=O(f);c.N=f.ga;d=true}if(d){d=Na(c);va(d,this.Sc);c.N=c.Y.add(d);sc(this,c,g,this.Sc,b);if(this.Yh==1){g=null;if(this.pf!=-1)g=G(b,this.pf);if(g){g=g.h(b.La,-1,-1);vc(b.La,g);if(g!=null){g.f=c.Y;P(g);g.V=true;g.Ga=-1;g.l="";b=Na(c);b=Ja(b);g.R=b;b=this.Ri;if(b==0)b=1;d=new Wb;d.Y=c.Y;d.N=c.N;d.nd=c.getLength()/b;d.hh=true;Xb(d);d.wn=true;d.pn=e;d.on=this.fe;d.bj=true;d.Lf=this.Sg;d.lh=this.Sc/b;Yb(g,d)}}}else if(this.Yh==0){e=tc(this,c,g,this.Sc,e,b);if(e!=null){b.Qk=c.N.e();(c=N(e,"gameai"))&&
wc(c,this.fe,e)}}}}};function sc(a,b,c,d,e){if(c.length!=0)if(a=N(c[0],"gameai"))if(a=a.ja){e=xc(yc.prototype,e,b.Y,b.N,a,true);if(e<d){d=Na(b);va(d,e);b.N=b.Y.add(d)}}}function tc(a,b,c,d,e,f){a=d;d=null;for(var g=0;g<c.length;++g)if(c[g]!==e){var i=N(c[g],"gameai");if(!(i&&!(i.Tb>0))){i={};i.Ja=0;if(zc(yc.prototype,f,c[g],b,false,false,null,i))if(i.Ja<a){a=i.Ja;d=c[g]}}}if(d){c=Na(b);va(c,a);b.N=b.Y.add(c)}return d}function Ac(){this.i="SetOrChangeAVariable"}
Ac.prototype.h=function(){var a=new Ac;a.Lb=this.Lb;a.kl=this.kl;a.yf=this.yf;a.Pd=this.Pd;return a};
Ac.prototype.execute=function(a,b){if(a&&b)if(this.Lb!=null){a=Sb(this.Lb,true,b);if(a!=null){var c=null;if(this.yf==1){c=Sb(this.Pd,false,b);if(c==null)return}if(c==null){c=new Bc;Cc(c,this.Pd)}switch(this.kl){case 0:c=c;if(c!=null){a.cc=c.cc;a.Qc=c.Qc;a.jc=c.jc;a.hc=c.hc}break;case 1:Dc(a,Q(a)+Q(c));break;case 2:Dc(a,Q(a)-Q(c));break;case 3:c=Q(c);Dc(a,c!=0?Q(a)/c:0);break;case 4:c=Q(c);Ec(a,c!=0?Math.floor(Q(a)/c):0);break;case 5:Dc(a,Q(a)*Q(c));break;case 6:Ec(a,Math.floor(Q(a)*Q(c)));break}Fc(a,
b)}}};function Gc(){this.i="IfVariable"}Gc.prototype.h=function(a,b){var c=new Gc;c.Lb=this.Lb;c.Ti=this.Ti;c.yf=this.yf;c.Pd=this.Pd;c.o=this.o?this.o.h(a,b):null;c.ei=this.ei?this.ei.h(a,b):null;return c};
Gc.prototype.execute=function(a,b){if(a&&b)if(this.Lb!=null){var c=Sb(this.Lb,true,b);if(c!=null){var d=null;if(this.yf==1){d=Sb(this.Pd,false,b);if(d==null)return}if(d==null){d=new Bc;Cc(d,this.Pd)}b=false;switch(this.Ti){case 0:case 1:b=c.cc==0&&d.cc==0?Tb(c)==Tb(d):n.D(Q(c),Q(d));if(this.Ti==1)b=!b;break;case 2:b=Q(c)>Q(d);break;case 3:b=Q(c)<Q(d);break}if(b)this.o&&this.o.execute(a);else this.ei&&this.ei.execute(a)}}};function Hc(){this.Xh=null;this.ba=false;this.i="RestartBehaviors"}
Hc.prototype.h=function(a,b){var c=new Hc;c.Xh=this.Xh;c.ba=this.ba;if(c.ba==a)c.ba=b;return c};Hc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.Xh!=-1)c=G(b,this.Xh);if(c)for(a=0;a<c.ia.length;++a){b=c.ia[a];b!=null&&b.reset()}}};function Ic(){this.i="PlaySound"}Ic.prototype.h=function(a,b){var c=new Ic;c.Oc=this.Oc;c.kg=this.kg;c.nl=this.nl?this.nl.e():null;c.ne=this.ne;c.Ah=this.Ah;c.bf=this.bf;c.Eg=this.Eg;c.jg=this.jg;c.Jb=this.Jb;if(c.Oc==a)c.Oc=b;return c};
Ic.prototype.execute=function(a,b){if(!(b==null||this.Jb==null))this.Kc=Jc(n.Sd,this.Jb,this.bf,this.Eg)};function Kc(){this.i="StopSpecificSound"}Kc.prototype.h=function(){var a=new Kc;a.Jb=this.Jb;return a};Kc.prototype.execute=function(a,b){b==null||this.Jb==null||Lc(n.Sd,this.Jb.l)};function Mc(){this.i="StopSound"}Mc.prototype.h=function(){var a=new Mc;a.sn=this.sn;a.Ap=this.Ap;return a};
Mc.prototype.execute=function(){for(var a=n.Sd,b=0;b<a.Cb.length;++b){var c=a.Cb[b];c.qi=true;c.src.$b.pause()}a.Cb=[]};function Nc(){this.i="StoreLoadVariable"}Nc.prototype.h=function(){var a=new Nc;a.tj=this.tj;a.Lb=this.Lb;return a};function Oc(a,b,c,d){a=new Date;a.setDate(a.getDate()+d);c=escape(c)+("; expires="+a.toUTCString());document.cookie=b+"="+c}
function Pc(a,b){a=document.cookie.split(";");for(var c=0;c<a.length;++c){var d=a[c],e=d.indexOf("="),f=d.substr(0,e);f=f.replace(/^\s+|\s+$/g,"");if(f==b)return unescape(d.substr(e+1))}return null}Nc.prototype.execute=function(a,b){if(!(this.Lb==null||this.Lb=="")){a=Sb(this.Lb,this.tj,b);if(a!=null)try{this.tj?Cc(a,Pc(this,a.getName())):Oc(this,a.getName(),Tb(a),99)}catch(c){}}};function Qc(a){this.Le=[];this.ta=a}
Qc.prototype.execute=function(a){for(var b=0;b<this.Le.length;++b)this.Le[b].execute(a,this.ta)};function Rc(a,b){b!=null&&a.Le.push(b)}function Sc(a,b){for(var c=0;c<a.Le.length;++c){var d=a.Le[c];if(d.i==b)return d}return null}Qc.prototype.h=function(a,b){for(var c=new Qc(this.ta),d=0;d<this.Le.length;++d){var e=this.Le[d];e.h!=null&&Rc(c,e.h(a,b))}return c};function Tc(a){this.za=a;this.i="RestartScene"}Tc.prototype.h=function(){var a=new Tc;a.mf=this.mf;return a};
Tc.prototype.execute=function(){this.za&&this.za.km(this.mf)};function Uc(){this.i="ActionDeleteSceneNode"}Uc.prototype.h=function(a,b){var c=new Uc;c.sg=this.sg;c.Fk=this.Fk;c.Gl=this.Gl;if(c.sg==a)c.sg=b;return c};Uc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.Fk)c=a;else if(this.sg!=-1)c=G(b,this.sg);c!=null&&Vc(b,c,this.Gl)}};function Wc(){this.i="ActionCloneSceneNode"}
Wc.prototype.h=function(a,b){var c=new Wc;c.rg=this.rg;c.Ak=this.Ak;c.o=this.o?this.o.h(a,b):null;if(c.rg==a)c.rg=b;return c};Wc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.Ak)c=a;else if(this.rg!=-1)c=G(b,this.rg);if(c){a=c.Ga;var d=-1;d=Xc(b);a=c.h(c.tb,a,d);if(a!=null){a.Ga=d;vc(c.tb,a);b.zi(c,a);if(c=c.ab)if(c=c.h(a)){a.ab=c;b.wd&&Yc(b.wd,c)}this.o&&this.o.execute(a)}}}};function Zc(a){this.i="ActionPlayMovie";this.za=a}
Zc.prototype.h=function(a,b){var c=new Zc;c.bf=this.bf;c.Si=this.Si;c.Ll=this.Ll;c.Oc=this.Oc;c.kg=this.kg;c.Wk=this.Wk;c.Ki=this.Ki?this.Ki.h(a,b):null;c.Ji=this.Ji?this.Ji.h(a,b):null;if(c.Oc==a)c.Oc=b;return c};
Zc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.kg)c=a;else if(this.Oc!=-1)c=G(b,this.Oc);a:{a=this.za;var d=this.Ll;b=this.Ki;for(var e=this.Ji,f=0;f<a.Ng.length;++f){var g=a.Ng[f];if(g.filename==d){a=g;break a}}if(this.Si==0){d=new $c(d,a.S);d.jk=b;d.kk=e;a.Ng.push(d);a=d}else a=null}if(a!=null)switch(this.Si){case 0:a.play(this.bf);if(c)if(c.k()=="2doverlay")c.Ia=a.Fi;else{c=c.sc(this.Wk);if(c!=null)c.bb=a.Fi}break;case 1:a.pause();break;case 2:a.stop();break}}};
function $c(a,b){this.filename=a;this.qd=null;this.lm=b;this.kk=this.jk=this.Fi=null;this.ar=this.vi=this.Ao=false;this.state=0;this.bm=this.uo=false;this.Aq=function(){this.state=2;this.qd.play();this.Ao=true;var c=this.Fi,d=ad(this.lm,this.qd,true);c.Ia=d.Ia;c.ee=d.ee;c.de=d.de;c.hg=d.hg;c.gg=d.gg};this.Bq=function(){this.state=0;this.vi=true};this.Np=function(){this.state=0;this.bm=this.vi=true};this.play=function(c){if(!(this.state==2||this.state==1)){if(this.qd)if(this.state==3){this.qd.play();
this.state=2;this.vi=false;return}else if(this.state==0){this.qd.currentTime=0;this.qd.play();this.state=2;this.vi=false;return}var d=document.createElement("video"),e=this;this.qd=d;this.uo=c;d.addEventListener("canplaythrough",function(){e.Aq()},true);d.addEventListener("ended",function(){e.Bq()},true);d.addEventListener("error",function(){e.Np()},true);d.preload="auto";d.src=a;d.style.display="none";if(this.uo)d.loop=true;this.state=1;c=document.createElement("canvas");if(c!=null){c.width=16;c.height=
16;this.Fi=ad(this.lm,c,true)}}};this.pause=function(){if(this.state==2){this.qd.pause();this.state=3}};this.stop=function(){if(this.state==2){this.qd.pause();this.state=0}};this.yq=function(){this.Ao&&this.state==2&&bd(this.lm,this.Fi,this.qd)};this.Xp=function(){if(this.state==0)return true;return this.vi}};function cd(){this.i=0;this.pc=this.bb=null;this.Bf=true;this.Bc=this.Qb=false;this.ce=true}cd.prototype.rk=function(a){if(a){this.i=a.i;this.Bf=a.Bf;this.bb=a.bb;this.pc=a.pc;this.Qb=a.Qb;this.Bc=a.Bc;this.ce=a.ce}};cd.prototype.e=function(){var a=new cd;a.i=this.i;a.Ol=this.Ol;a.Bf=this.Bf;a.bb=this.bb;a.pc=this.pc;a.Qb=this.Qb;a.Bc=this.Bc;a.ce=this.ce;return a};function dd(a){return a.i==ed||a.i==fd||a.i==gd||a.i==hd}l=cd.prototype;l.i=0;l.bb=null;l.pc=null;l.Bf=true;l.Ol=true;l.Qb=false;
l.ce=true;l.Bc=false;var ed=12,fd=13,hd=16,gd=14;function id(){this.g=new y;this.O=new cd;this.ea=[];this.m=[];this.Ua=null;this.Ij=this.Hj=false;this.vd=this.Nd=null}l=id.prototype;l.g=null;l.O=null;l.ea=null;l.m=null;l.Ua=null;l.Nd=null;l.vd=null;l.update=function(a,b){if(a)this.Hj=true;else if(b)this.Ij=true;else this.Ua=null};function jd(a){if(!a.m||a.m.length==0)a.g.reset(0,0,0);else{var b=a.m[0];a.g.C=b.f.e();a.g.M=b.f.e();for(var c=1;c<a.m.length;++c){b=a.m[c];z(a.g,b.f)}}}
id.prototype.h=function(){var a=new id;a.g=this.g.e();a.O=this.O.e();if(this.m)for(var b=0;b<this.m.length;++b)a.m.push(this.m[b]);if(this.ea)for(b=0;b<this.ea.length;++b)a.ea.push(this.ea[b]);if(this.Nd)for(b=0;b<this.Nd.length;++b)a.Nd.push(this.Nd[b].e());if(this.vd)for(b=0;b<this.vd.length;++b)a.vd.push(this.vd[b].e());return a};function kd(){this.g=new y;this.va=[]}kd.prototype.sd=function(a){this.va.push(a)};function ld(a){var b=0;if(a.va)for(var c=0;c<a.va.length;++c)if(a.va[c].ea)b+=a.va[c].ea.length;return b/3}kd.prototype.h=function(){var a=new kd;a.g=this.g.e();if(this.va)for(var b=0;b<this.va.length;++b)this.va[b]&&a.va.push(this.va[b].h());return a};n.gp=function(){this.Xk=[]};function md(a,b){for(var c=0;c<a.Xk.length;++c){var d=a.Xk[c];if(d.l==b)return d}return null}n.up=function(){this.l="";this.zh=new D;this.X=[];this.Yg=[];this.gf=[];this.ue=[];this.lf=[];this.Af=[];this.ai=new y;this.jj=new D;this.Te=new D;this.Zf=new D;this.vc=new s(0,0,0);this.Pb=new s(1,1,1);this.wc=new Ab;this.qh=new D;this.Km=false;this.Co=this.Do=this.vo=-1};n.yp=function(){this.Ei=this.Hi=this.oi=0;this.un=new s;this.tn=new s};
n.xp=function(){this.frame=0;this.scale=new s};n.vp=function(){this.frame=0;this.position=new s};n.wp=function(){this.frame=0;this.rotation=new Ab};n.Gh=function(){this.l="";this.Ac=this.N=this.ud=0};n.Gh.prototype.l="";n.Gh.prototype.ud=0;n.Gh.prototype.N=0;n.Gh.prototype.Ac=0;n.Cl=function(){this.l="";this.td=[];this.dd=0;this.Za=[];this.ra=[];this.kf=[];this.Ek=0;this.Zm=this.Ad=false;this.Fq=this.ep=this.Pk=0;this.ob=new y;this.Uf=1;this.ck=[];this.rm=true;this.al=[]};n.Cl.prototype.sd=function(a){this.Za.push(a)};
n.Cl.prototype.lb=da("ob");function nd(a,b,c){if(!(b==null&&c!=null))if(b==null)for(b=0;b<a.kf.length;++b)nd(a,a.kf[b],null);else{b.jj=c==null?b.zh.e():E(c.jj,b.zh);b.Zf=b.zh.e();b.Te=b.jj.e();if(gb(b.qh)){b.qh=b.jj.e();qb(b.qh)}for(c=0;c<b.X.length;++c)nd(a,b.X[c],b)}}
function od(a,b,c,d,e,f,g,i){var j=-1;e=j=-1;var m=c.gf;e=c.ue;c=c.lf;var o;if(m.length){j=-1;if(j==-1)for(g=0;g<m.length;++g){o=m[g];if(o.frame>=b){j=g;break}}if(j!=-1)if(a.Uf==0||j==0){o=m[j];o.position.e()}else if(a.Uf==1){o=m[j];m=m[j-1];g=b-o.frame;j=m.frame-b;wa(d,ua(Da(Da(m.position.substract(o.position),1/(g+j)),g),o.position))}}if(e.length){j=-1;if(j==-1)for(g=0;g<e.length;++g){d=e[g];if(d.frame>=b){j=g;break}}if(j!=-1)if(a.Uf==0||j==0){d=e[j];d.scale.e()}else if(a.Uf==1){d=e[j];e=e[j-1];
g=b-d.frame;j=e.frame-b;wa(f,ua(Da(Da(e.scale.substract(d.scale),1/(g+j)),g),d.scale))}}if(c.length){e=-1;if(e==-1)for(g=0;g<c.length;++g){f=c[g];if(f.frame>=b){e=g;break}}if(e!=-1)if(a.Uf==0||e==0){f=c[e];f.rotation.e()}else if(a.Uf==1){f=c[e];a=c[e-1];g=b-f.frame;j=a.frame-b;Cb(i,f.rotation,a.rotation,g/(g+j))}}}function pd(a,b,c){if(b==null)for(b=0;b<a.kf.length;++b)pd(a,a.kf[b],null);else{b.Te=c==null||b.Km?b.Zf.e():E(c.Te,b.Zf);for(c=0;c<b.X.length;++c)pd(a,b.X[c],b)}}
function qd(a,b,c,d){if(b.Af.length){c=E(b.Te,b.qh);for(var e=new s,f=new s,g=a.Za,i,j=0;j<b.Af.length;++j){var m=b.Af[j];i=m.un;e.c=i.c*c.p+i.b*c.v+i.d*c.w+c.J;e.b=i.c*c.u+i.b*c.q+i.d*c.A+c.K;e.d=i.c*c.s+i.b*c.t+i.d*c.n+c.B;d&&kb(c,f,m.tn);i=g[m.oi];i=i.m[m.Hi];if(a.ck[m.oi][m.Hi]){i.f.pa(x(e,m.Ei));d&&i.j.pa(x(f,m.Ei))}else{a.ck[m.oi][m.Hi]=true;i.f=x(e,m.Ei);if(d)i.j=x(f,m.Ei)}}}for(c=0;c<b.X.length;++c)qd(a,b.X[c],b,d)}
function rd(a,b){if(!b)return null;var c=a.al.length;b=b.toLowerCase();for(var d=0;d<c;++d){var e=a.al[d];if(e.l&&e.l.toLowerCase()==b)return e}return null};function sd(){this.Va=[];this.S=null;this.Kj=""}
function td(a,b,c){if(b==null||b=="")return null;var d=ud(a,b);if(d!=null)return d;if(c){d=new Qb;d.l=b;vd(a,d);d.jd=new Image;d.jd.onload=function(){var e=d,f=a.S;if(f!=null){var g=f.Z,i=g.createTexture(),j=e.jd;if((j.width&j.width-1)!=0||(j.height&j.height-1)!=0){var m=document.createElement("canvas");if(m!=null){m.width=wd(f,j.width);m.height=wd(f,j.height);m.getContext("2d").drawImage(j,0,0,j.width,j.height,0,0,m.width,m.height);j=m}}g.bindTexture(g.TEXTURE_2D,i);xd(f,i,j);g.generateMipmap(g.TEXTURE_2D);
g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR_MIPMAP_NEAREST);g.bindTexture(g.TEXTURE_2D,null);f.tm=true;e.Ia=i;e.kc=true}};d.jd.src=d.l;return d}return null}function ud(a,b){for(var c=0;c<a.Va.length;++c){var d=a.Va[c];if(d.l==b)return d}return null}function vd(a,b){if(b!=null){ud(a,b.l)!=null&&n.na.print("ERROR! Cannot add the texture multiple times: "+b.l);a.Va.push(b)}};function yd(a){this.Hn=a;this.Ip=a.length;this.Na=0;this.Pq=null;this.Qq=8;this.Ln=false}function zd(a){return a.Ip-a.Na}function Ad(a,b){return a.Hn.charCodeAt(b)&255}function S(a){return Bd(a,1)!=0}function Cd(a,b){for(var c=0,d=a.Na,e=d+b;e>d;)c=c*256+Ad(a,--e);a.Na+=b;return c}function Bd(a,b){a=Cd(a,b);if(a&1<<b*8-1)a=(~a+1)*-1;return a}function V(a){return Bd(a,4)}
function W(a){var b;var c=a.Hn,d=a.Na;b=c.charCodeAt(d+3)&255;var e=c.charCodeAt(d+2)&255,f=c.charCodeAt(d+1)&255;d=c.charCodeAt(d+0)&255;c=(b<<1&255|e>>7)-127;e=(e&127)<<16|f<<8|d;b=e==0&&c==-127?0:(1-2*(b>>7))*(1+e*Math.pow(2,-23))*Math.pow(2,c);a.Na+=4;return b}yd.prototype.ua=function(a,b){this.Ln=a||0;this.buffer=[];if(b){for(var c=a=b.length,d=this.buffer=new Array(a);c;d[a-c]=b.charCodeAt(--c));this.Ln&&d.reverse()}};yd.prototype.reset=function(){this.Na=0;return this};function Dd(){this.Z=this.canvas=null;this.height=this.width=0;this.tm=false;this.kb=new D;this.Qd=new D;this.ja=new D;this.Ob=new ra;this.Ob.nc=0;this.Ob.ic=0;this.Ob.dc=0;this.Zq=this.$q=null;this.fb=[];this.rb=[];this.jb=[];this.sb=[];this.$e=30;this.Wj=this.Hh=this.ol=this.an=this.$m=null;this.Ye=[];this.Vc=this.dj=null;this.Tn=false;this.xi=true;this.Wi=null;this.he=this.Vf=false;this.Sb=new ra;this.oh=0.01}Dd.prototype.Hh=null;Dd.prototype.Nb=da("width");
function Ed(a){var b=a.tm;a.tm=false;return b}Dd.prototype.Mb=da("height");
function Fd(a,b){if(b!=null){var c=a.Z;if(c!=null){var d=null;try{d=a.he?b.Bc?a.sb[b.i]:a.jb[b.i]:b.Bc?a.rb[b.i]:a.fb[b.i]}catch(e){}if(d!=null){a.Vc=d;c.useProgram(d);if(a.Hh!=null)try{a.Hh(b.i)}catch(f){}d.om!=null&&d.om();if(d.Nn){c.enable(c.BLEND);c.blendFunc(d.On,d.Mn)}else c.disable(c.BLEND);!b.Bf||b.i==ed||b.i==fd||b.i==hd?c.depthMask(false):c.depthMask(true);b.Ol?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST);c.depthFunc(a.Vf?c.GREATER:c.LEQUAL);b.ce?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE);
if(b.bb&&b.bb.kc){c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,b.bb.Ia);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,b.Qb?c.CLAMP_TO_EDGE:c.REPEAT);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,b.Qb?c.CLAMP_TO_EDGE:c.REPEAT)}else{c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,null)}c.uniform1i(c.getUniformLocation(d,"texture1"),0);if(b.pc&&b.pc.kc){c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,b.pc.Ia)}else{c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,null)}c.uniform1i(c.getUniformLocation(d,
"texture2"),1)}}}}
function Gd(a,b,c){if(b!=null)if(a.Z!=null){if(b.Ua==null)Hd(a,b);else if(b.Ij){if(!(b.m.length==0||b.ea.length==0))if(b.Ua.No<b.m.length||b.Ua.mk<b.ea.length){b.Ua=null;Hd(a,b)}else if(b.Ua!=null){for(var d=a.Z,e=b.m.length,f=b.Ua.wo,g=b.Ua.Lp,i=0;i<e;++i){var j=b.m[i];f[i*3+0]=j.f.c;f[i*3+1]=j.f.b;f[i*3+2]=j.f.d;g[i*4+0]=n.Zc(j.oa)/255;g[i*4+1]=n.Xc(j.oa)/255;g[i*4+2]=n.Wc(j.oa)/255;g[i*4+3]=n.Td(j.oa)/255}d.bindBuffer(d.ARRAY_BUFFER,b.Ua.pk);d.bufferSubData(d.ARRAY_BUFFER,0,f);d.bindBuffer(d.ARRAY_BUFFER,
b.Ua.Tl);d.bufferSubData(d.ARRAY_BUFFER,0,g);if(b.Ua.mk<b.ea.length){e=b.ea.length;f=new WebGLUnsignedShortArray(e);for(g=0;g<e;g+=3){f[g+0]=b.ea[g+0];f[g+1]=b.ea[g+2];f[g+2]=b.ea[g+1]}b.Ua.lk=d.createBuffer();d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.Ua.lk);d.bufferData(d.ELEMENT_ARRAY_BUFFER,f,d.STATIC_DRAW);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,null)}b.Ua.mk=b.ea.length;b.Ua.No=b.m.length}}else b.Hj&&Id(a,b);b.Hj=false;b.Ij=false;b=b.Ua;c=c;d=a.Z;e=b.sm&&b.Sl;d.enableVertexAttribArray(0);d.enableVertexAttribArray(1);
d.enableVertexAttribArray(2);d.enableVertexAttribArray(3);d.enableVertexAttribArray(4);d.bindBuffer(d.ARRAY_BUFFER,b.pk);d.vertexAttribPointer(0,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Lo);d.vertexAttribPointer(1,2,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Mo);d.vertexAttribPointer(2,2,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.qo);d.vertexAttribPointer(3,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Tl);d.vertexAttribPointer(4,4,d.FLOAT,false,0,0);if(e){d.enableVertexAttribArray(5);
d.enableVertexAttribArray(6);d.bindBuffer(d.ARRAY_BUFFER,b.sm);d.vertexAttribPointer(5,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Sl);d.vertexAttribPointer(6,3,d.FLOAT,false,0,0)}d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.lk);g=new D(false);a.kb.Ba(g);g=E(g,a.Qd);g=E(g,a.ja);f=a.Vc;f.mo!=null&&d.uniformMatrix4fv(f.mo,false,Jd(a,g));if(f.lo!=null){g=new D(true);g=E(g,a.Qd);g=E(g,a.ja);qb(g);g=rb(g);d.uniformMatrix4fv(f.lo,false,Jd(a,g))}if(f.jo!=null){g=new D(true);g=E(g,a.Qd);g=E(g,a.ja);d.uniformMatrix4fv(f.jo,
false,Jd(a,g))}f.ko!=null&&d.uniformMatrix4fv(f.ko,false,Jd(a,rb(a.ja)));f.io!=null&&Ld(a,f,e,e);f.fo!=null&&a.Z.uniform4f(f.fo,a.Sb.nc,a.Sb.ic,a.Sb.dc,1);f.ho!=null&&a.Z.uniform1f(f.ho,a.oh);if(c==null)c=b.mk;d.drawElements(d.TRIANGLES,c,d.UNSIGNED_SHORT,0);if(e){d.disableVertexAttribArray(5);d.disableVertexAttribArray(6)}}}
function Id(a,b){if(b.Ua!=null){a=a.Z;for(var c=b.m.length,d=b.Ua.wo,e=0;e<c;++e){var f=b.m[e];d[e*3+0]=f.f.c;d[e*3+1]=f.f.b;d[e*3+2]=f.f.d}a.bindBuffer(a.ARRAY_BUFFER,b.Ua.pk);a.bufferSubData(a.ARRAY_BUFFER,0,d)}}
function Hd(a,b){if(b.Ua==null){a=a.Z;var c={},d=b.m.length,e=new WebGLFloatArray(d*3),f=new WebGLFloatArray(d*3),g=new WebGLFloatArray(d*2),i=new WebGLFloatArray(d*2),j=new WebGLFloatArray(d*4),m=null,o=null;if(b.Nd)m=new WebGLFloatArray(d*3);if(b.vd)o=new WebGLFloatArray(d*3);for(var p=0;p<d;++p){var h=b.m[p];e[p*3+0]=h.f.c;e[p*3+1]=h.f.b;e[p*3+2]=h.f.d;f[p*3+0]=h.j.c;f[p*3+1]=h.j.b;f[p*3+2]=h.j.d;g[p*2+0]=h.Aa.c;g[p*2+1]=h.Aa.b;i[p*2+0]=h.yg.c;i[p*2+1]=h.yg.b;j[p*4+0]=n.Zc(h.oa)/255;j[p*4+1]=n.Xc(h.oa)/
255;j[p*4+2]=n.Wc(h.oa)/255;j[p*4+3]=n.Td(h.oa)/255}if(m&&o)for(p=0;p<d;++p){h=b.Nd[p];m[p*3+0]=h.c;m[p*3+1]=h.b;m[p*3+2]=h.d;h=b.vd[p];o[p*3+0]=h.c;o[p*3+1]=h.b;o[p*3+2]=h.d}p=b.ea.length;h=new WebGLUnsignedShortArray(p);for(var w=0;w<p;w+=3){h[w+0]=b.ea[w+0];h[w+1]=b.ea[w+2];h[w+2]=b.ea[w+1]}c.pk=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.pk);a.bufferData(a.ARRAY_BUFFER,e,a.DYNAMIC_DRAW);c.wo=e;c.Lo=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Lo);a.bufferData(a.ARRAY_BUFFER,g,a.STATIC_DRAW);
c.Mo=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Mo);a.bufferData(a.ARRAY_BUFFER,i,a.STATIC_DRAW);c.qo=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.qo);a.bufferData(a.ARRAY_BUFFER,f,a.STATIC_DRAW);if(m&&o){c.sm=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.sm);a.bufferData(a.ARRAY_BUFFER,m,a.STATIC_DRAW);c.Sl=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Sl);a.bufferData(a.ARRAY_BUFFER,o,a.STATIC_DRAW)}a.bindBuffer(a.ARRAY_BUFFER,null);c.Tl=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Tl);
a.bufferData(a.ARRAY_BUFFER,j,a.STATIC_DRAW);c.Lp=j;a.bindBuffer(a.ARRAY_BUFFER,null);c.lk=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c.lk);a.bufferData(a.ELEMENT_ARRAY_BUFFER,h,a.STATIC_DRAW);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);c.Z=a;c.mk=p;c.No=d;b.Ua=c;b.Hj=false;b.Ij=false}}
function Ld(a,b,c,d){var e=new ArrayBuffer(16*Float32Array.BYTES_PER_ELEMENT),f=new WebGLFloatArray(e);e=new ArrayBuffer(20*Float32Array.BYTES_PER_ELEMENT);var g=new WebGLFloatArray(e);e=new D(true);if(!c&&(a.Ye!=null&&a.Ye.length>0||a.dj!=null))pb(a.ja,e);for(c=0;c<4;++c){var i=c*4;if(a.Ye!=null&&c<a.Ye.length){var j=a.Ye[c],m=lb(e,j.Nh);f[i]=m.c;f[i+1]=m.b;f[i+2]=m.d;m=1;m=d?1/(j.Ea*j.Ea):j.$g;f[i+3]=m;g[i]=j.oa.nc;g[i+1]=j.oa.ic;g[i+2]=j.oa.dc}else{f[i]=1;f[i+1]=0;f[i+2]=0;f[i+3]=1;g[i]=0;g[i+
1]=0;g[i+2]=0}g[i+3]=1}g[16]=a.Ob.nc;g[17]=a.Ob.ic;g[18]=a.Ob.dc;g[19]=1;a.Z.uniform4fv(b.io,f);a.Z.uniform4fv(b.aq,g);if(b.co!=null){d=a.dj;f=null;f=d&&d.Fa?d.Fa.e():new s(1,0,0);Ca(f,-1);jb(e,f);f.normalize();a.Z.uniform3f(b.co,f.c,f.b,f.d,1);d?a.Z.uniform4f(b.eo,d.oa.nc,d.oa.ic,d.oa.dc,1):a.Z.uniform4f(b.eo,0,0,0,1)}}
function Md(a,b,c,d,e,f,g){if(!(d<=0||e<=0||a.width==0||a.height==0)){var i=true;if(g==null||g==false)i=false;g=a.Z;g.enableVertexAttribArray(0);g.disableVertexAttribArray(1);g.disableVertexAttribArray(2);g.disableVertexAttribArray(3);g.disableVertexAttribArray(4);c=a.height-c;var j=2/a.width,m=2/a.height;b=b*j-1;c=c*m-1;d*=j;e*=m;j=new WebGLFloatArray(12);j[0]=b;j[1]=c;j[2]=0;j[3]=b+d;j[4]=c;j[5]=0;j[6]=b+d;j[7]=c-e;j[8]=0;j[9]=b;j[10]=c-e;j[11]=0;b=new WebGLUnsignedShortArray(6);b[0]=0;b[1]=2;b[2]=
1;b[3]=0;b[4]=3;b[5]=2;c=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,c);g.bufferData(g.ARRAY_BUFFER,j,g.STATIC_DRAW);g.vertexAttribPointer(0,3,g.FLOAT,false,0,0);d=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,d);g.bufferData(g.ELEMENT_ARRAY_BUFFER,b,g.STATIC_DRAW);a.Vc=a.$m;g.useProgram(a.Vc);g.uniform4f(g.getUniformLocation(a.Vc,"vColor"),n.Zc(f)/255,n.Xc(f)/255,n.Wc(f)/255,i?n.Td(f)/255:1);g.depthMask(false);g.disable(g.DEPTH_TEST);if(i){g.enable(g.BLEND);g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA)}else g.disable(g.BLEND);
g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0);g.deleteBuffer(c);g.deleteBuffer(d)}}
function Nd(a,b,c,d,e,f,g,i,j,m,o){if(!(f==null||f.kc==false||d<=0||e<=0||a.width==0||a.height==0)){if(j==null)j=1;if(m==null)m=1;var p=true;if(g==null||g==false)p=false;g=a.Z;g.enableVertexAttribArray(0);g.enableVertexAttribArray(1);g.disableVertexAttribArray(2);g.disableVertexAttribArray(3);g.disableVertexAttribArray(4);c=a.height-c;var h=2/a.width,w=2/a.height;b=b*h-1;c=c*w-1;d*=h;e*=w;h=new WebGLFloatArray(12);h[0]=b;h[1]=c;h[2]=0;h[3]=b+d;h[4]=c;h[5]=0;h[6]=b+d;h[7]=c-e;h[8]=0;h[9]=b;h[10]=c-
e;h[11]=0;b=new WebGLFloatArray(8);b[0]=0;b[1]=0;b[2]=j;b[3]=0;b[4]=j;b[5]=m;b[6]=0;b[7]=m;j=new WebGLUnsignedShortArray(6);j[0]=0;j[1]=2;j[2]=1;j[3]=0;j[4]=3;j[5]=2;m=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,m);g.bufferData(g.ARRAY_BUFFER,h,g.STATIC_DRAW);g.vertexAttribPointer(0,3,g.FLOAT,false,0,0);c=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,c);g.bufferData(g.ARRAY_BUFFER,b,g.STATIC_DRAW);g.vertexAttribPointer(1,2,g.FLOAT,false,0,0);b=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,
b);g.bufferData(g.ELEMENT_ARRAY_BUFFER,j,g.STATIC_DRAW);a.Vc=i==null?a.an:i;g.useProgram(a.Vc);g.depthMask(false);g.disable(g.DEPTH_TEST);if(p){g.enable(g.BLEND);g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA)}else g.disable(g.BLEND);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,f.Ia);if(o){g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST)}else{g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,
g.TEXTURE_MIN_FILTER,g.LINEAR)}g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.activeTexture(g.TEXTURE1);g.bindTexture(g.TEXTURE_2D,null);g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0);g.deleteBuffer(c);g.deleteBuffer(m);g.deleteBuffer(b);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,f.Ia);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR_MIPMAP_NEAREST)}}
function Od(a,b,c,d,e,f,g){if(!(f==null||f.kc==false||d<=0||e<=0||a.width==0||a.height==0)){var i=a.Z;a.Vc=a.ol;i.useProgram(a.Vc);i.uniform4f(i.getUniformLocation(a.Vc,"vColor"),n.Zc(g)/255,n.Xc(g)/255,n.Wc(g)/255,n.Td(g)/255);Nd(a,b,c,d,e,f,true,a.ol,f.hg/f.ee,f.gg/f.de)}}function Pd(a){a.Ye=[];a.dj=null}function Qd(a,b){a.Ye.push(b)}function Rd(a,b){a.dj=b}
function Sd(a){if(!(a.canvas==null||a.Z==null))if(!(a.width==a.canvas.width&&a.height==a.canvas.height)){a.width=a.canvas.width;a.height=a.canvas.height;var b=a.Z;b.viewport&&b.viewport(0,0,a.width,a.height)}}
Dd.prototype.eb=function(a){this.canvas=a;this.Z=null;try{a=["webgl","experimental-webgl","moz-webgl","webkit-3d","3d"];for(var b=0;b<a.length;b++)try{this.Z=this.canvas.getContext(a[b],{alpha:false});if(this.Z!=null)break}catch(c){}}catch(d){}if(this.Z==null)return false;else{if(typeof WebGLFloatArray=="undefined"&&typeof Float32Array!="undefined")try{WebGLFloatArray=Float32Array;WebGLUnsignedShortArray=Uint16Array}catch(e){la(n.na,"Error: Float32 array types for webgl not found.")}if(typeof WebGLFloatArray==
"undefined"&&typeof CanvasFloatArray!="undefined")try{WebGLFloatArray=CanvasFloatArray;WebGLUnsignedShortArray=CanvasUnsignedShortArray}catch(f){la(n.na,"Error: canvas array types for webgl not found.")}a=this.Z;a.getProgramParameter||(a.getProgramParameter=a.getProgrami);a.getShaderParameter||(a.getShaderParameter=a.getShaderi);a=this.Z;this.xi=false;var g=b=Y(this,this.bc,this.Ff),i=Y(this,this.bc,this.Vl),j=Y(this,this.bc,this.Rp),m=Y(this,this.bc,this.Ff,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),
o=Y(this,this.bc,this.Xn,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),p=Y(this,this.bc,this.Ff,true,a.ONE,a.ONE_MINUS_SRC_COLOR),h=Y(this,this.uk,this.Vl),w=Y(this,this.uk,this.Vl,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),t=Y(this,this.Qo,this.Ff),L=Y(this,this.Po,this.Wn),A=Y(this,this.bc,this.Zn);this.$m=Y(this,this.Cq,this.Up);this.an=Y(this,this.Oo,this.Tp);this.ol=Y(this,this.Oo,this.Qp);this.fb[0]=g;this.fb[1]=g;this.fb[2]=i;this.fb[3]=i;this.fb[4]=i;this.fb[5]=j;this.fb[ed]=p;this.fb[fd]=m;this.fb[gd]=
o;this.fb[11]=h;this.fb[hd]=w;this.fb[17]=L;this.fb[25]=A;this.fb[23]=t;g=Y(this,this.rd,this.Ff);m=Y(this,this.rd,this.Ff,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);o=Y(this,this.rd,this.Xn,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);p=Y(this,this.rd,this.Ff,true,a.ONE,a.ONE_MINUS_SRC_COLOR);h=Y(this,this.vk,this.Un);w=Y(this,this.vk,this.Un,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);A=Y(this,this.rd,this.Zn);this.rb[0]=g;this.rb[1]=g;this.rb[2]=i;this.rb[3]=i;this.rb[4]=i;this.rb[5]=j;this.rb[ed]=p;this.rb[fd]=
m;this.rb[gd]=o;this.rb[11]=h;this.rb[hd]=w;this.rb[17]=L;this.rb[25]=A;i=Y(this,this.bc,this.Gf);j=Y(this,this.bc,this.Wl);m=Y(this,this.bc,this.Sp);o=Y(this,this.bc,this.Gf,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);p=Y(this,this.bc,this.Yn,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);h=Y(this,this.bc,this.Gf,true,a.ONE,a.ONE_MINUS_SRC_COLOR);w=Y(this,this.uk,this.Wl);t=Y(this,this.uk,this.Wl,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);L=Y(this,this.Qo,this.Gf);A=Y(this,this.Po,this.Wn);var u=Y(this,this.bc,
this.$n);this.jb[0]=i;this.jb[1]=i;this.jb[2]=j;this.jb[3]=j;this.jb[4]=j;this.jb[5]=m;this.jb[ed]=h;this.jb[fd]=o;this.jb[gd]=p;this.jb[11]=w;this.jb[hd]=t;this.jb[17]=A;this.jb[25]=u;this.jb[23]=L;i=Y(this,this.rd,this.Gf);o=Y(this,this.rd,this.Gf,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);p=Y(this,this.rd,this.Yn,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);h=Y(this,this.rd,this.Gf,true,a.ONE,a.ONE_MINUS_SRC_COLOR);w=Y(this,this.vk,this.Vn);t=Y(this,this.vk,this.Vn,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);
u=Y(this,this.rd,this.$n);this.sb[0]=i;this.sb[1]=i;this.sb[2]=j;this.sb[3]=j;this.sb[4]=j;this.sb[5]=m;this.sb[ed]=h;this.sb[fd]=o;this.sb[gd]=p;this.sb[11]=w;this.sb[hd]=t;this.sb[17]=A;this.sb[25]=u;this.xi=true;for(i=0;i<this.$e;++i){if(this.fb[i]==null)this.fb[i]=b;if(this.rb[i]==null)this.rb[i]=b;if(this.jb[i]==null)this.jb[i]=b;if(this.sb[i]==null)this.sb[i]=b}a.useProgram(g);this.Vc=g;a.clearColor(0,0,1,1);a.clearDepth(1);a.depthMask(true);a.enable(a.DEPTH_TEST);a.disable(a.BLEND);a.blendFunc(a.SRC_ALPHA,
a.ONE_MINUS_SRC_ALPHA);a.enable(a.CULL_FACE);a.cullFace(a.BACK);Sd(this)}return true};function Td(a,b,c){var d=a.Z;b=d.createShader(b);if(b==null)return null;d.shaderSource(b,c);d.compileShader(b);if(!d.getShaderParameter(b,d.COMPILE_STATUS)){if(a.xi){d.getShaderInfoLog(b);n.na&&la(n.na)}return null}return b}function Ud(a,b,c,d,e,f,g){b=Y(a,b,c,d,e,f);if(!b)return-1;b.om=g;a.$e+=1;a.fb[a.$e]=b;a.rb[a.$e]=b;a.jb[a.$e]=b;a.sb[a.$e]=b;return a.$e}
function Vd(a,b){var c=null;try{c=a.fb[b]}catch(d){}return c}
function Y(a,b,c,d,e,f,g){if(g==null)g=false;g=g;var i=a.Z,j=b,m=c;if(j.indexOf("precision ")==-1)j="#ifdef GL_ES\t\t\t\t\t\t\t\t\t\t\t\t\n\tprecision mediump float;\t\t\t\t\t\t\t\t\t\n\t#endif\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n"+b;if(m.indexOf("precision ")==-1)m="#ifdef GL_ES\t\t\t\t\t\t\t\t\t\t\t\t\n\tprecision mediump float;\t\t\t\t\t\t\t\t\t\n\t#endif\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n"+c;b=Td(a,i.VERTEX_SHADER,j);c=Td(a,i.FRAGMENT_SHADER,m);if(!b||!c){a.xi&&n.na.print("Could not create shader program");
g=null}else{m=i.createProgram();i.attachShader(m,b);i.attachShader(m,c);i.bindAttribLocation(m,0,"vPosition");i.bindAttribLocation(m,1,"vTexCoord1");i.bindAttribLocation(m,2,"vTexCoord2");i.bindAttribLocation(m,3,"vNormal");i.bindAttribLocation(m,4,"vColor");if(g){i.bindAttribLocation(m,5,"vBinormal");i.bindAttribLocation(m,6,"vTangent")}i.linkProgram(m);if(i.getProgramParameter(m,i.LINK_STATUS)){i.useProgram(m);i.uniform1i(i.getUniformLocation(m,"texture1"),0);i.uniform1i(i.getUniformLocation(m,
"texture2"),1)}else a.xi&&n.na.print("Could not link program:"+i.getProgramInfoLog(m));g=m}if(g){g.Nn=d?d:false;g.On=e;g.Mn=f;a=a.Z;g.mo=a.getUniformLocation(g,"worldviewproj");g.lo=a.getUniformLocation(g,"normaltransform");g.jo=a.getUniformLocation(g,"modelviewtransform");g.ko=a.getUniformLocation(g,"worldtransform");g.io=a.getUniformLocation(g,"arrLightPositions");g.aq=a.getUniformLocation(g,"arrLightColors");g.co=a.getUniformLocation(g,"vecDirLight");g.eo=a.getUniformLocation(g,"colorDirLight");
g.fo=a.getUniformLocation(g,"fogColor");g.ho=a.getUniformLocation(g,"fogDensity");g.om=null}return g}Dd.prototype.ad=function(a){a&&a.Ba(this.ja)};function Jd(a,b){return new WebGLFloatArray([b.p,b.u,b.s,b.G,b.v,b.q,b.t,b.H,b.w,b.A,b.n,b.I,b.J,b.K,b.B,b.L])}Dd.prototype.deleteTexture=function(a){if(a!=null){var b=this.Z;b.deleteTexture(a.Ia);a.Ia=null;a.kc=false;a.Ph&&b.deleteFramebuffer(a.Ph);a.Ph=null}};
function Wd(a,b,c){var d=a.Z;a=d.createFramebuffer();d.bindFramebuffer(d.FRAMEBUFFER,a);a.width=b;a.height=c;var e=d.createTexture();d.bindTexture(d.TEXTURE_2D,e);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR_MIPMAP_NEAREST);d.generateMipmap(d.TEXTURE_2D);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,b,c,0,d.RGBA,d.UNSIGNED_BYTE,null);var f=d.createRenderbuffer();d.bindRenderbuffer(d.RENDERBUFFER,f);d.renderbufferStorage(d.RENDERBUFFER,
d.DEPTH_COMPONENT16,b,c);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,e,0);d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,f);d.bindTexture(d.TEXTURE_2D,null);d.bindRenderbuffer(d.RENDERBUFFER,null);d.bindFramebuffer(d.FRAMEBUFFER,null);d=new Qb;d.l="";d.Ia=e;d.jd=null;d.kc=true;d.ee=b;d.de=c;d.hg=b;d.gg=c;d.Ph=a;return d}
function Xd(a,b,c,d,e){var f=a.Z;if(b!=null){f.bindFramebuffer(f.FRAMEBUFFER,b.Ph);f.viewport(0,0,b.ee,b.de)}else{f.bindFramebuffer(f.FRAMEBUFFER,null);f.viewport(0,0,a.width,a.height)}if(a.Wi!=null){f.bindTexture(f.TEXTURE_2D,a.Wi.Ia);f.generateMipmap(f.TEXTURE_2D)}a.Wi=b;if(c||d){b=0;if(c){b|=f.COLOR_BUFFER_BIT;f.clearColor(n.Zc(e)/255,n.Xc(e)/255,n.Wc(e)/255,1)}if(d){f.clearDepth(a.Vf?0:1);b|=f.DEPTH_BUFFER_BIT}f.clear(b)}return true}
function bd(a,b,c,d){var e=a.Z;b=b.Ia;e.bindTexture(e.TEXTURE_2D,b);var f=c.width,g=c.height;if(c.videoWidth)f=c.videoWidth;if(c.videoHeight)g=c.videoHeight;if((f&f-1)!=0||(g&g-1)!=0){var i=document.createElement("canvas");i.width=wd(a,f);i.height=wd(a,g);var j=i.getContext("2d");j.fillStyle="rgba(0, 255, 255, 1)";j.fillRect(0,0,i.width,i.height);d?j.drawImage(c,0,0,f,g,0,0,f,g):j.drawImage(c,0,0,f,g,0,0,i.width,i.height);c=i}xd(a,b,c);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);
e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.generateMipmap(e.TEXTURE_2D);e.bindTexture(e.TEXTURE_2D,null)}
function ad(a,b,c){var d=a.Z,e=d.createTexture();d.bindTexture(d.TEXTURE_2D,e);var f=b.width,g=b.height;if(b.videoWidth)f=b.videoWidth;if(b.videoHeight)g=b.videoHeight;var i=f,j=g;if((f&f-1)!=0||(g&g-1)!=0){j=document.createElement("canvas");j.width=wd(a,f);j.height=wd(a,g);i=j.getContext("2d");c?i.drawImage(b,0,0,f,g,0,0,f,g):i.drawImage(b,0,0,f,g,0,0,j.width,j.height);b=j;i=j.width;j=j.height}xd(a,e,b);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,
d.NEAREST);d.generateMipmap(d.TEXTURE_2D);d.bindTexture(d.TEXTURE_2D,null);a=new Qb;a.l="";a.Ia=e;a.jd=null;a.kc=true;a.ee=i;a.de=j;a.hg=f;a.gg=g;return a}function wd(a,b){--b;for(a=1;a<32;a<<=1)b|=b>>a;return b+1}
function xd(a,b,c){b=a.Z;try{b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,c)}catch(d){if(d.code!=null&&DOMException!=null&&DOMException.SECURITY_ERR!=null&&d.code==DOMException.SECURITY_ERR){a.Tn==false&&la(n.na,"<i>A security setting in the browser prevented loading a texture.<br/>Workaround: run this from a webserver, change security settings, or allow the specific domain.</i>",true);a.Tn=true}else try{b.texImage2D(b.TEXTURE_2D,0,c)}catch(e){}}}
function Yd(a){if(a.Wj==null){var b=null;b=new id;var c=new Pb(true),d=new Pb(true),e=new Pb(true),f=new Pb(true),g=b.ea;g.push(0);g.push(2);g.push(1);g.push(0);g.push(3);g.push(2);g=b.m;g.push(c);g.push(d);g.push(e);g.push(f);c.Aa.c=1;c.Aa.b=1;c.f.set(1,-1,0);d.Aa.c=1;d.Aa.b=0;d.f.set(1,1,0);e.Aa.c=0;e.Aa.b=0;e.f.set(-1,1,0);f.Aa.c=0;f.Aa.b=1;f.f.set(-1,-1,0);a.Wj=b}}l=Dd.prototype;l.Cq="\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = vPosition;\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Oo="\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\tattribute vec4 vTexCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = vPosition;\t\t\t\t\t\t\t\t\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";l.Up="\t\t\t\t\t\tuniform vec4 vColor;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t         gl_FragColor = vColor;\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Qp="\t\t\t\tuniform vec4 vColor;\t\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        float alpha = texture2D(texture1, texCoord).r;\t\t        gl_FragColor = vec4(vColor.rgb, alpha);\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.bc="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv_color = vColor;\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.rd="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\tuniform vec3 vecDirLight; \t\t\t\t\t\t\t\t\t\n\tuniform vec4 colorDirLight; \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 n = normalize(vec3(vNormal.xyz));\t\t\t\t\t\t\tvec4 currentLight = vec4(0, 0, 0, 1.0);\t\t\t\t\t\t\tfor(int i=0; i<4; ++i)\t\t\t\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec3 lPos = vec3(arrLightPositions[i].xyz);\t\t\t\t\t\tvec3 vertexToLight = lPos - vec3(vPosition.xyz);\t\t\t\tfloat distance = length( vertexToLight );\t\t\t\t\t\tfloat distanceFact = 1.0 / (arrLightPositions[i].w * distance); \t\t\tvertexToLight = normalize(vertexToLight); \t\t\t\t\t\tfloat angle = max(0.0, dot(n, vertexToLight));\t\t\t\t\tfloat intensity = angle * distanceFact;\t\t\t\t\t\t\tcurrentLight = currentLight + vec4(arrLightColors[i].x*intensity, arrLightColors[i].y*intensity, arrLightColors[i].z*intensity, 1.0);\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// directional light\t\t\t\t\t\t\t\t\t\n\t\tfloat dirlight = max(0.0, dot(n, vecDirLight));\t\t\tcurrentLight = currentLight + vec4(colorDirLight.x*dirlight, colorDirLight.y*dirlight, colorDirLight.z*dirlight, 1.0);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// ambient light\t\t\t\t\t\t\t\t\t\t\n\t\tcurrentLight = currentLight + arrLightColors[4];\t\t\t\tcurrentLight = max(currentLight, vec4(0.0,0.0,0.0,0.0));\t\t\tcurrentLight = currentLight * vec4(vColor.x, vColor.y, vColor.z, 1.0);\t\t\tv_color = min(currentLight, vec4(1.0,1.0,1.0,1.0));\t\t\t\tv_color.a = vColor.a;\t// preserve vertex alpha \n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Qo="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\tattribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\t\tv_color = vColor;\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.uk="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 modelviewtransform;\t\t\t\t\t\t\t\n\tuniform mat4 worldtransform;\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tgl_Position = worldviewproj * vPosition;\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\tuse reflection\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 pos = normalize((modelviewtransform * vPosition).xyz);\t\t\t\t\t\n\t\tvec3 n = normalize((normaltransform * vec4(vNormal, 1)).xyz);\t\t\n\t\tvec3 r = reflect( pos.xyz, n.xyz );\t\t\t\t\t\t\t\n\t\tfloat m = sqrt( r.x*r.x + r.y*r.y + (r.z+1.0)*(r.z+1.0) ); \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\ttexture coordinates\t\t\t\t\t\t\t\t\n\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\n\t\tv_texCoord2.x = (r.x / (2.0 * m)  + 0.5);\t\t\t\t\t\t\n\t\tv_texCoord2.y = (r.y / (2.0 * m)  + 0.5);\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
l.vk="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 modelviewtransform;\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\tuniform vec3 vecDirLight; \t\t\t\t\t\t\t\t\t\n\tuniform vec4 colorDirLight; \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\tuse reflection\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 pos = normalize((modelviewtransform * vPosition).xyz);\t\t\t\t\t\n\t\tvec3 nt = normalize((normaltransform * vec4(vNormal, 1)).xyz);\t\t\n\t\tvec3 r = reflect( pos.xyz, nt.xyz );\t\t\t\t\t\t\t\n\t\tfloat m = sqrt( r.x*r.x + r.y*r.y + (r.z+1.0)*(r.z+1.0) ); \n\t\t//\ttexture coordinates\t\t\t\t\t\t\t\t\n\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\n\t\tv_texCoord2.x = r.x / (2.0 * m)  + 0.5;\t\t\t\t\t\t\n\t\tv_texCoord2.y = r.y / (2.0 * m)  + 0.5;\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 n = normalize(vec3(vNormal.xyz));\t\t\t\t\t\t\tvec4 currentLight = vec4(0.0, 0.0, 0.0, 1.0);\t \t\t\t\tfor(int i=0; i<4; ++i)\t\t\t\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec3 lPos = vec3(arrLightPositions[i].xyz);\t\t\t\t\t\tvec3 vertexToLight = lPos - vec3(vPosition.xyz);\t\t\t\tfloat distance = length( vertexToLight );\t\t\t\t\t\tfloat distanceFact = 1.0 / (arrLightPositions[i].w * distance); \t\t\tvertexToLight = normalize(vertexToLight); \t\t\t\t\t\tfloat angle = max(0.0, dot(n, vertexToLight));\t\t\t\t\tfloat intensity = angle * distanceFact;\t\t\t\t\t\t\tcurrentLight = currentLight + vec4(arrLightColors[i].x*intensity, arrLightColors[i].y*intensity, arrLightColors[i].z*intensity, 1.0);\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// directional light\t\t\t\t\t\t\t\t\t\n\t\tfloat dirlight = max(0.0, dot(n, vecDirLight));\t\t\tcurrentLight = currentLight + vec4(colorDirLight.x*dirlight, colorDirLight.y*dirlight, colorDirLight.z*dirlight, 1.0);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// ambient light\t\t\t\t\t\t\t\t\t\t\n\t\tcurrentLight = currentLight + arrLightColors[4];\t\t\t\tcurrentLight = max(currentLight, vec4(0.0,0.0,0.0,0.0));\t\t\t//v_color = currentLight;\t\t\t\t\t\t\t\t\n\t\tv_color = min(currentLight, vec4(1.0,1.0,1.0,1.0));\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
l.Po="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 worldtransform;\t\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\n    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t\n\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t\n    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\n\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\n\tattribute vec3 vBinormal;\t\t\t\t\t\t\t\t\t\n\tattribute vec3 vTangent;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t// Output:\t\t\t\t\t\t\t\t\t\t\t\t\t\n    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\n\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\n\tvarying vec3 v_lightVector[4];\t\t\t\t\t\t\t\t\n\tvarying vec3 v_lightColor[4];\t\t\t\t\t\t\t\t\n\tvarying vec3 ambientLight;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t\n    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n        gl_Position = worldviewproj * vPosition;\t\t\t\t\n        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\n\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec4 pos = vec4(dot(vPosition, worldtransform[0]), dot(vPosition, worldtransform[1]), dot(vPosition, worldtransform[2]), dot(vPosition, worldtransform[3]));\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t// transform normal, binormal and tangent\t\t\t\t\t\n\t\tvec3 normal = vec3(dot(vNormal.xyz, worldtransform[0].xyz), dot(vNormal.xyz, worldtransform[1].xyz), dot(vNormal.xyz, worldtransform[2].xyz));\t\t\n\t\tvec3 tangent = vec3(dot(vTangent.xyz, worldtransform[0].xyz), dot(vTangent.xyz, worldtransform[1].xyz), dot(vTangent.xyz, worldtransform[2].xyz));     \n\t\tvec3 binormal = vec3(dot(vBinormal.xyz, worldtransform[0].xyz), dot(vBinormal.xyz, worldtransform[1].xyz), dot(vBinormal.xyz, worldtransform[2].xyz));     \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 temp = vec3(0.0, 0.0, 0.0);\t\t\t\t\t\t\n\t\tfor(int i=0; i<4; ++i) \t\t\t\t\t\t\t\t\t\n\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\tvec3 lightPos = vec3(arrLightPositions[i].xyz);\t\t\n\t\t\tvec3 vertexToLight = lightPos - vec3(pos.xyz); \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// transform the light vector 1 with U, V, W\t\t\n\t\t\ttemp.x = dot(tangent.xyz, vertexToLight);\t\t\t\t\n\t\t\ttemp.y = dot(binormal.xyz, vertexToLight);\t\t\t\t\n\t\t\ttemp.z = dot(normal.xyz, vertexToLight);\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// normalize light vector\t\t\t\t\t\n\t\t\ttemp = normalize(temp); \t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// move from -1..1 to 0..1 and put into output\t\t\n\t\t\ttemp = temp * 0.5;\t\t\t\t\t\t\t\n\t\t\ttemp = temp + vec3(0.5,0.5,0.5);\t\t\t\n\t\t\tv_lightVector[i] = temp;\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// calculate attenuation\t\t\t\t\t\n\t\t\tfloat distanceFact = 1.0 / sqrt(dot(vertexToLight, vertexToLight) * arrLightPositions[i].w); \n\t\t\tv_lightColor[i] = min(vec3(arrLightColors[i].x*distanceFact, arrLightColors[i].y*distanceFact, arrLightColors[i].z*distanceFact), vec3(1,1,1));\t\t\n\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t// ambient light\n\t\tambientLight = arrLightColors[4].xyz;\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
l.Tp="\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord);\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Ff="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord) * v_color;\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Xn="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord) * v_color;\t\t\tif(gl_FragColor.a < 0.5)\t\t\t\t\t\t\t\t\t\t\tdiscard;\t\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Vl="\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tgl_FragColor = col1 * col2;\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Rp="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tgl_FragColor = col1 * col2 * 3.0;\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Un="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 final = col1 * col2 * v_color;\t\t\t\t\t\t\t\tgl_FragColor = vec4(final.x, final.y, final.z, col1.w);\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Wn="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\tvarying vec3 v_lightVector[4];\t\t\t\t\t\t\t\t\tvarying vec3 v_lightColor[4];\t\t\t\t\t\t\t\t\tvarying vec3 ambientLight;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec4 colorMapSample = texture2D(texture1, v_texCoord1);\t\t\tvec3 normalMapVector = texture2D(texture2, v_texCoord1).xyz;\t\t//normalMapVector -= vec3(0.5, 0.5, 0.5);\t\t\t\t\t\n\t\t//normalMapVector = normalize(normalMapVector); \t\t\t\n\t\tnormalMapVector *= vec3(2.0, 2.0, 2.0);\t\t\t\t\t\n\t\tnormalMapVector -= vec3(1.0, 1.0, 1.0);\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 totallight = vec3(0.0, 0.0, 0.0);\t\t\t\t\t\t\n\t\tfor(int i=0; i<4; ++i) \t\t\t\t\t\t\t\t\t\n\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// process light\t\t\t\t\t\t\t\t\t\n\t\t\t//vec3 lightvect = v_lightVector[i] + vec3(-0.5, -0.5, -0.5); \n\t\t\tvec3 lightvect = (v_lightVector[i] * vec3(2.0, 2.0, 2.0)) - vec3(1.0, 1.0, 1.0); \n\t\t\tlightvect = normalize(lightvect);\t\t\t\t\t\n\t\t\tfloat luminance = dot(lightvect, normalMapVector); // normal DOT light\t\t\n\t\t\tluminance = clamp(luminance, 0.0, 1.0);\t// clamp result to positive numbers\t\t\n\t\t\tlightvect = luminance * v_lightColor[i];\t// luminance * light color \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// add to previously calculated lights\t\t\t\t\n\t\t\ttotallight = totallight + lightvect;\t\t\t\t\n\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\ttotallight = totallight + ambientLight;\t\t\t\t\t\n\t\tgl_FragColor = colorMapSample * vec4(totallight.x, totallight.y, totallight.z, 0.0);\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
l.Zn="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\t\tvec4 color1 = texture2D(texture1, texCoord);\t\t\t\t\tvec4 color2 = texture2D(texture2, texCoord);\t\t\t\t\tcolor1 = ((1.0 - v_color.w) * color1) + (v_color.w * color2);\t// interpolate texture colors based on vertex alpha\t \n\t\tgl_FragColor = color1 * v_color;\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Gf="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\t\tvec4 tmpFragColor = texture2D(texture1, texCoord) * v_color;\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Wl="\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 tmpFragColor = col1 * col2;\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Yn="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\t\tvec4 tmpFragColor = texture2D(texture1, texCoord) * v_color;\t\t\t\t\t\t\t\t\tif(tmpFragColor.a < 0.5)\t\t\t\t\t\t\t\t\t\t\tdiscard;\t\t\t\t\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Sp="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 tmpFragColor = col1 * col2 * 3.0;\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.$n="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\t\tvec4 color1 = texture2D(texture1, texCoord);\t\t\t\t\tvec4 color2 = texture2D(texture2, texCoord);\t\t\t\t\tcolor1 = ((1.0 - v_color.w) * color1) + (v_color.w * color2);\t// interpolate texture colors based on vertex alpha\t \n\t\tvec4 tmpFragColor = color1 * v_color;\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Vn="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 final = col1 * col2 * v_color;\t\t\t\t\t\t\t\tvec4 tmpFragColor = vec4(final.x, final.y, final.z, col1.w);\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";function Zd(){this.Dl=[];this.Cb=[];this.je=1}function $d(a,b){for(var c=0;c<a.Dl.length;++c){var d=a.Dl[c];if(d.l==b)return d}return null}function ae(a,b,c){if(b==null||b=="")return null;var d=$d(a,b);if(d!=null)return d;if(c){b=d=new be(b);if(b!=null){$d(a,b.l)!=null&&n.na&&n.na.print("ERROR! Cannot add the sound multiple times: "+b.l);a.Dl.push(b)}return d}return null}
function Jc(a,b,c,d){if(b==null)return null;var e=null;e=typeof b=="string"?ae(a,b,true):b;if(e==null||e.$b==null)return null;ce(a);for(b=0;b<a.Cb.length;)if(a.Cb[b].src===e){a.Cb[b].src.$b.pause();a.Cb.splice(b,1)}else++b;try{e.$b.currentTime=0}catch(f){}if(typeof d==="undefined")d=1;e.$b.volume=d*a.je;e.$b.play();var g=new de(e);g.to=d;a.Cb.push(g);e.cm&&e.$b.removeEventListener("ended",e.cm,false);e.$b.cm=null;if(c){g.no=true;a=function(){if(!g.qi){try{this.currentTime=0}catch(i){}this.play()}};
e.$b.addEventListener("ended",a,false);e.$b.cm=a}return g}Zd.prototype.stop=function(a){if(a){a.src.$b.pause();a.qi=true;ce(this)}};function ee(a,b){a.je=b;if(a.je<0)a.je=0;if(a.je>1)a.je=1;try{for(b=0;b<a.Cb.length;++b){var c=a.Cb[b];c.src.$b.volume=c.to*a.je}}catch(d){}}function ce(a){for(var b=0;b<a.Cb.length;)if(fe(a.Cb[b]))a.Cb.splice(b,1);else++b}function Lc(a,b){for(var c=0;c<a.Cb.length;++c){var d=a.Cb[c];if(d&&d.src&&d.src.l==b){a.Cb.splice(c,1);d.qi=true;d.src.$b.pause();return}}}n.Sd=new Zd;
function be(a){this.l=a;var b=null;try{b=new Audio;b.src=a}catch(c){}this.loaded=true;this.$b=b}function de(a){this.src=a;this.no=this.qi=false;this.to=1;this.startTime=(new Date).getTime()}function fe(a){if(a.qi)return true;if(a.no)return false;var b=(new Date).getTime(),c=a.src.duration;return c>0&&b>a.startTime+c};function ge(a,b,c,d,e,f,g){if((b==null||b==true)&&n.na==null)n.na=new fa(a,d);this.Zo=a;this.Xb=document.getElementById(this.Zo);this.la=new he;this.S=null;this.bp=false;this.fg=null;this.db=new sd;this.xe=new n.gp;this.li=this.xh=false;this.Sm=0;this.Ac=60;this.jl=this.gl=this.hl=this.Hb=null;this.wi=this.Bo=false;this.Ng=[];(this.ao=g?true:false)&&ie(this);this.ip=f==null?'Error: This browser does not support WebGL (or it is disabled).<br/>See <a href="www.ambiera.com/copperlicht/browsersupport.html">here</a> for details.':
f;this.Uh=[];this.Th=[];this.Eh=false;this.Bj=this.Aj=this.Fb=this.Eb=0;this.Fh=true;this.oj=false;this.Rk=this.Fl=0;this.uj=null;e!=null&&je(this,true,e);ke(this);if(c)this.Ac=c;var i=this;setInterval(function(){i.uj!=null&&le(i);if(n.na){++i.Sm;var j=0,m=0;if(i.db){j=i.db;for(var o=m=0;o<j.Va.length;++o)j.Va[o].kc==false&&++m;j=m;m=i.db.Va.length}if(i.li&&j==0){i.li=false;me(i)}if(i.xh||j){o="Loading";if(j>0)o="Textures loaded: "+(m-j)+"/"+m;switch(i.Sm%4){case 0:o+="   ";break;case 1:o+=".  ";
break;case 2:o+=".. ";break;case 3:o+="...";break}ka(n.na,o)}else ka(n.na,null)}},500);ne(Z(),this)}function oe(a){if(a.la==null)return null;return a.la.Ig()}
function pe(a){document.onkeydown=function(f){qe(a,f)};document.onkeyup=function(f){te(a,f)};var b=a.Xb;if(b!=null){b.onmousemove=function(f){ue(a,f)};b.onmousedown=function(f){ve(a,f)};b.onmouseup=function(f){we(a,f)};b.onmouseover=function(){a.Fh=true};b.onmouseout=function(){a.Fh=false};xe(a);try{var c=function(f){(f=f)||(f=event);if(f)ye(a,f.detail<0||f.wheelDelta>0?1:-1)};b.addEventListener("mousewheel",c,false);b.addEventListener("DOMMouseScroll",c,false)}catch(d){}try{c=function(f){a.oj=false;
we(a,f.changedTouches[0])&&ze(a,f,true)};b.addEventListener("touchstart",function(f){if(f.touches!=null){a.oj=f.touches.length==2;if(a.oj)a.Fl=Ae(a,f)}ve(a,f.changedTouches[0])&&ze(a,f,true)},false);b.addEventListener("touchend",c,false);b.addEventListener("touchcancel",c,false);b.addEventListener("touchleave",c,false);b.addEventListener("touchmove",function(f){if(a.oj&&f.touches!=null&&f.touches.length>=2){f=Ae(a,f);var g=f-a.Fl;a.Fl=f;ye(a,g)}else ue(a,f.changedTouches[0])&&ze(a,f,true)},false)}catch(e){}}}
function Ae(a,b){a=b.touches;if(a[0].pageX==null)return 0;return Math.sqrt((a[0].pageX-a[1].pageX)*(a[0].pageX-a[1].pageX)+(a[0].pageY-a[1].pageY)*(a[0].pageY-a[1].pageY))}ge.prototype.load=function(a,b,c){if(!Be(this)){je(this,false,this.ip);return false}var d=this;this.xh=true;(new na(a,a.indexOf(".ccbz")!=-1)).load(function(e){d.hm(e,a,b);c&&c()});return true};
function Be(a){if(a.S!=null)return true;var b=a.Xb;if(b==null)return false;var c=n.wl!=null&&n.wl.Vq;a.S=new Dd;if(c||a.S.eb(b)==false)if(n.wl!=null){a.S=new n.wl;if(a.S.eb(b)==false)return false}else return false;if(a.db)a.db.S=a.S;pe(a);var d=1E3/a.Ac,e=q();function f(){var g=q(),i=g-e;if(i>d){e=g-i%d;a.ao&&Ce(a);De(a);if(n.na!=null){a.la.Ig();g=n.na;if(g.Hm!=null){g.frames+=1;i=(new Date).getTime();if(i-g.em>1E3){var j="FPS: "+(g.frames/(i-g.em)*1E3).toFixed(2);g.Hm.nodeValue=j;g.em=i;g.frames=
0}}}}window.requestAnimationFrame(f)}window.requestAnimationFrame(f);return true}function ie(){document.body.style.margin="0";document.body.style.padding="0";document.body.style.overflow="hidden"}function Ce(a){var b=window.innerHeight||window.clientHeight;a.Xb.setAttribute("width",(window.innerWidth||window.clientWidth)+"px");a.Xb.setAttribute("height",b+"px")}
ge.prototype.hm=function(a,b,c){this.xh=false;var d=new Ee;a=d.Zp(a,b,this.db,this.xe,this);if(a!=null)if(!c||this.la==null||this.la!=null&&this.la.Ib.length==0){this.la=a;if(d.Rm){this.Nm=d.vn;this.dp=b}if(a.Bn)this.li=true;else me(this)}else for(b=0;b<a.Ib.length;++b)this.la.Pl(a.Ib[b])};function me(a){a.ik(a.la.Ig());De(a);a.jl!=null&&a.jl()}
function De(a){if(!(a.la==null||a.S==null))if(!(a.xh||a.li)){ke(a);Fe(a);var b=a.la.Ig();if(!a.bp&&b){for(var c=false,d=0;d<a.Ng.length;++d){var e=a.Ng[d];e.yq();if(e.Xp()){if(e.jk!=null&&!e.bm){var f=oe(a);e.jk.execute(f.La,f);e.jk=null}if(e.kk!=null&&e.bm){f=oe(a);e.kk.execute(f.La,f);e.kk=null}a.Ng.splice(d,1);--d}else c=true}c&&Ge(b);a.Hb&&a.Hb();d=a.S;b.wh=d;if(b.Ma==0)b.Ma=q();b.Dp=null;c=false;if(b.ih.length==0)e=false;else{e=q();f=false;for(var g=0;g<b.ih.length;){var i=b.ih[g];if(i.wq<e){i.Ee.tb&&
i.Ee.tb.removeChild(i.Ee);b.ih.splice(g,1);f=true;b.wd&&i.Ee.ab&&He(b.wd,i.Ee.ab)}else++g}e=f}if(e)c=true;if(b.La.Hb(b,q()))c=true;if(b.fa){e=new D(false);b.fa.kb.Ba(e);e=E(e,b.fa.Ec);e=!e.D(b.sj)}else e=true;d=d?Ed(d):false;if(b.Ik||b.Mj==0&&(e||d)||b.Mj==1&&(e||c||d)||b.Mj==2||Ie(Z())){b.Ik=false;c=true}else c=false;if(c){c=a.S;d=b.ah;if(c.Z!=null){Sd(c);e=c.Z;e.clearDepth(c.Vf?0:1);e.depthMask(true);e.clearColor(n.Zc(d)/255,n.Xc(d)/255,n.Wc(d)/255,1);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}a.hl&&
a.hl();c=a.S;b.Tj=[];b.ug=[];b.Ze=[];b.Nj=[];b.Jj=[];b.La.Ka(b);b.Ui=null;for(d=d=b.zp=0;d<b.Nj.length;++d){b.ec=Je;b.Nj[d].vb(c)}Ke(b,c);b.ec=Le;for(d=0;d<b.Jj.length;++d)b.Jj[d].vb(c);if(b.fa){b.fa.kb.Ba(b.sj);b.sj=E(b.sj,b.fa.Ec)}a.gl&&a.gl();b=n.Ca;b!=null&&Me(b,a.S);b=a.S;b.Z!=null&&b.Z.flush()}}Fe(a)}}ge.prototype.Pl=function(a){if(this.la){this.la.Ib.push(a);this.la.Ib.length==1&&this.la.Eo(a)}};
function kc(a,b,c){if(!a.la)return false;var d=a.la.Ib;b=b;if(c)b=b.toLowerCase();for(var e=0;e<d.length;++e){var f=d[e].l;if(c)f=f.toLowerCase();if(b==f){a.ik(d[e]);return true}}return false}
ge.prototype.ik=function(a){if(!a)return false;var b=a.hk()=="panorama",c=a.hk()=="free",d=null;this.la.Eo(a);if(!a.Cn){a.Cn=true;var e=false,f=Ne(a,"camera");if(f)for(var g=0;g<f.length;++g){var i=f[g];if(i&&i.vm){d=i;e=true;Oe(d,this.S.width,this.S.height);break}}if(!e){e=4/3;if(this.S.width&&this.S.height)e=this.S.width/this.S.height;d=new Pe;Qe(d,e);vc(a.La,d);e=null;if(!b){e=new Re(d,this);Yb(d,e)}if(c){if(a.Dk!=null)d.f=a.Dk.e();if(a.aj!=null)e!=null?pc(e,a.aj):oc(d,a.aj)}e&&Se(e,!b)}a.fa=d;
a.wd=Te(a,true);Ue(this,a.La,a.wd)}Z().pb=a;a.Mj=this.la.Fp;Ge(a);return true};function Fe(a){if(a.fg!=null){var b=a.la.Ig();if(b!=null)if(a.fg.r===b){a.S&&Oe(a.fg,a.S.Nb(),a.S.Mb());b.fa=a.fg;a.fg=null}}}function qe(a,b){var c=oe(a);if(c==null)return false;if(b==null)b=window.event;var d=false;c=c.fa;if(c!=null)d=c.Fe(b);for(c=0;c<a.Th.length;++c)if(a.Th[c].Fe(b))d=true;return ze(a,b,d)}
function te(a,b){var c=oe(a);if(c==null)return false;if(b==null)b=window.event;var d=false;c=c.fa;if(c!=null)d=c.Ge(b);for(c=0;c<a.Uh.length;++c)if(a.Uh[c].Ge(b))d=true;return ze(a,b,d)}function ze(a,b,c){if(c){try{b.preventDefault()}catch(d){}return true}return false}function ke(a){for(var b=0,c=0,d=a.Xb;d!=null;){b+=d.offsetLeft;c+=d.offsetTop;d=d.offsetParent}a.zm=b;a.Am=c}function Ve(a,b){return b.pageX?b.pageX-a.zm:b.clientX-a.Xb.offsetLeft+document.body.scrollLeft}
function We(a,b){return b.pageY?b.pageY-a.Am:b.clientY-a.Xb.offsetTop+document.body.scrollTop}function ve(a,b){if(b==null)b=window.event;a.Eh=true;a.Fh=true;if(b){a.Aj=Ve(a,b);a.Bj=We(a,b);a.Eb=a.Aj;a.Fb=a.Bj}var c=oe(a);if(c==null)return false;var d=false;if(a.Vm)d=a.Vm();if(!d){d=c.fa;d!=null&&d.Vd(b);d=b;for(var e=0;e<c.Lc.length;++e)c.Lc[e].Vd(d)}return ze(a,b,true)}function Xe(a){if(a.wi){a.Eb=0;a.Fb=0;a.Aj=0;a.Bj=0}else{a.Aj=a.Eb;a.Bj=a.Fb}}
function we(a,b){if(b==null)b=window.event;a.Eh=false;var c=oe(a);if(c==null)return false;if(b){a.Eb=Ve(a,b);a.Fb=We(a,b)}var d=false;if(a.Wm)d=a.Wm();if(!d){d=c.fa;d!=null&&d.pd(b);d=b;for(var e=0;e<c.Lc.length;++e)c.Lc[e].pd(d)}return ze(a,b,true)}function ye(a,b){a=oe(a);if(a!=null){var c=a.fa;c!=null&&c.If(b);for(c=0;c<a.Lc.length;++c)a.Lc[c].If(b)}}
function ue(a,b){if(b==null)b=window.event;if(b){a.Eb=Ve(a,b);a.Fb=We(a,b)}if(a.wi){var c=b.movementY||b.mozMovementY||b.webkitMovementY||0;a.Eb=b.movementX||b.mozMovementX||b.webkitMovementX||0;a.Fb=c}c=oe(a);if(c==null)return false;var d=c.fa;d!=null&&d.He(b);d=b;for(var e=0;e<c.Lc.length;++e)c.Lc[e].He(d);return ze(a,b,true)}l=ge.prototype;l.Hb=null;l.Wm=null;l.Vm=null;l.gl=null;l.hl=null;l.jl=null;
function Ye(a,b,c){a=a.S;if(a==null)return null;var d=a.kb,e=a.Qd;if(d==null||e==null)return null;d=E(d,e);var f=new Gb;f.rk(d);d=Kb(f);e=Lb(f).substract(d);f=Nb(f).substract(d);var g=a.Nb();a=a.Mb();c=c/a;return d.add(x(e,b/g)).add(x(f,c))}
function Ze(a,b){var c=new D(false),d=a.S;if(!d.kb)return null;d.kb.Ba(c);c=E(c,d.Qd);a=d.Nb()/2;d=d.Mb()/2;if(d==0||a==0)return null;b=new s(b.c,b.b,b.d);b.W=1;c=c;var e=b.e();e.ya=b.W;b.c=e.c*c.p+e.b*c.v+e.d*c.w+e.ya*c.J;b.b=e.c*c.u+e.b*c.q+e.d*c.A+e.ya*c.K;b.d=e.c*c.s+e.b*c.t+e.d*c.n+e.ya*c.B;b.W=e.c*c.G+e.b*c.H+e.d*c.I+e.ya*c.L;c=b.W==0?1:1/b.W;if(b.d<0)return null;e=new Qa;e.c=a*b.c*c+a;e.b=d-d*b.b*c;return e}function mc(a,b){if(b!=null)a.fg=b}
function Ue(a,b,c){if(b){for(var d=0;d<b.ia.length;++d){var e=b.ia[d];if(e)if(e.k()=="collisionresponse")e.ad(c);else if(e.k()=="onclick"||e.k()=="onmove")e.ja=c;else if(e.k()=="gameai")e.ja=c;else if(e.k()=="3rdpersoncamera")e.ja=c}for(d=0;d<b.X.length;++d)(e=b.X[d])&&Ue(a,e,c)}}
ge.prototype.km=function(a){if(!a||!this.la)return false;if(this.Nm==null)return false;for(var b=null,c=-1,d=0;d<this.la.Ib.length;++d)if(a==this.la.Ib[d].l){c=d;b=this.la.Ib[d];break}if(c==-1)return false;a=(new Ee).km(this.Nm,b,c,this.dp,this.db,this.xe,this);if(a!=null){b=this.la.Ig()==b;this.la.Ib[c]=a;b&&this.ik(a)}return true};function le(a){if(!a.xh&&!a.li){a.uj.style.display="none";a.uj=null}}
function je(a,b,c){if(a.Xb!=null){var d=document.createElement("div");a.Xb.parentNode.appendChild(d);var e=document.createElement("div");ke(a);var f=b?23:100,g=b?30:0,i=a.zm+(a.Xb.width-200)/2,j=a.Am+a.Xb.height/2;b||(j+=30);c=c.replace("$PROGRESS$","");e.style.cssText="position: absolute; left:"+i+"px; top:"+j+"px; color:#ffffff; padding:5px; background-color:#000000; height:"+f+"px; width:200px; border-radius:5px; border:1px solid #777777;  opacity:0.5;";c='<p style="margin:0; padding-left:'+g+
'px; padding-bottom:5px;">'+c+"</p> ";if(b)c+='<img style="position:absolute; left:5px; top:3px;" src="copperlichtdata/loading.gif" />';e.innerHTML=c;d.appendChild(e);if(b)a.uj=d}}
function xe(a){function b(){var d=a.Xb;if(a.Bo){d.tq=d.requestPointerLock||d.mozRequestPointerLock||d.webkitRequestPointerLock;d.tq()}}function c(){var d=a.Xb;a.wi=document.PointerLockElement===d||document.pointerLockElement===d||document.mozPointerLockElement===d||document.webkitPointerLockElement===d?true:false}document.addEventListener("fullscreenchange",b,false);document.addEventListener("mozfullscreenchange",b,false);document.addEventListener("webkitfullscreenchange",b,false);document.addEventListener("pointerlockchange",
c,false);document.addEventListener("mozpointerlockchange",c,false);document.addEventListener("webkitpointerlockchange",c,false)}function $e(a,b,c){if(c==null)c=a.Xb;a.Bo=b;c.requestFullscreen=c.requestFullscreen||c.Yq||c.mozRequestFullScreen||c.msRequestFullscreen||c.webkitRequestFullscreen;c.requestFullscreen()};function $(){this.i=-1;this.f=new s;this.R=new s;this.ma=new s(1,1,1);this.V=true;this.l="";this.ib=0;this.Ga=-1;this.tb=null;this.X=[];this.ia=[];this.$=new D;this.ab=this.r=null}l=$.prototype;l.eb=function(){this.f=new s;this.R=new s;this.ma=new s(1,1,1);this.X=[];this.ia=[];this.$=new D};l.f=null;l.R=null;l.ma=null;l.V=true;l.l="";l.Ga=-1;l.ab=null;l.tb=null;l.k=k("none");l.lb=function(){return new y};
function N(a,b){for(var c=0;c<a.ia.length;++c){var d=a.ia[c];if(d.k()==b)return d}return null}function af(a,b){for(var c=0;c<a.ia.length;++c){var d=a.ia[c].Ef(b);if(d!=null)return d}return null}function bf(a){var b=a.lb().e();zb(a.$,b);return b}
function cf(a,b,c,d,e){b.l=new String(a.l);b.V=a.V;b.ib=a.ib;b.f=a.f.e();b.R=a.R.e();b.ma=a.ma.e();b.i=a.i;b.r=a.r;c&&vc(c,b);for(var f=0;f<a.X.length;++f){var g=a.X[f];if(g){var i=-1;if(c&&c.r)i=Xc(c.r);g=g.h(b,g.Ga,i);if(g!=null){g.Ga=i;vc(b,g)}}}for(f=0;f<a.ia.length;++f)Yb(b,a.ia[f].h(a,a.r,d,e));if(a.$)b.$=a.$.e()}$.prototype.h=k(null);function Yb(a,b){b!=null&&a.ia.push(b)}function df(a,b){if(b!=null){var c;for(c=0;c<a.ia.length;++c)if(a.ia[c]===b){a.ia.splice(c,1);return}}}
function vc(a,b){if(b){b.r=a.r;b.tb&&b.tb.removeChild(b);b.tb=a;a.X.push(b)}}$.prototype.removeChild=function(a){for(var b=0;b<this.X.length;++b)if(this.X[b]===a){a.tb=null;this.X.splice(b,1);return}};$.prototype.Ka=function(a){if(this.V)for(var b=0;b<this.X.length;++b)this.X[b].Ka(a)};$.prototype.Hb=function(a,b){var c=false;if(this.V){var d,e=this.ia.length;for(d=0;d<e;){c=this.ia[d].gb(this,b)||c;var f=e;e=this.ia.length;f>=e&&++d}P(this);for(d=0;d<this.X.length;++d)c=this.X[d].Hb(a,b)||c}return c};
$.prototype.am=function(){var a=new D;vb(a,this.R);xb(a,this.f);if(this.ma.c!=1||this.ma.b!=1||this.ma.d!=1){var b=new D;yb(b,this.ma);a=E(a,b)}return a};function P(a){a.$=a.tb!=null?E(a.tb.$,a.am()):a.am()}$.prototype.vb=aa();function O(a){return new s(a.$.J,a.$.K,a.$.B)}$.prototype.Yc=k(0);$.prototype.sc=k(null);function ef(a){for(a=a;a;){if(!a.V)return false;a=a.tb}return true}$.prototype.so=aa();$.prototype.zi=aa();function Pe(){this.eb();this.g=new y;this.vm=this.zc=false;this.ga=new s(0,0,10);this.Kb=new s(0,1,0);this.kb=new D;this.Ec=new D;this.hd=n.PI/2.5;this.Gc=4/3;this.Gg=0.1;this.Fg=3E3;this.Oi=this.Zj=true;this.ki=false;tb(this.kb,this.hd,this.Gc,this.Gg,this.Fg)}Pe.prototype=new $;function ff(a){tb(a.kb,a.hd,a.Gc,a.Gg,a.Fg)}Pe.prototype.k=k("camera");function Qe(a,b){if(!n.D(a.Gc,b)){a.Oi=false;a.Gc=b;ff(a)}}function gf(a,b){if(!n.D(a.hd,b))if(!isNaN(b)){a.hd=b;ff(a)}}
function oc(a,b){if(b){a.ga=b.e();if(a.Zj){P(a);a.R=Ja(b.substract(O(a)))}}}Pe.prototype.Hb=function(a,b){a=$.prototype.Hb.call(this,a,b);this.ki||hf(this);return a};function hf(a){var b=O(a),c=a.ga.e();if(b.D(c))c.c+=1;ub(a.Ec,b,c,a.Kb)}l=Pe.prototype;l.Ka=function(a){if(a.fa===this){jf(a,this,2);$.prototype.Ka.call(this,a)}};l.vb=function(a){this.ki||hf(this);if(this.Gc==0||this.Oi){Oe(this,a.width,a.height);this.Gc==0&&Qe(this,0.75)}this.kb.Ba(a.kb);this.Ec.Ba(a.Qd)};
l.Vd=function(a){for(var b=0;b<this.ia.length;++b)this.ia[b].Vd(a)};l.If=function(a){for(var b=0;b<this.ia.length;++b)this.ia[b].If(a)};l.pd=function(a){for(var b=0;b<this.ia.length;++b)this.ia[b].pd(a)};l.He=function(a){for(var b=0;b<this.ia.length;++b)this.ia[b].He(a)};l.Fe=function(a){for(var b=false,c=0;c<this.ia.length;++c)if(this.ia[c].Fe(a))b=true;return b};l.Ge=function(a){for(var b=false,c=0;c<this.ia.length;++c)if(this.ia[c].Ge(a))b=true;return b};
l.h=function(a,b,c){var d=new Pe;cf(this,d,a,b,c);if(this.ga)d.ga=this.ga.e();if(this.Kb)d.Kb=this.Kb.e();if(this.kb)d.kb=this.kb.e();if(this.Ec)d.Ec=this.Ec.e();d.hd=this.hd;d.Gc=this.Gc;d.Gg=this.Gg;d.Fg=this.Fg;if(this.g)d.g=this.g.e();return d};function Oe(a,b,c){if(!(b==0||c==0))if(n.D(a.Gc,0)||a.Oi){Qe(a,b/c);a.Oi=true}};function kf(){this.eb();this.g=new y;this.zc=false;this.U=null;this.Oq=true;this.ab=null}kf.prototype=new $;l=kf.prototype;l.lb=function(){if(this.U)return this.U.g;return this.g};l.Wp=da("U");l.Fo=ca("U");l.k=k("mesh");l.Ka=function(a){var b=this.U;if(this.V&&b){for(var c=false,d=false,e=0;e<b.va.length;++e)if(dd(b.va[e].O))c=true;else d=true;c&&jf(a,this,lf);d&&jf(a,this,mf);$.prototype.Ka.call(this,a)}};
l.vb=function(a){a.ad(this.$);for(var b=0;b<this.U.va.length;++b){var c=this.U.va[b];if(dd(c.O)==(this.r.ec==lf)){Fd(a,c.O);Gd(a,c)}}};l.Yc=function(){if(this.U)return this.U.va.length;return 0};l.sc=function(a){if(this.U!=null)if(a>=0&&a<this.U.va.length)return this.U.va[a].O;return null};l.h=function(a,b,c){var d=new kf;cf(this,d,a,b,c);if(this.U)d.U=this.U.h();d.Sh=this.Sh;d.zc=this.zc;if(this.g)d.g=this.g.e();return d};function nf(){this.U=new kd;var a=[0,1,2,0,2,3],b=new id;this.U.sd(b);b.O.Qb=true;b.ea=a;b.m.push(this.Pa(-1,-1,-1,0,0,1,1,1));b.m.push(this.Pa(1,-1,-1,0,0,1,0,1));b.m.push(this.Pa(1,1,-1,0,0,1,0,0));b.m.push(this.Pa(-1,1,-1,0,0,1,1,0));b=new id;this.U.sd(b);b.O.Qb=true;b.ea=a;b.m.push(this.Pa(1,-1,-1,-1,0,0,1,1));b.m.push(this.Pa(1,-1,1,-1,0,0,0,1));b.m.push(this.Pa(1,1,1,-1,0,0,0,0));b.m.push(this.Pa(1,1,-1,-1,0,0,1,0));b=new id;this.U.sd(b);b.O.Qb=true;b.ea=a;b.m.push(this.Pa(-1,-1,1,1,0,0,1,1));
b.m.push(this.Pa(-1,-1,-1,1,0,0,0,1));b.m.push(this.Pa(-1,1,-1,1,0,0,0,0));b.m.push(this.Pa(-1,1,1,1,0,0,1,0));b=new id;this.U.sd(b);b.O.Qb=true;b.ea=a;b.m.push(this.Pa(1,-1,1,0,0,-1,1,1));b.m.push(this.Pa(-1,-1,1,0,0,-1,0,1));b.m.push(this.Pa(-1,1,1,0,0,-1,0,0));b.m.push(this.Pa(1,1,1,0,0,-1,1,0));b=new id;this.U.sd(b);b.O.Qb=true;b.ea=a;b.m.push(this.Pa(1,1,-1,0,-1,0,1,1));b.m.push(this.Pa(1,1,1,0,-1,0,0,1));b.m.push(this.Pa(-1,1,1,0,-1,0,0,0));b.m.push(this.Pa(-1,1,-1,0,-1,0,1,0));b=new id;this.U.sd(b);
b.O.Qb=true;b.ea=a;b.m.push(this.Pa(1,-1,1,0,1,0,1,1));b.m.push(this.Pa(1,-1,-1,0,1,0,0,1));b.m.push(this.Pa(-1,-1,-1,0,1,0,0,0));b.m.push(this.Pa(-1,-1,1,0,1,0,1,0))}nf.prototype=new kf;l=nf.prototype;l.k=k("sky");l.Pa=function(a,b,c,d,e,f,g,i){d=new Pb(true);d.f.c=a;d.f.b=b;d.f.d=c;d.Aa.c=g;d.Aa.b=i;return d};l.Ka=function(a){if(this.V){jf(a,this,1);$.prototype.Ka.call(this,a)}};
l.vb=function(a){var b=this.r.fa;if(b&&this.U){var c=new D(false);this.$.Ba(c);xb(c,O(b));b=(b.Gg+b.Fg)*0.5;var d=new D;yb(d,new s(b,b,b));a.ad(E(c,d));c=this.U;if(c!=null)for(b=0;b<c.va.length;++b){d=c.va[b];Fd(a,d.O);Gd(a,d)}}};l.h=function(a,b,c){var d=new nf;cf(this,d,a,b,c);if(this.U)d.U=this.U.e();d.Sh=this.Sh;d.zc=this.zc;if(this.g)d.g=this.g.e();return d};new kf;function of(){this.eb();this.g=new y;this.wg=this.Zh=10;this.uh=false;this.Cc=new id;this.Og=new Pb(true);this.Pg=new Pb(true);this.Qg=new Pb(true);this.Rg=new Pb(true);var a=this.Cc.ea;a.push(0);a.push(2);a.push(1);a.push(0);a.push(3);a.push(2);a=this.Cc.m;a.push(this.Og);a.push(this.Pg);a.push(this.Qg);a.push(this.Rg);this.Og.Aa.c=1;this.Og.Aa.b=1;this.Pg.Aa.c=1;this.Pg.Aa.b=0;this.Qg.Aa.c=0;this.Qg.Aa.b=0;this.Rg.Aa.c=0;this.Rg.Aa.b=1;for(var b=0;b<4;++b)z(this.g,a[b].f)}of.prototype=new $;l=of.prototype;
l.lb=da("g");l.k=k("billboard");l.Ka=function(a){if(this.V){jf(a,this,dd(this.Cc.O)?lf:mf);$.prototype.Ka.call(this,a)}};
l.vb=function(a){var b=this.r.fa;if(b)if(this.uh){e=O(this);var c=O(b),d=b.Kb;b=b.ga.substract(c);b.normalize();c=Ia(d,b);Ba(c)==0&&c.set(d.b,d.c,d.d);c.normalize();Ca(c,0.5*this.Zh);d=Ia(c,b);d.normalize();Ca(d,0.5*this.wg);this.uh&&d.set(0,-0.5*this.wg,0);Ca(b,1);wa(this.Og.f,e);this.Og.f.pa(c);this.Og.f.pa(d);wa(this.Pg.f,e);this.Pg.f.pa(c);ta(this.Pg.f,d);wa(this.Qg.f,e);ta(this.Qg.f,c);ta(this.Qg.f,d);wa(this.Rg.f,e);ta(this.Rg.f,c);this.Rg.f.pa(d);this.Cc.update(true);e=new D(true);a.ad(e);
Fd(a,this.Cc.O);Gd(a,this.Cc)}else{var e=O(this);a.Wj==null&&Yd(a);d=a.Wj;b=new D(true);yb(b,new s(this.Zh*0.5,this.wg*0.5,0));c=a.Qd.e();xb(c,new s(0,0,0));var f=new D(true);pb(c,f);xb(f,e);b=E(f,b);a.ad(b);Fd(a,this.Cc.O);Gd(a,d)}};l.Yc=k(1);l.sc=function(){return this.Cc.O};l.h=function(a,b,c){var d=new of;cf(this,d,a,b,c);if(this.g)d.g=this.g.e();d.Zh=this.Zh;d.wg=this.wg;d.uh=this.uh;d.Cc.O=this.Cc.O.e();return d};function pf(){this.eb();this.g=new y;this.ua=new id;this.Fa=new s(0,-0.03,0);this.Rb=new s(0,0,0);this.ak=this.qj=0;this.$a=[]}pf.prototype=new $;l=pf.prototype;l.Fa=null;l.kd=10;l.Rb=null;l.af=1E3;l.Bh=2E3;l.Ch=200;l.bg=10;l.wj=20;l.zj=4278190080;l.xj=4294967295;l.cg=5;l.dg=5;l.$f=7;l.Dh=7;l.mh=false;l.nh=500;l.gj=0;l.Tf=false;l.kj=500;l.zd=null;l.ng=false;l.Rj=20;l.Sj=20;l.Gm=false;
l.h=function(a,b,c){var d=new pf;cf(this,d,a,b,c);if(this.g)d.g=this.g.e();d.Fa=this.Fa.e();d.kd=this.kd;d.Rb=this.Rb.e();d.af=this.af;d.Bh=this.Bh;d.Ch=this.Ch;d.bg=this.bg;d.wj=this.wj;d.zj=this.zj;d.xj=this.xj;d.cg=this.cg;d.dg=this.dg;d.$f=this.$f;d.Dh=this.Dh;d.mh=true;d.nh=this.nh;d.gj=this.gj;d.Tf=this.Tf;d.kj=this.kj;d.zd=this.zd;d.ng=this.ng;d.Rj=this.Rj;d.Sj=this.Sj;d.ua.O=this.ua.O.e();return d};l.lb=da("g");l.k=k("particlesystem");
l.Ka=function(a){if(this.V){jf(a,this,dd(this.ua.O)?lf:mf);$.prototype.Ka.call(this,a)}};l.Yc=k(1);l.sc=function(){return this.ua.O};
l.Hb=function(a,b){var c=false;if(this.V)if(this.qj==0){this.qj=b;c=false}else{c=b-this.qj;this.qj=b;if(this.V){var d=false;d=this.wj-this.bg;var e=1E3/(d?this.bg+Math.random()*d:this.bg);d=this.$a.length;this.ak+=c;if(this.ak<=e)d=false;else{e=this.ak/e+0.5;this.ak=0;if(d+e>this.Ch)e-=d+e-this.Ch;if(e<=0)d=false;else{var f=this.Fa.e();jb(this.$,f);for(var g=ib(this.$).getLength(),i=xa(this.Rb),j=d;j<d+e;++j){var m=new qf;m.$c=new s(0,0,0);if(!i){if(this.Rb.c!=0)m.$c.c=Math.random()*this.Rb.c-this.Rb.c*
0.5;if(this.Rb.b!=0)m.$c.b=Math.random()*this.Rb.b-this.Rb.b*0.5;if(this.Rb.d!=0)m.$c.d=Math.random()*this.Rb.d-this.Rb.d*0.5}m.startTime=b;m.Gi=f.e();if(this.kd){var o=f.e(),p=Math.random()*this.kd*2-this.kd;p*=n.yd;var h=Math.cos(p);p=Math.sin(p);var w=o.c,t=o.b;o.c=w*h-t*p;o.b=w*p+t*h;p=Math.random()*this.kd*2-this.kd;p*=n.yd;h=Math.cos(p);p=Math.sin(p);w=o.b;t=o.d;o.b=w*h-t*p;o.d=w*p+t*h;Ka(o,Math.random()*this.kd*2-this.kd);m.Gi=o}m.pi=this.Bh-this.af==0?b+this.af:b+this.af+Math.random()*(this.Bh-
this.af);m.color=n.bo(this.zj,this.xj,Math.random()*100/100);m.Io=m.color;m.Jo=m.Gi.e();if(this.cg==this.$f&&this.dg==this.Dh){m.Ci=this.cg;m.Di=this.dg}else{o=Math.random()*100/100;h=1-o;m.Ci=this.cg*o+this.$f*h;m.Di=this.dg*o+this.Dh*h}m.Ci*=g;m.Di*=g;m.pm=m.Ci;m.qm=m.Di;mb(this.$,m.$c);this.$a.unshift(m)}d=true}}if(!this.mh&&!this.Tf&&!this.ng)e=false;else{e=0;f=null;if(this.mh)for(e=0;e<this.$a.length;++e){f=this.$a[e];if(f.pi-b<this.nh)f.color=n.bo(f.Io,this.gj,(f.pi-b)/this.nh)}if(this.Tf){g=
Fa(this.zd,ib(this.$));for(e=0;e<this.$a.length;++e){f=this.$a[e];i=(b-f.startTime)/this.kj;i=n.qc(i,0,1);i=1-i;f.Gi=La(f.Jo,g,i)}}if(this.ng){g=ib(this.$).c;for(e=0;e<this.$a.length;++e){f=this.$a[e];i=(b-f.startTime)/(f.pi-f.startTime);f.pm=f.Ci+this.Rj*i*g;f.qm=f.Di+this.Sj*i*g}}e=true}d=e||d;e=new s(this.$.J,this.$.K,this.$.B);this.ua.g.reset(e.c,e.b,e.d);if(this.$a.length!=0)d=true;for(e=0;e<this.$a.length;){f=this.$a[e];if(b>f.pi)this.$a.splice(e,1);else{f.$c.pa(x(f.Gi,c));z(this.ua.g,f.$c);
++e}}c=this.$f*0.5;this.ua.g.M.c+=c;this.ua.g.M.b+=c;this.ua.g.M.d+=c;this.ua.g.C.c-=c;this.ua.g.C.b-=c;this.ua.g.C.d-=c;c=new D(false);pb(this.$,c);zb(c,this.ua.g);c=d}else c=false}return $.prototype.Hb.call(this,a,b)||c};l.Ka=function(a){if(this.V){if(this.$a.length!=0)jf(a,this,dd(this.ua.O)?lf:mf);$.prototype.Ka.call(this,a)}};
l.vb=function(a){if(this.r.fa)if(this.$a.length!=0){var b=a.he;if(this.Gm)a.he=false;if(this.$a.length*4>this.ua.m.length||this.$a.length*6>this.ua.ea.length){for(var c=this.ua.m.length,d=this.ua.m;this.ua.m.length<this.$a.length*4;){var e=null;e=new Pb(true);e.Aa.set(0,0);d.push(e);e=new Pb(true);e.Aa.set(0,1);d.push(e);e=new Pb(true);e.Aa.set(1,1);d.push(e);e=new Pb(true);e.Aa.set(1,0);d.push(e)}c=c;d=this.$a.length*6;e=this.ua.ea;for(var f=this.ua.ea.length;f<d;f+=6){e.push(0+c);e.push(2+c);e.push(1+
c);e.push(0+c);e.push(3+c);e.push(2+c);c+=4}}c=a.Qd;d=new s(-c.s,-c.t,-c.n);e=0;var g=null;for(f=0;f<this.$a.length;++f){var i=this.$a[f];g=0.5*i.pm;var j=new s(c.p*g,c.v*g,c.w*g);g=-0.5*i.qm;var m=new s(c.u*g,c.q*g,c.A*g);g=this.ua.m[0+e];g.f=i.$c.add(j).add(m);g.oa=i.color;g.j=d;g=this.ua.m[1+e];g.f=i.$c.add(j).substract(m);g.oa=i.color;g.j=d;g=this.ua.m[2+e];g.f=i.$c.substract(j).substract(m);g.oa=i.color;g.j=d;g=this.ua.m[3+e];g.f=i.$c.substract(j).add(m);g.oa=i.color;g.j=d;e+=4}c=new D(true);
a.ad(c);this.ua.update(false,true);Fd(a,this.ua.O);Gd(a,this.ua,this.$a.length*2*3);if(this.Gm)a.he=b}};function qf(){this.Gi=this.$c=null;this.Io=this.color=this.pi=this.startTime=0;this.Jo=null;this.Di=this.Ci=this.qm=this.pm=0};function rf(){this.Nh=new s(0,0,0);this.oa=new ra;this.Ea=100;this.$g=0.01;this.Fa=null;this.sh=false}l=rf.prototype;l.e=function(){var a=new rf;a.Nh=this.Nh.e();a.oa=this.oa.e();a.Ea=this.Ea;a.$g=this.$g;a.sh=this.sh;a.Fa=this.Fa!=null?this.Fa.e():null;return a};l.Nh=null;l.oa=null;l.$g=null;l.Ea=null;l.Fa=null;l.sh=false;function sf(){this.Ya=new rf;this.g=new y;this.eb()}sf.prototype=new $;l=sf.prototype;l.k=k("light");l.Ya=null;
l.h=function(a,b,c){var d=new sf;cf(this,d,a,b,c);d.Ya=this.Ya.e();d.g=this.g.e();return d};l.Ka=function(a){this.V&&jf(a,this,tf);$.prototype.Ka.call(this,a);this.Ya.Nh=O(this)};l.lb=da("g");l.vb=function(a){this.Ya.sh?Rd(a,this.Ya):Qd(a,this.Ya)};function uf(){this.eb();this.g=new y;this.Dg=0;this.Ve=false;this.Bb=[]}uf.prototype=new $;l=uf.prototype;l.Dg=0;l.Ve=false;l.Bb=[];l.lb=da("g");l.k=k("path");l.h=function(a,b,c){var d=new uf;cf(this,d,a,b,c);if(this.g)d.g=this.g.e();d.Dg=this.Dg;d.Ve=this.Ve;d.Bb=[];for(a=0;a<this.Bb.length;++a)d.Bb.push(this.Bb[a].e());return d};function vf(a,b){if(b<0||b>=a.Bb.length)return new s(0,0,0);a.$||P(a);b=a.Bb[b];b=b.e();mb(a.$,b);return b}
function wf(a,b,c){if(a.Ve)return b<0?c+b:b>=c?b-c:b;return b<0?0:b>=c?c-1:b}
function xf(a,b,c){var d=a.Bb.length;if(a.Ve)b*=d;else{b=n.qc(b,0,1);b*=d-1}var e=new s;if(d==0)return e;if(d==1)return e;b=b;var f=n.Pp(b),g=Math.floor(b)%d,i=a.Bb[wf(a,g-1,d)];e=a.Bb[wf(a,g+0,d)];b=a.Bb[wf(a,g+1,d)];var j=a.Bb[wf(a,g+2,d)],m=2*f*f*f-3*f*f+1;d=-2*f*f*f+3*f*f;g=f*f*f-2*f*f+f;f=f*f*f-f*f;i=b.substract(i);Ca(i,a.Dg);j=j.substract(e);Ca(j,a.Dg);e=x(e,m);e.pa(x(b,d));e.pa(x(i,g));e.pa(x(j,f));if(!c){a.$||P(a);mb(a.$,e)}return e};function yf(){this.eb();this.g=new y;this.Xm=this.Ah=this.ne=0;this.Yo=false;this.Eg=this.Yk=this.Tm=0;this.jg=false;this.Kc=null;this.Bp=false;this.Ym=this.Jl=0}yf.prototype=new $;yf.prototype.lb=da("g");yf.prototype.k=k("sound");yf.prototype.Ka=function(a){if(this.V){jf(a,this,mf);$.prototype.Ka.call(this,a)}};
function zf(a,b,c,d){var e=a.Eg;if(d)if(b)if(d=d.fa){var f=O(d);d.ga.substract(f);c=f.ub(c);if(!(c<a.ne)){c-=a.ne;d=a.Ah-a.ne;if(d>0){if(c>d)c=d;d=10;if(c!=0)d=a.ne/c;e*=d;if(e>10)e=10}else e=10}if(e>1)e=1;if(b)try{b.src.$b.volume=e}catch(g){}}}function Af(a,b){if(!a.Kc&&a.Jb){a.Bp=false;a.Kc=Jc(n.Sd,a.Jb,b);if(!a.jg){b=O(a);zf(a,a.Kc,b,a.r)}}}
yf.prototype.Hb=function(a,b){try{var c=O(this);this.Kc&&!this.jg&&zf(this,this.Kc,c,a);switch(this.Xm){case 0:break;case 1:if(this.Kc&&fe(this.Kc)){this.Kc=null;var d=this.Tm-this.Yk;if(d<2)d=2;this.Jl=b+Math.random()*d+this.Yk}else if(!this.Kc&&(!this.Jl||b>this.Jl))this.Jb&&Af(this,false);break;case 2:this.Kc||this.Jb&&Af(this,true);break;case 3:if(!this.Ym)if(this.Jb){Af(this,false);++this.Ym}break}}catch(e){}return false};
yf.prototype.h=function(a,b,c){var d=new yf;cf(this,d,a,b,c);if(this.g)d.g=this.g.e();return d};function Bf(a){this.eb();this.Qa=a;this.g=new y;this.df=this.cf=100;this.qf=this.rf=50;this.ff=this.ef=0.5;this.tf=1/6;this.sf=1/6;this.vg=this.Jd=true;this.Hc=0;this.we=this.Ia=null;this.mg=true;this.Se=this.zk=false;this.zg=1;this.gd=this.cb="";this.uf=0;this.Ih=this.rh=this.Jh=this.lj=this.il=this.Xg=false;this.bi=this.ci=null;this.Cm=this.Dm="";this.Vi=0}Bf.prototype=new $;l=Bf.prototype;l.gd="";l.uf=0;l.zg=1;l.Pn=k(false);l.lb=da("g");l.k=k("2doverlay");
l.nm=function(a){this.cb=a;this.Se=this.cb!=null&&this.cb!="";if(this.gd=="")this.gd="12;default;arial;normal;bold;true"};l.Ka=function(a){if(this.V){jf(a,this,Le);$.prototype.Ka.call(this,a)}};
l.vb=function(a){var b=Cf(this,true,a),c=false;if(this.Qa!=null&&this.Xg){c=this.Qa.Eb;var d=this.Qa.Fb;c=b.x<=c&&b.y<=d&&b.x+b.Ta>=c&&b.y+b.Ra>=d}if(c&&this.Jh)Md(a,b.x,b.y,b.Ta,b.Ra,this.rh,true);else this.vg&&Md(a,b.x,b.y,b.Ta,b.Ra,this.Hc,true);d=this.Ia;if(c&&this.we&&this.Ih)d=this.we;if(d!=null&&d.kc){var e=d.Nb(),f=d.Mb();if(this.mg){if(e&&f&&b.Ra&&b.Ta){var g=b.Ta;e=g*(f/e);if(e>b.Ra){f=b.Ra/e;g*=f;e*=f}b.Ta=g;b.Ra=e;Nd(a,b.x,b.y,b.Ta,b.Ra,d,true,null,null,null,!this.zk)}}else Nd(a,b.x,b.y,
b.Ta,b.Ra,d,true,null,null,null,!this.zk)}if(this.Se&&this.gd&&this.cb!=""){a:{e=b.Ta;(d=this.ci==null||false)||(d=this.Dm!=this.cb||this.Cm!=this.gd);if(d){Df(this,a);d=document.createElement("canvas");if(d!=null){d.width=1;d.height=1;g=null;try{g=d.getContext("2d");if(g==null)break a}catch(i){break a}var j=this.gd;f=12;var m="Arial",o=false,p=false;if(j.indexOf("#fnt_")==0)j=j.substr(5);j=j.split(";");for(var h=0;h<j.length;++h){var w=j[h],t=w.toLowerCase();if(h==0)f=parseInt(t);else if(h==2)m=
w;else if(h==3){if(t.indexOf("italic")!=-1)o=true}else if(h==4)if(t.indexOf("bold")!=-1)p=true}j="";if(o)j+="italic ";if(p)j+="bold ";this.Vi=f*96/72;j+=this.Vi+"px ";j+=m;f=j;g.font=f;if(this.zg==2){m=[];o=this.cb;p=g;w=h=j="";t=o.length;for(var L=0,A=e-6,u="c",H=0;H<t;++H){u=o.charAt(H);var M=false;if(u=="\r"){M=true;u=" ";if(o.charAt(H+1)=="\n"){o=o.substr(0,H).concat(o.substr(H+2));--t}}else if(u=="\n"){M=true;u=" "}if(u==" "||u==0||H==t-1){if(h.length){var J=p.measureText(w).width,X=p.measureText(h).width;
if(L+X+J>A){L=X;m.push(j);j=h}else{j=j.concat(w);j=j.concat(h);L+=J+X}w=h=""}w=w.concat(u);if(M){j=j.concat(w);j=j.concat(h);m.push(j);w=h=j="";L=0}}else h=h.concat(u)}j=j.concat(w);j=j.concat(h);m.push(j);o=this.Vi*1.2;j=m.length;p=0;d.width=e;d.height=Math.max(1,j*o);g.fillStyle="rgba(0, 0, 0, 1)";g.fillRect(0,0,d.width,d.height);g.fillStyle="rgba(255, 255, 255, 1)";g.textBaseline="top";g.font=f;for(e=0;e<m.length;++e){g.fillText(m[e],0,p);p+=o}}else{e=g.measureText(this.cb);d.width=e.width;d.height=
this.Vi*1.2;g.fillStyle="rgba(0, 0, 0, 1)";g.fillRect(0,0,d.width,d.height);g.fillStyle="rgba(255, 255, 255, 1)";g.textBaseline="top";g.font=f;g.fillText(this.cb,0,0)}this.bi=this.ci=d=ad(a,d,true);this.Dm=this.cb;this.Cm=this.gd}}}d=this.ci;g=this.uf;if(c){if(this.bi)d=this.bi;g=this.lj}if(d){c=d.hg;e=d.gg;this.zg==1?Od(a,b.x+(b.Ta-c)/2,b.y+(b.Ra-e)/2,c,e,d,g):Od(a,b.x,b.y,c,e,d,g)}}else Df(this,a)};function Df(a,b){b.deleteTexture(a.ci);b.deleteTexture(a.bi);a.ci=null;a.bi=null}
Bf.prototype.Yc=k(0);function Cf(a,b,c){b=c.Nb();c=c.Mb();var d={};if(a.Jd){d.x=a.cf;d.y=a.df;d.Ta=a.rf;d.Ra=a.qf}else{d.x=a.ef*b;d.y=a.ff*c;d.Ta=a.tf*b;d.Ra=a.sf*c}return d}
Bf.prototype.h=function(a,b,c){var d=new Bf;cf(this,d,a,b,c);d.cf=this.cf;d.df=this.df;d.rf=this.rf;d.qf=this.qf;d.ef=this.ef;d.ff=this.ff;d.tf=this.tf;d.sf=this.sf;d.Jd=this.Jd;d.vg=this.vg;d.Hc=this.Hc;d.Ia=this.Ia;d.we=this.we;d.mg=this.mg;d.Se=this.Se;d.zg=this.zg;d.cb=this.cb;d.gd=this.gd;d.uf=this.uf;d.Xg=this.Xg;d.il=this.il;d.lj=this.lj;d.Jh=this.Jh;d.rh=this.rh;d.Ih=this.Ih;return d};function Ef(a,b){Bf.call(this,a);this.Qf=null;this.gc=this.fc=0;this.Cj=false;this.Jc=this.mj=this.hn=this.gn=this.ul=this.vl=0;Yb(this,new Ff(a,b,this))}Ef.prototype=new Bf;Ef.prototype.k=k("mobile2dinput");Ef.prototype.Pn=k(true);
Ef.prototype.vb=function(a){var b=Cf(this,true,a),c=false;if(this.Qa!=null){var d=this.Qa.Eb,e=this.Qa.Fb;this.Cj=b.x<=d&&b.y<=e&&b.x+b.Ta>=d&&b.y+b.Ra>=e;if(this.Xg)c=this.Cj}if(c&&this.Jh)Md(a,b.x,b.y,b.Ta,b.Ra,this.rh,true);else this.vg&&Md(a,b.x,b.y,b.Ta,b.Ra,this.Hc,true);d=this.Ia;if(c&&this.we&&this.Ih)d=this.we;e=c=0;if(d!=null&&d.kc){var f=d.Nb(),g=d.Mb();if(this.mg){if(f&&g&&b.Ra&&b.Ta){c=b.Ta;e=c*(g/f);if(e>b.Ra){f=b.Ra/e;c*=f;e*=f}b.Ta=c;b.Ra=e;Nd(a,b.x,b.y,b.Ta,b.Ra,d,true);c=b.Ta;e=
b.Ra}}else{Nd(a,b.x,b.y,b.Ta,b.Ra,d,true);c=b.Ta;e=b.Ra}}this.vl=c;this.ul=e;this.gn=b.x;this.hn=b.y;if(this.mj==0&&this.Qf!=null&&this.Qf.kc&&d!=null&&d.kc){f=this.fc*Math.sqrt(1-0.5*this.gc*this.gc);g=this.gc*Math.sqrt(1-0.5*this.fc*this.fc);f=(f+1)*0.5;g=(g+1)*0.5;var i=1/(d.Nb()/Number(this.Qf.Nb()));d=1/(d.Mb()/Number(this.Qf.Mb()));i=i*c;d=d*e;Nd(a,b.x+f*c-i*0.5,b.y+g*e-d*0.5,i,d,this.Qf,true)}};function Gf(){this.eb();this.g=new y;this.zc=false;this.ab=this.Ha=null;this.vh=0;this.zb=[];this.yb=0.25;this.Pe=q();this.qb=this.Sa=this.Jk=0;this.Wb=false;this.yc=0;this.ed=250;this.be=true;this.Yi=false;this.Xf=[];this.Pi=0;this.Dn=false;this.Zk=20;this.xb=[]}Gf.prototype=new $;n.ln=function(){this.wa=null;this.Fj=this.Wf=-1};Gf.prototype.lb=da("g");Gf.prototype.ac=function(a){if(!this.Ha)return false;a=rd(this.Ha,a);if(!a)return false;Hf(this,a.ud,a.N);this.yb=a.Ac;return true};
function ic(a,b,c){if(!a.Ha)return false;var d=a.Ha;if(!d)return false;var e=rd(d,b);if(e){Hf(a,e.ud,e.N);e.Ac!=0&&If(a,e.Ac);a.Wb=c}else if(b){b=b.toLowerCase();if(b=="all"){Hf(a,0,Math.floor(d.dd));d.Ek!=0&&If(a,d.Ek);a.Wb=c}else if(b=="none"){Hf(a,0,0);a.Wb=c}}return true}l=Gf.prototype;l.Fo=function(a){if(a){this.Ha=a;this.g=a.lb();Hf(this,0,Math.floor(a.dd))}};l.k=k("animatedmesh");
l.Ka=function(a){if(this.V&&this.Ha){var b=this.zb,c=false,d=false;if(b!=null)for(var e=0;e<b.length;++e)if(dd(b[e]))c=true;else d=true;c&&jf(a,this,lf);d&&jf(a,this,mf);$.prototype.Ka.call(this,a)}};l.Yc=function(){if(this.zb!=null)return this.zb.length;if(this.U)return this.U.va.length;return 0};l.sc=function(a){if(this.zb)if(a>=0&&a<this.zb.length)return this.zb[a];else if(this.Ha&&this.Ha.td&&a>=0&&this.zb.length==a&&a<256){a=new cd;this.zb.push(a);return a}return null};
l.h=function(a,b,c){var d=new Gf;cf(this,d,a,b,c);d.Ha=this.Ha;if(this.g)d.g=this.g.e();d.zc=this.zc;d.ab=this.ab;d.vh=this.vh;d.zb=[];for(a=0;a<this.zb.length;++a)d.zb.push(this.zb[a].e());d.yb=this.yb;d.Pe=this.Pe;d.Jk=this.Jk;d.Sa=this.Sa;d.qb=this.qb;d.Wb=this.Wb;d.yc=this.yc;d.Zk=this.Zk;d.ed=this.ed;d.be=this.be;d.Yi=false;d.Xf=[];for(a=d.Pi=0;a<this.xb.length;++a){b=new n.ln;b.wa=this.xb[a].wa;b.Wf=this.xb[a].Wf;b.Fj=this.xb[a].Fj;d.xb.push(b)}return d};function If(a,b){a.yb=b}
function Jf(a,b){a.Wb=b}function Hf(a,b,c){if(!a.Ha)return false;var d=Math.floor(a.Ha.dd)-1,e=a.Sa,f=a.qb;if(c<b){a.Sa=n.qc(c,0,d);a.qb=n.qc(b,a.Sa,d)}else{a.Sa=n.qc(b,0,d);a.qb=n.qc(c,a.Sa,d)}if(e!=a.Sa||f!=a.qb){b=a.yc;a.yc=n.qc(a.Sa,a.Sa,a.qb);a.Pe=q()-Math.floor((a.yc-a.Sa)/a.yb);a.be&&a.ed&&Kf(a,b)}return true}
function Lf(a){var b=a.Ha;if(b){var c=false;if((c=Mf(a,a.yc))||b.rm){a:{for(c=0;c<a.zb.length;++c)if(a.zb[c].Bc){c=true;break a}c=false}if(b.Ad){b.rm=false;pd(b,null,null);var d=0,e=0,f;for(d=0;d<b.ra.length;++d){var g=b.ra[d];for(e=0;e<g.Yg.length;++e){f=b.Za[g.Yg[e]];f.ze=g.Te.e()}}for(d=0;d<b.Za.length;++d){f=b.ck[d];for(e=0;e<f.length;++e)f[e]=false}for(d=0;d<b.kf.length;++d)qd(b,b.kf[d],null,c)}b.ob.C.set(0,0,0);b.ob.M.set(0,0,0);if(b.Za.length){c=b.Za[0];jd(c);b.ob.C=c.g.C.e();b.ob.M=c.g.M.e();
for(d=1;d<b.Za.length;++d){c=b.Za[d];jd(c);if(c.ze==null){z(b.ob,c.g.C);z(b.ob,c.g.M)}else{e=c.g.e();zb(c.ze,e);z(b.ob,e.C);z(b.ob,e.M)}}}a.g=b.lb().e();for(c=0;c<b.Za.length;++c)b.Za[c].update(true)}a.Jk=a.yc}}
Gf.prototype.Hb=function(a,b){var c=q();if(this.vh==0||c-this.vh>this.Zk){var d;d=0;if(this.Sa==this.qb)d=this.Sa;else if(this.yb==0)d=this.Sa;else{d=0;if(this.Wb){var e=false;d=Math.abs(Math.floor((this.qb-this.Sa)/this.yb));if(this.yb>0){d=this.Sa+(b-this.Pe)%d*this.yb;e=d<this.yc}else{d=this.qb-(b-this.Pe)%d*-this.yb;e=d>this.yc}e&&this.be&&Kf(this,this.yc)}else if(this.yb>0){d=(b-this.Pe)*this.yb;d=this.Sa+d;if(d>this.qb)d=this.qb}else{d=(b-this.Pe)*-this.yb;d=this.qb-d;if(d<this.Sa)d=this.Sa}d=
d}this.yc=d;this.vh=c}a=$.prototype.Hb.call(this,a,b);this.xb.length!=0&&Nf(this);return a};Gf.prototype.vb=function(a){var b=this.r.Ui;if(b)if(!Ob(b,bf(this)))return;if(b=this.Ha){a.ad(this.$);!b.Ad||Lf(this);this.Dn=true;for(var c=0;c<b.Za.length;++c){var d=b.Za[c];if(c<this.zb.length)d.O=this.zb[c];if(dd(d.O)==(this.r.ec==lf)){d.ze!=null&&a.ad(E(this.$,d.ze));Fd(a,d.O);Gd(a,d);d.ze!=null&&a.ad(this.$)}}}};
function Of(a,b){b=b.length;if(b>a.Xf.length)for(;a.Xf.length<b;){var c={};c.vc=new s(0,0,0);c.Pb=new s(1,1,1);c.wc=new Ab;a.Xf.push(c)}}function Kf(a,b){if(a.Dn){var c=a.Ha;if(c){Mf(a,b);a.Pi=q();a.Yi=true;Of(a,c.ra);for(b=0;b<c.ra.length;++b){var d=a.Xf[b],e=c.ra[b];d.vc=e.vc.e();d.Pb=e.Pb.e();d.wc=e.wc.e()}}}}
function Mf(a,b){var c=a.Ha;if(c){var d=1;if(a.Yi){var e=q();if(e-a.Pi>a.ed)a.Yi=false;else{d=(e-a.Pi)/a.ed;Of(a,c.ra);for(e=0;e<c.ra.length;++e){var f=a.Xf[e],g=c.ra[e];g.vc=f.vc.e();g.Pb=f.Pb.e();g.wc=f.wc.e()}}}a=d;if(!c.Ad||n.D(c.Pk,b)&&a==1)c=false;else{c.Pk=b;if(a<0)c=false;else{if(n.D(a,1))for(d=0;d<c.ra.length;++d){e=c.ra[d];f=e.vc.e();g=e.Pb.e();var i=e.wc.e();od(c,b,e,f,e.vo,g,e.Do,i,e.Co);e.vc=f.e();e.Pb=g.e();e.wc=i.e()}else for(d=0;d<c.ra.length;++d){e=c.ra[d];var j=e.vc.e(),m=e.Pb.e(),
o=e.wc.e();f=j.e();g=m.e();i=o.e();od(c,b,e,f,e.vo,g,e.Do,i,e.Co);e.vc=La(j,f,a);e.Pb=La(m,g,a);Cb(e.wc,o,i,a)}for(b=0;b<c.ra.length;++b){a=c.ra[b];if(a.gf.length||a.ue.length||a.lf.length){if(!a.wc)a.wc=new Ab;if(!a.vc)a.vc=new s;a.Zf=Db(a.wc);d=a.Zf;e=a.vc;d.p+=e.c*d.G;d.u+=e.b*d.G;d.s+=e.d*d.G;d.v+=e.c*d.H;d.q+=e.b*d.H;d.t+=e.d*d.H;d.w+=e.c*d.I;d.A+=e.b*d.I;d.n+=e.d*d.I;d.J+=e.c*d.L;d.K+=e.b*d.L;d.B+=e.d*d.L;d.Oa=false;a.Km=false;if(a.ue.length&&a.Pb&&!(n.D(a.Pb.c,1)&&n.D(a.Pb.b,1)&&n.D(a.Pb.d,
1))){e=a.Pb;d.p*=e.c;d.u*=e.c;d.s*=e.c;d.G*=e.c;d.v*=e.b;d.q*=e.b;d.t*=e.b;d.H*=e.b;d.w*=e.d;d.A*=e.d;d.n*=e.d;d.I*=e.d}}else a.Zf=a.zh.e()}c=c.rm=true}}return c}}Gf.prototype.so=function(){if(this.r!=null)for(var a=0;a<this.xb.length;){var b=0,c=this.xb[a].Fj;if(c!=-1)b=Pf(this.r,this,c);if(b&&b.k()=="dummytrans"){this.xb[a].wa=b;++a}else this.xb.splice(a,1)}};
function Nf(a){var b=a.Ha;if(b&&b.Ad){Mf(a,a.yc);pd(b,null,null);b=b.ra;for(var c=0;c<a.xb.length;++c){var d=a.xb[c];if(d.Wf>=0&&d.Wf<b.length&&d.wa!=null){var e=b[d.Wf];if(e)d.wa.lg=e.Te.e()}}}}Gf.prototype.zi=function(a,b){for(var c=0;c<this.xb.length;++c)if(this.xb[c].wa==a)this.xb[c].wa=b&&b.k()=="dummytrans"?b:null};function Qf(){this.g=new y;this.ap=this.Hp=0}Qf.prototype=new $;function Rf(){this.eb();this.g=new y;this.lg=new D}Rf.prototype=new $;Rf.prototype.h=function(a,b,c){var d=new Rf;cf(this,d,a,b,c);if(this.g)d.g=this.g.e();if(this.lg)d.lg=this.lg;return d};Rf.prototype.am=da("lg");Rf.prototype.k=k("dummytrans");function Sf(){this.eb();this.g=new y}Sf.prototype=new $;Sf.prototype.k=k("terrain");function Tf(){this.Fm=0;this.dk=new Qa(1,1);this.Fn=this.Gn=0.5;this.mi=n.Df(190,255,255,255);this.Bm=true;this.zn=n.Df(190,0,100,0);this.Gk=false;this.Tk=0;this.Pm=new D;this.Zi=false;this.O=new cd;this.O.Bc=false;this.O.i=-1;this.O.ce=false;this.Jm=this.hf=null}Tf.prototype=new kf;l=Tf.prototype;l.k=k("water");
l.Ka=function(a){if(this.V){jf(a,this,lf);$.prototype.Ka.call(this,a);var b=a.fa,c=q(),d=false;if(this.Tk){d=100;if(b){var e=O(b),f=Sa(this.lb()).getLength();e=O(this).ub(e);if(e>f)d*=e/f;if(d>1E3)d=1E3;b.Ec.D(this.Pm)||(d=10);this.Pm=b.Ec.e()}d=this.Tk+d<c}else d=true;if(d){this.Tk=c;jf(a,this,Je)}if(this.Gk)jf(a,this,Le);else if(b){b=O(b);c=O(this);if(b.b<c.b){c=bf(this);b.c>=c.C.c&&b.c<=c.M.c&&b.d>=c.C.d&&b.d<=c.M.d&&jf(a,this,Le)}}}};l.Hb=function(a,b){kf.prototype.Hb.call(this,a,b);return true};
l.vb=function(a){var b=this.r.fa;if(b&&this.U){if((b=this.r.Ui)&&this.r.ec!=Le)if(!Ob(b,bf(this)))return;if(this.r.ec==lf){if(!(this.O.i==-1||this.hf==null))if(!this.Zi){a.ad(this.$);if(b=this.U){this.g=b.g;this.O.bb=this.hf;if(b&&b.va&&b.va.length>0)this.O.pc=b.va[0].O.bb;for(var c=0;c<b.va.length;++c){var d=b.va[c];if(d){Fd(a,this.O);Gd(a,d)}}}}}else if(this.r.ec==Je){if(Uf(this,a)){c=a.Wi;a.Vf=true;if(Xd(a,this.hf,true,true,this.r.ah)){this.Zi=true;b=this.r.fa;d=b.kb;var e=b.Ec,f=b.Kb,g=b.ga,i=
b.f,j=b.Zj,m=b.ki;b.ki=true;b.Zj=false;var o=O(this).b,p=g.e(),h=i.e();h.b=-i.b+2*o;b.f=h;p.b=-g.b+2*o;b.ga=p;var w=new D;ub(w,h,p,new s(0,1,0));b.Ec=w;p=new Wa;o=new s(0,o,0);h=new s(0,1,0);p.j=h.e();ab(p,o);o=p.e();p=x(o.j,-o.Xa);mb(w,p);h=o.j.e();h.normalize();var t=ib(w);if(!n.D(t.c,0)&&!n.D(t.b,0)&&!n.D(t.d,0)&&(!n.D(t.c,1)||!n.D(t.b,1)||!n.D(t.d,1))){h.c*=1/(t.c*t.c);h.b*=1/(t.b*t.b);h.d*=1/(t.d*t.d)}jb(w,h);h.normalize();o.j=h.e();ab(o,p);w=new D;p=w=d.e();h=n.Ho(o.j.c+p.w)/p.p;t=n.Ho(o.j.b+
p.A)/p.q;h=-2/(h*o.j.c+t*o.j.b+-1*o.j.d+(1+p.n)/p.B*o.Xa);p.s=o.j.c*h;p.t=o.j.b*h;p.n=o.j.d*h+1;p.B=o.Xa*h;this.Jm=w;Ke(this.r,a,this);b.ki=m;b.kb=d;b.Ec=e;b.ga=g;b.f=i;b.Kb=f;b.Zj=j;a.Vf=false;Xd(a,c,false,true);this.Zi=false}a.Vf=false}}else if(this.r.ec==Le&&!this.Zi){this.Bm&&!this.Gk&&Md(a,0,0,a.Nb(),a.Mb(),this.zn,true);this.Gk&&Nd(a,10,10,250,200,this.hf,false)}}};l.h=function(a,b,c){var d=new Tf;cf(this,d,a,b,c);if(this.U)d.U=this.U.e();d.Sh=this.Sh;d.zc=this.zc;if(this.g)d.g=this.g.e();return d};
function Uf(a,b){if(a.kp)return a.hf!=null;a.kp=true;Vf(a,b);if(!a.hf)return false;var c=b.Z;a.O.i=Ud(b,a.Dq,a.Vp,true,c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,function(){var d=b.Z,e=Vd(b,a.O.i);if(e){var f=d.getUniformLocation(e,"mWaterColor");d.uniform4f(f,n.Zc(a.mi)/255,n.Xc(a.mi)/255,n.Wc(a.mi)/255,n.Td(a.mi)/255);f=q()/1E3%1E3;var g=d.getUniformLocation(e,"mWaveMovement");d.uniform2f(g,a.dk.c*f,a.dk.b*f);f=d.getUniformLocation(e,"mWaveLength");d.uniform1f(f,a.Gn*100);e=d.getUniformLocation(e,"mWaveHeight");
d.uniform1f(e,a.Fn)}});return true}Tf.prototype.Dq="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\tuniform float mWaveLength;\t\t\t\t\t\t\t\t\t\tuniform vec2 mWaveMovement;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec2 WavesTexCoord;\t\t\t\t\t\t\t\t\t\tvarying vec3 TexCoord;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec4 pos = worldviewproj * vPosition;\t\t\t\t\t        gl_Position = pos;\t\t\t\t\t\t\t\t\t\t\t\tWavesTexCoord = (vPosition.xz / mWaveLength) + mWaveMovement;\t\t\tTexCoord.x = 0.5 * (pos.w + pos.x);\t\t\t\t\t\t\t\tTexCoord.y = 0.5 * (pos.w + pos.y);\t\t\t\t\t\t\t\tTexCoord.z = pos.w;\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
Tf.prototype.Vp="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform float\t\tmWaveHeight;\t\t\t\t\t\t\t\tuniform vec4\t\tmWaterColor;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 WavesTexCoord;\t\t\t\t\t\t\t\t\t\tvarying vec3 TexCoord;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec4 normalClr = texture2D(texture2, WavesTexCoord.xy);\t\t\tvec2 waveMovement = mWaveHeight * (normalClr.xy - 0.5);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec2 projTexCoord = clamp((TexCoord.xy / TexCoord.z) + waveMovement, 0.0, 1.0);\t\t\t\tvec4 reflectiveColor = texture2D(texture1, vec2(projTexCoord.x, -projTexCoord.y) );\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgl_FragColor = mWaterColor * reflectiveColor;\t\t\t\t\tgl_FragColor.a = mWaterColor.a;\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
function Vf(a,b){if(b!=null){var c=b.Nb(),d=b.Mb(),e=512,f=512;switch(a.Fm){case 0:e=c/2;f=d/2;break;case 1:e=c/3;f=d/3;break;case 2:e=c/4;f=d/4;break}e=wd(b,e);f=wd(b,f);e=Math.min(e,f);f=Math.min(e,f);if(e<64)e=64;if(f<64)f=64;a.hf=Wd(b,e,f)}}function Wf(a,b){a.Jm.Ba(b.kb)};function Xf(){this.eb()}Xf.prototype.eb=function(){this.La=new $;this.La.r=this;this.l="";this.ah=0;this.wd=null;this.Ob=new ra;this.Ob.nc=0;this.Ob.ic=0;this.Ob.dc=0;this.zd=1;this.he=false;this.Sb=n.Df(255,200,200,200);this.oh=0.0010;this.wh=null;this.Ma=0;this.fa=null;this.Ik=false;this.sj=new D;this.Dp=null;this.Mj=2;this.ec=0;this.Tj=[];this.ug=[];this.Ze=[];this.Nj=[];this.Jj=[];this.Lc=[];this.zp=this.jp=0;this.Gp=false;this.Ui=null;this.Cn=false;this.ih=[];this.Qk=new s};Xf.prototype.hk=k("unknown");
function Ke(a,b,c){a.ec=Yf;var d=null;if(a.fa){d=O(a.fa);a.fa.vb(b)}a.ec=Zf;a.qn&&a.qn.vb(b);Pd(b);b.Ob=a.Ob.e();b.he=a.he;b.Sb.Kf=1;b.Sb.nc=n.Zc(a.Sb)/255;b.Sb.ic=n.Xc(a.Sb)/255;b.Sb.dc=n.Wc(a.Sb)/255;b.oh=a.oh;var e,f=0;d!=null&&a.Ze.length>0&&a.Ze.sort(function(j,m){j=ya(d,O(j));m=ya(d,O(m));if(j>m)return 1;if(j<m)return-1;return 0});a.ec=tf;for(e=0;e<a.Ze.length;++e)a.Ze[e].vb(b);f+=a.Ze.length;c&&Wf(c,b);e=c=null;var g=b.kb,i=b.Qd;if(g!=null&&i!=null&&d!=null){e=new Gb;e.rk(E(g,i));if(a.Gp)c=
e.lb(d)}a.Ui=e;a.ec=mf;for(e=0;e<a.Tj.length;++e){g=a.Tj[e];if(c==null||Va(c,bf(g))){g.vb(b);f+=1}}a.ec=lf;d!=null&&a.ug.length>0&&a.ug.sort(function(j,m){j=ya(d,O(j));m=ya(d,O(m));if(j<m)return 1;if(j>m)return-1;return 0});for(e=0;e<a.ug.length;++e){g=a.ug[e];if(c==null||Va(c,bf(g))){g.vb(b);f+=1}}a.jp=f}Xf.prototype.getName=da("l");Xf.prototype.mm=ca("l");function $f(a,b){a.fa=b}function Ge(a){a.Ik=true}
function jf(a,b,c){if(c==null)c=mf;switch(c){case Zf:a.qn=b;break;case mf:a.Tj.push(b);break;case tf:a.Ze.push(b);break;case Yf:break;case lf:a.ug.push(b);break;case Le:a.Jj.push(b);break;case Je:a.Nj.push(b);break}}function Ne(a,b){if(a.La==null)return null;var c=[];ag(a,a.La,b,c);return c}function ag(a,b,c,d){b.k()==c&&d.push(b);for(var e=0;e<b.X.length;++e)ag(a,b.X[e],c,d)}function rc(a,b){if(a.La==null)return null;var c=[];bg(a,a.La,b,c);return c}
function bg(a,b,c,d){N(b,c)!=null&&d.push(b);for(var e=0;e<b.X.length;++e)bg(a,b.X[e],c,d)}function cg(a,b){if(a.La==null)return null;return dg(a,a.La,b)}function dg(a,b,c){if(b.l==c)return b;for(var d=0;d<b.X.length;++d){var e=dg(a,b.X[d],c);if(e)return e}return null}function G(a,b){if(a.La==null)return null;return Pf(a,a.La,b)}function Pf(a,b,c){if(b.Ga==c)return b;for(var d=0;d<b.X.length;++d){var e=Pf(a,b.X[d],c);if(e)return e}return null}
function eg(a,b){if(b!=null){for(var c=0;c<a.Lc.length;++c)if(a.Lc[c]===b)return;a.Lc.push(b)}}
function Te(a,b,c){var d=Ne(a,"mesh");if(d==null)return null;var e=null;if(c){c.clear();e=c}else e=new fg;for(c=0;c<d.length;++c){var f=d[c];if(f&&f.zc){var g=null;if(f.ab)g=f.ab;else{g=null;if(f.tb&&f.tb.k()=="terrain")g=gd;g=f.U&&ld(f.U)>100?new mg(f.U,f,64,g):new ng(f.U,f,g)}if(b&&f.ab==null)f.ab=g;Yc(e,g)}}d=Ne(a,"animatedmesh");for(c=0;c<d.length;++c)if((a=d[c])&&a.Ha&&!a.Ha.Ad&&a.Ha.ai&&!a.Ha.ai.M.D(a.Ha.ai.C)){g=a.ab?a.ab:new og(a.Ha.ai,a);if(b&&a.ab==null)a.ab=g;Yc(e,g)}return e}
function Vc(a,b,c){var d={};d.Ee=b;d.wq=c+q();a.ih.push(d)}function pg(a,b,c,d,e){if(b&&b.V&&(b.k()=="2doverlay"||b.k()=="mobile2dinput"))if(!e||e&&b.Pn()){var f=Cf(b,true,a.wh);if(f.x<=c&&f.y<=d&&f.x+f.Ta>=c&&f.y+f.Ra>=d)return b}for(f=0;f<b.X.length;++f){var g=pg(a,b.X[f],c,d,e);if(g)return g}return null}function Xc(a){for(var b=0;b<1E3;++b){var c=Math.round(Math.random()*1E4+10);if(G(a,c)==null)return c}return-1}
Xf.prototype.zi=function(a,b){if(a&&b){for(var c=0;c<a.X.length&&c<b.X.length;++c){var d=a.X[c],e=b.X[c];d&&e&&d.k()==e.k()&&b.zi(d,e)}return-1}};var Zf=1,mf=0,tf=2,Yf=3,lf=4,Le=5,Je=6;function qg(){this.eb()}qg.prototype=new Xf;qg.prototype.hk=k("panorama");function rg(){this.eb();this.Dk=new s;this.aj=new s}rg.prototype=new Xf;rg.prototype.hk=k("free");function Ee(){this.a=this.la=null;this.Hk="";this.Ab=0;this.aa=this.db=null;this.Kj="";this.vn=this.xe=null;this.Rm=false;this.To=function(a){var b="";a=new Uint8Array(a);for(var c=0;c<a.byteLength;c++)b+=String.fromCharCode(a[c]);return b};this.Zp=function(a,b,c,d,e){this.Hk=b;this.db=c;this.aa=e;this.xe=d;if(this.db!=null)Z().db=c;if(a!=null&&b.indexOf(".ccbz")!=-1)a=this.To(a);if(a==null||a.length==0){la(n.na,"Error: Could not load file '"+b+"'");a=navigator.appVersion;a!=null&&a.indexOf("Chrome")!=
-1&&la(n.na,"<i>For using local files with Chrome, add the parameter '--allow-file-access-from-files' when starting the browser.<br/>Or use Firefox instead. Or run it from a web server. Or from CopperCube.</i>",true);return null}if(b.indexOf(".ccbz")!=-1)a=JSInflate.Yp(a);else if(b.indexOf(".ccbjs")!=-1)a=n.Kp(a);this.la=b=new he;this.Go();this.a=new yd(a);if(!this.hm())return null;this.vn=a;return b};this.Go=function(){var a=this.Hk,b=a.lastIndexOf("/");if(b!=-1)a=a.substring(0,b+1);this.Kj=a};this.hm=
function(){if(V(this.a)!=1701014630)return false;V(this.a);Cd(this.a,4);for(var a=0;zd(this.a)>0;){var b=this.mb();++a;if(a==1&&b!=1)return false;switch(b){case 1:this.cq();break;case 12:this.dq();break;default:this.xa()}}return true};this.xa=function(){this.a.Na=0+this.Ab};this.mb=function(){var a=0;a=Cd(this.a,2);var b=0;this.Xi=b=Cd(this.a,4);this.Ab=this.a.Na+b;return a};this.dn=function(){var a=new D(false);this.pp(a);return a};this.pp=function(a){for(var b=0;b<16;++b)sb(a,b,W(this.a))};this.rp=
function(){var a=new Ab;a.ya=W(this.a);a.c=W(this.a);a.b=W(this.a);a.d=W(this.a);return a};this.zo=function(a){for(var b=0,c=[],d=[0,12416,925824,63447168,4194836608,2181570688],e=[],f=0;f<a;++f)e.push(Cd(this.a,1));for(;b<a;){f=0;var g=this.xq[e[b]];if(b+g>=a)return c.join("");for(var i=g;i>=0;--i){f+=e[b];++b;if(i!=0)f<<=6}if(b>a)break;f-=d[g];if(f<1114111)c.push(this.Op(f));else return c.join("")}return c.join("")};this.Q=function(){var a=Cd(this.a,4);if(a>104857600)return"";if(a<=0)return"";return this.zo(a)};
this.xq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,
3,3,4,4,4,4,5,5,5,5];this.Op=function(a){if(a>65535){a-=65536;return String.fromCharCode(55296+(a>>10),56320+(a&1023))}else return String.fromCharCode(a)};this.cq=function(){for(var a=this.Ab;zd(this.a)>0&&this.a.Na<a;)switch(this.mb()){case 1004:this.la.fh=V(this.a);break;case 20:this.pq();break;case 2:var b=null;switch(V(this.a)){case 0:b=new rg;this.xo(b);break;case 1:b=new qg;this.yo(b);break;default:this.xa()}this.la.Pl(b);break;default:this.xa()}};this.km=function(a,b,c,d,e,f,g){this.Hk=d;this.db=
e;this.aa=g;this.xe=f;this.a=new yd(a);this.Go();V(this.a);V(this.a);Cd(this.a,4);a=-1;d=this.mb();if(d!=1)return null;for(b=this.Ab;zd(this.a)>0&&this.a.Na<b;){d=this.mb();switch(d){case 2:d=V(this.a);++a;if(a==c){c=null;switch(d){case 0:c=new rg;this.xo(c);break;case 1:c=new qg;this.yo(c);break;default:this.xa()}return c}else this.xa();default:this.xa()}}return null};this.pq=function(){V(this.a);this.la.So=this.Q();for(var a=this.Ab;zd(this.a)>0&&this.a.Na<a;)switch(this.mb()){case 35:V(this.a);
V(this.a);V(this.a);V(this.a);var b=V(this.a);if((b&1)!=0)this.la.Bn=true;this.xa();break;case 37:b=V(this.a);V(this.a);if((b&1)!=0)if(n.na==null)n.na=new fa(elementIdOfCanvas,showFPSCounter);else ga(n.na);if((b&2)!=0){V(this.a);this.Q()}break;default:this.xa()}};this.xo=function(a){var b=this.Ab;for(this.qq(a);zd(this.a)>0&&this.a.Na<b;)switch(this.mb()){case 1007:a.Dk=this.P();a.aj=this.P();break;case 8:this.sp(a);break;case 1008:a.zd=W(this.a);break;case 1009:a.he=S(this.a);a.oh=W(this.a);a.Sb=
V(this.a);break;default:this.xa()}};this.yo=function(){this.xa()};this.P=function(){var a=new s;a.c=W(this.a);a.b=W(this.a);a.d=W(this.a);return a};this.rl=function(){var a=new ra;a.nc=W(this.a);a.ic=W(this.a);a.dc=W(this.a);a.Kf=W(this.a);return a};this.Nq=function(){var a=W(this.a),b=W(this.a),c=W(this.a),d=W(this.a);if(a>1)a=1;if(b>1)b=1;if(c>1)c=1;if(d>1)d=1;return n.Df(d*255,a*255,b*255,c*255)};this.Rh=function(){var a=new Qa;a.c=W(this.a);a.b=W(this.a);return a};this.oc=function(){var a=new y;
a.C=this.P();a.M=this.P();return a};this.qq=function(a){if(this.mb()==26){a.l=this.Q();a.ah=V(this.a)}else this.cp()};this.cp=function(){this.a.position-=10};this.sp=function(a){for(var b=this.Ab;zd(this.a)>0&&this.a.Na<b;)switch(this.mb()){case 9:this.fn(a,a.La,0);break;default:this.xa()}};this.fn=function(a,b,c){if(b!=null){var d=this.Ab,e=V(this.a),f=V(this.a),g=this.Q(),i=this.P(),j=this.P(),m=this.P(),o=S(this.a),p=V(this.a),h=null,w=0;if(c==0){b.V=o;b.l=g;b.ib=p}for(;zd(this.a)>0&&this.a.Na<
d;)switch(this.mb()){case 9:this.fn(a,h?h:b,c+1);break;case 10:switch(e){case 2037085030:h=new nf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.im(h);vc(b,h);h=h;P(h);break;case 1752395110:h=new kf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.im(h);vc(b,h);h=h;P(h);break;case 1835950438:h=new Gf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.hq(h);vc(b,h);h=h;P(h);break;case 1953526632:h=new Qf(this.aa,null);h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=
p;h.Ga=f;h.r=a;this.kq(h);vc(b,h);h=h;P(h);break;case 1819042406:h=new of;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.iq(h);vc(b,h);h=h;P(h);break;case 1835098982:h=new Pe;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.r=a;h.Ga=f;this.jq(h);vc(b,h);h=h;P(h);break;case 1751608422:h=new sf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.lq(h);vc(b,h);h=h;P(h);break;case 1935946598:h=new yf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.gq(h);vc(b,h);h=h;
P(h);break;case 1752461414:h=new uf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.mq(h);vc(b,h);h=h;P(h);break;case 1954112614:h=new Rf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;h.g=this.oc();for(var t=0;t<16;++t)sb(h.lg,t,W(this.a));vc(b,h);h=h;P(h);break;case 1868837478:h=new Bf(this.aa);h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.fq(h);vc(b,h);h=h;P(h);break;case 1668575334:h=new pf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.oq(h);
vc(b,h);h=h;P(h);break;case 1835283046:h=new Ef(this.aa,a);h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.eq(h);vc(b,h);h=h;P(h);break;case 1920103526:h=new Sf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;h.g=this.oc();vc(b,h);h=h;P(h);this.xa();break;case 1920235366:h=new Tf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.sq(h);vc(b,h);h=h;P(h);break;default:if(c==0)a.Ob=this.rl();this.xa();break}break;case 11:t=this.cn();h&&h.sc(w)&&h.sc(w).rk(t);++w;break;
case 25:t=h;if(t==null&&c==0)t=a.La;this.op(t,a);break;default:this.xa()}h&&h.so()}};this.im=function(a){var b=this.Ab;a.g=this.oc();S(this.a);S(this.a);a.zc=S(this.a);for(S(this.a);zd(this.a)>0&&this.a.Na<b;)switch(this.mb()){case 14:var c=this.qp();a.U=c;break;default:this.xa()}};this.qp=function(){var a=new kd;a.g=this.oc();for(var b=this.Ab;zd(this.a)>0&&this.a.Na<b;)switch(this.mb()){case 15:var c=this.en();c!=null&&a.sd(c);break;default:this.xa()}return a};this.en=function(){var a=new id;a.g=
this.oc();for(var b=this.Ab;zd(this.a)>0&&this.a.Na<b;)switch(this.mb()){case 11:a.O=this.cn();break;case 16:for(var c=Math.floor(this.Xi/2),d=0;d<c;++d)a.ea.push(Cd(this.a,2));break;case 17:c=Math.floor(this.Xi/36);for(d=0;d<c;++d){var e=new Pb;e.f=this.P();e.j=this.P();e.oa=V(this.a);e.Aa=this.Rh();e.yg=new Qa;a.m.push(e)}break;case 18:c=Math.floor(this.Xi/44);for(d=0;d<c;++d){e=new Pb;e.f=this.P();e.j=this.P();e.oa=V(this.a);e.Aa=this.Rh();e.yg=this.Rh();a.m.push(e)}break;case 19:c=this.Xi/60;
a.Nd=[];a.vd=[];for(d=0;d<c;++d){e=new Pb;e.f=this.P();e.j=this.P();e.oa=V(this.a);e.Aa=this.Rh();e.yg=new Qa;a.Nd.push(this.P());a.vd.push(this.P());a.m.push(e)}break;default:this.xa()}return a};this.cn=function(){var a=new cd;a.i=V(this.a);V(this.a);V(this.a);V(this.a);V(this.a);W(this.a);V(this.a);V(this.a);S(this.a);S(this.a);a.Bc=S(this.a);a.Bf=S(this.a);Bd(this.a,1);a.ce=S(this.a);S(this.a);S(this.a);S(this.a);for(var b=0;b<4;++b){var c=this.ld();switch(b){case 0:a.bb=c;break;case 1:a.pc=c;
break}S(this.a);S(this.a);S(this.a);if(Cd(this.a,2)!=0)switch(b){case 0:a.Qb=true;break;case 1:break}}return a};this.sl=function(){return this.Q()};this.tl=function(){var a=this.Kj+this.sl();return ae(n.Sd,a,true)};this.ld=function(){var a=this.sl(),b=this.Kj+a;if(this.db!=null&&a!="")return td(this.db,b,true);return null};this.kq=function(a){var b=this.Ab;a.g=this.oc();a.Hp=V(this.a);for(a.ap=V(this.a);zd(this.a)>0&&this.a.Na<b;)switch(this.mb()){case 3:this.nq(a);break;default:this.xa()}};this.nq=
function(a){var b=this.Ab;a.caption=this.Q();a.Bg=this.ld();this.Rh();V(this.a);a.Uq=this.Q();for(a.br=S(this.a);zd(this.a)>0&&this.a.Na<b;)switch(this.mb()){case 6:a.Rq=true;a.Wq=this.Q();break;case 4:a.Sq=true;a.ik=this.Q();break;case 5:a.Tq=true;a.cr=this.Q();a.dr=this.Q();break;default:this.xa()}};this.jq=function(a){a.g=this.oc();a.ga=this.P();a.Kb=this.P();a.hd=W(this.a);a.Gc=W(this.a);a.Gg=W(this.a);a.Fg=W(this.a);a.vm=S(this.a);ff(a)};this.sq=function(a){V(this.a);a.Fm=V(this.a);a.dk.c=W(this.a);
a.dk.b=W(this.a);a.Gn=W(this.a);a.Fn=W(this.a);a.mi=V(this.a);a.Bm=S(this.a);a.zn=V(this.a);this.im(a)};this.lq=function(a){a.g=this.oc();if(V(this.a)==2)a.Ya.sh=true;a.Ya.oa=this.rl();this.rl();S(this.a);a.Ya.Fa=this.P();var b=W(this.a);a.Ya.Ea=b;if(b!=0)a.Ya.$g=1/b};this.iq=function(a){a.Cc.g=this.oc();a.g=a.Cc.g;a.Zh=W(this.a);a.wg=W(this.a);var b=Bd(this.a,1);a.uh=(b&2)!=0};this.gq=function(a){a.g=this.oc();a.Jb=this.tl();a.ne=W(this.a);a.Ah=W(this.a);a.Xm=V(this.a);a.Yo=S(this.a);a.Tm=V(this.a);
a.Yk=V(this.a);a.Eg=W(this.a);a.jg=S(this.a);V(this.a)};this.mq=function(a){a.g=this.oc();a.Dg=W(this.a);a.Ve=S(this.a);V(this.a);for(var b=V(this.a),c=0;c<b;++c)a.Bb.push(this.P())};this.oq=function(a){a.Fa=this.P();a.kd=V(this.a);a.Rb=this.P();a.af=V(this.a);a.Bh=V(this.a);a.Ch=V(this.a);a.bg=V(this.a);a.wj=V(this.a);a.zj=V(this.a);a.xj=V(this.a);a.cg=W(this.a);a.dg=W(this.a);a.$f=W(this.a);a.Dh=W(this.a);var b=V(this.a);if(b&1){a.mh=true;a.nh=V(this.a);a.gj=V(this.a)}else a.mh=false;if(b&2){a.Tf=
true;a.kj=V(this.a);a.zd=this.P()}else a.Tf=false;if(b&4){a.ng=true;a.Rj=W(this.a);a.Sj=W(this.a)}else a.ng=false};this.eq=function(a){V(this.a);a.Jd=S(this.a);if(a.Jd){a.cf=V(this.a);a.df=V(this.a);a.rf=V(this.a);a.qf=V(this.a)}else{a.ef=W(this.a);a.ff=W(this.a);a.tf=W(this.a);a.sf=W(this.a)}a.vg=S(this.a);a.Hc=V(this.a);a.Ia=this.ld();a.we=this.ld();a.mg=S(this.a);a.Qf=this.ld();a.mj=V(this.a);if(a.mj==1)a.Jc=V(this.a)};this.fq=function(a){if(V(this.a)&1)a.zk=true;a.Jd=S(this.a);if(a.Jd){a.cf=V(this.a);
a.df=V(this.a);a.rf=V(this.a);a.qf=V(this.a)}else{a.ef=W(this.a);a.ff=W(this.a);a.tf=W(this.a);a.sf=W(this.a)}a.vg=S(this.a);a.Hc=V(this.a);a.Ia=this.ld();a.we=this.ld();a.mg=S(this.a);a.Se=S(this.a);a.zg=Bd(this.a,1);a.cb=this.Q();a.gd=this.Q();a.uf=V(this.a);a.Xg=S(this.a);a.il=S(this.a);a.lj=V(this.a);a.Jh=S(this.a);a.rh=V(this.a);a.Ih=S(this.a)};this.op=function(a,b){if(a){var c=null;switch(V(this.a)){case 100:b=new $b;b.te=this.P();c=b;break;case 101:b=new Wb;b.Y=this.P();b.N=this.P();b.nd=V(this.a);
b.Vb=S(this.a);Xb(b);c=b;break;case 102:b=new sg;b.dh=this.P();b.Fa=this.P();b.Ea=W(this.a);b.$h=W(this.a);b.eb();c=b;break;case 103:b=new tg;b.Ea=this.P();W(this.a);b.Li=!n.D(W(this.a),0);W(this.a);b.xf=this.P();c=V(this.a);V(this.a);V(this.a);if(c&1)b.bk=true;b.Db=W(this.a);c=b;break;case 104:b=new Re(a,this.aa);b.ag=W(this.a);b.Gb=W(this.a);b.Yb=W(this.a);b.ke=W(this.a);b.pe=S(this.a);c=V(this.a);if(c&1){b.ok=false;b.Mg=true}else{b.ok=true;b.Mg=false}if(c&2)b.Dj=V(this.a);if(a){b.Ko=n.yi(a.hd);
b.fm=b.Ko+10;b.Eq=(b.fm-b.oo)/50}c=b;break;case 105:b=new ug(a,this.aa);b.Ea=W(this.a);b.Yb=W(this.a);b.pe=S(this.a);c=V(this.a);if(c&2){b.rn=true;b.Db=W(this.a)}if(c&4){b.wm=true;b.oe=W(this.a);b.me=W(this.a);b.ni=W(this.a)}c=b;break;case 106:var d=new vg(b);d.hi=V(this.a);d.vj=S(this.a);d.Lh=this.Q();d.Gj=S(this.a);d.Me=this.P();d.Sf=Bd(this.a,1);d.bh=this.Q();c=V(this.a);if(c&1)d.fi=V(this.a);if(d.Sf==3||d.Sf==4)d.o=this.hb(b);c=d;break;case 107:c=new yc(b,this.aa);c.Qe=S(this.a);c.xc=S(this.a);
V(this.a);c.o=this.hb(b);c=c;break;case 108:d=new wg(b);d.kh=V(this.a);d.Lj=V(this.a);d.Qh=W(this.a);d.tg=V(this.a);c=V(this.a);if(c&1){d.xm=1;d.ql=this.P()}d.o=this.hb(b);c=d;break;case 109:b=new xg;b.md=V(this.a);b.wf=V(this.a);b.Ag=V(this.a);b.Vb=S(this.a);c=V(this.a);b.Va=[];for(d=0;d<c;++d)b.Va.push(this.ld());c=b;break;case 110:c=new yg(b,this.aa);c.Qe=S(this.a);c.xc=S(this.a);V(this.a);c.ae=this.hb(b);c.Zd=this.hb(b);c=c;break;case 111:c=new zg(b);c.Cg=V(this.a);V(this.a);c.o=this.hb(b);c=
c;break;case 112:c=new Ag(b,this.aa);c.Yf=V(this.a);c.Jc=V(this.a);c.Jq=S(this.a);V(this.a);c.o=this.hb(b);c=c;break;case 113:d=new Bg(b);d.bd=V(this.a);d.Fd=W(this.a);d.Ug=W(this.a);d.Nf=S(this.a);d.Tb=V(this.a);d.Yj=this.Q();d.Zg=this.Q();d.Mh=W(this.a);d.Vh=V(this.a);d.wb=this.P();d.Md=this.Q();d.Rd=this.Q();d.cj=this.Q();d.Ni=this.Q();if(d.bd==3)d.Kh=V(this.a);c=V(this.a);if(c&1)d.ig=V(this.a);else{d.ig=1E4;if(d.Fd!=0)d.ig=d.Mh/(d.Fd/1E3)}d.cd=this.hb(b);d.Xd=this.hb(b);d.$d=this.hb(b);d.Yd=this.hb(b);
c=d;break;case 114:b=new Cg;b.Wh=V(this.a);b.wb=this.P();b.ij=V(this.a);b.ie=W(this.a);b.$j=W(this.a);c=V(this.a);b.xc=c&1?true:false;c=b;break;case 115:b=new Dg(b,this.aa);V(this.a);b.Qj=W(this.a);b.Gb=W(this.a);b.Yb=W(this.a);b.ke=W(this.a);b.wb=this.P();b.Md=this.Q();b.Rd=this.Q();b.pj=this.Q();b.Pj=this.Q();c=V(this.a);if(c&1)b.ej=true;if(c&2){b.ii=true;b.Ii=W(this.a);b.Rf=W(this.a)}if(c&4)b.ml=true;c=b;break;case 116:c=new Eg(b);c.Ro=S(this.a);V(this.a);c.o=this.hb(b);c=c;break;case 117:c=new n.Ne(b);
c.Ub=this.Q();V(this.a);this.bn(c.mc,b);c=c;break;default:this.xa();return}c&&Yb(a,c)}else this.xa()};this.bn=function(a,b){for(var c=V(this.a),d=0;d<c;++d){var e=new Fg;e.i=V(this.a);e.l=this.Q();switch(e.i){case 1:e.hc=W(this.a);break;case 2:e.Qc=this.Q();break;case 6:e.zf=this.P();break;case 7:e.di=this.ld();break;case 9:e.Tg=this.hb(b);break;case 0:case 4:case 5:case 8:case 3:default:e.jc=V(this.a);break}a.push(e)}};this.hb=function(a){if(V(this.a)){var b=new Qc(a);this.mp(b,a);return b}return null};
this.mp=function(a,b){var c=this.mb();if(c!=29)this.xa();else for(var d=this.Ab;zd(this.a)>0&&this.a.Na<d;){c=this.mb();if(c==30)(c=this.lp(V(this.a),b))&&Rc(a,c);else this.xa()}};this.dq=function(){for(var a=this.Ab;zd(this.a)>0&&this.a.Na<a;)switch(this.mb()){case 13:var b=V(this.a),c=this.Q(),d=V(this.a);if(b&4){if(b=md(this.xe,c))b.ra.length>0||b.Za.length>0?this.xa():this.rq(b,d)}else if(b&8){b=null;try{b=this.zo(d)}catch(e){la(n.na,"error reading script: "+e)}if(b!=null){d=Z();Gg(d,b)}}this.xa();
break;default:this.xa()}};this.hq=function(a){a.g=this.oc();S(this.a);V(this.a);var b=V(this.a),c=V(this.a);a.yb=W(this.a);Bd(this.a,1);a.Wb=S(this.a);var d=V(this.a);if(d==0){a.ed=250;a.be=true}else if(d&1){a.ed=V(this.a);a.be=a.ed>0}a.Fo(this.np(a));a.Sa=b;a.qb=c;if(d&2){b=V(this.a);for(c=0;c<b;++c){d=new n.ln;d.Fj=V(this.a);d.Wf=V(this.a);a.xb.push(d)}}};this.np=function(a){var b=this.sl(),c=md(this.xe,b);if(c==null){c=new n.Cl;c.l=b;c!=null&&this.xe.Xk.push(c);c=c}if(a!=null&&c!=null){if(c.td==
null)c.td=[];c.td.push(a)}return c};this.rq=function(a,b){if(a!=null){var c=V(this.a);a.Ek=W(this.a);if(c&1)a.ai=this.oc();c=this.Ab;b=this.a.Na+b;for(var d=[],e=0;zd(this.a)>0&&this.a.Na<c&&this.a.Na<b;){var f=this.mb();if(f==33){f=new n.up;f.l=this.Q();f.zh=this.dn();f.qh=this.dn();a.ra.push(f);e=V(this.a);d.push(f);e>=0&&e<d.length&&d[e].X.push(f);e=V(this.a);for(var g=0;g<e;++g)f.Yg.push(V(this.a));g=V(this.a);for(e=0;e<g;++e){var i=new n.vp;i.frame=W(this.a);i.position=this.P();f.gf.push(i)}g=
V(this.a);for(e=0;e<g;++e){i=new n.xp;i.frame=W(this.a);i.scale=this.P();f.ue.push(i)}g=V(this.a);for(e=0;e<g;++e){i=new n.wp;i.frame=W(this.a);i.rotation=this.rp();f.lf.push(i)}g=V(this.a);for(e=0;e<g;++e){i=new n.yp;i.oi=Cd(this.a,2);i.Hi=V(this.a);i.Ei=W(this.a);f.Af.push(i)}}else if(f==15){f=this.en();f!=null&&a.sd(f)}else if(f==34){f=new n.Gh;f.l=this.Q();f.ud=W(this.a);f.N=W(this.a);f.Ac=W(this.a);a.al.push(f)}else this.xa()}try{a.Pk=-1;a.ep=-1;b=c=0;var j,m;for(d=0;d<a.ra.length;++d){f=false;
for(c=0;c<a.ra.length;++c){m=a.ra[c];for(e=0;e<m.X.length;++e)if(m.X[e]===a.ra[d])f=true}f||a.kf.push(a.ra[d])}for(c=0;c<a.Za.length;++c){d=[];a.ck.push(d);j=a.Za[c];var o=j.m.length;for(f=0;f<o;++f)d.push(false)}a.Ad=false;d=o=0;var p,h;for(o=0;o<a.ra.length;++o){h=a.ra[o];if(h.gf.length||h.ue.length||h.lf.length||h.Af.length){a.Ad=true;break}}if(a.Ad)for(o=a.dd=0;o<a.ra.length;++o){h=a.ra[o];if(h.gf.length){var w=h.gf[h.gf.length-1];if(w.frame>a.dd)a.dd=w.frame}if(h.ue.length){var t=h.ue[h.ue.length-
1];if(t.frame>a.dd)a.dd=t.frame}if(h.lf.length){var L=h.lf[h.lf.length-1];if(L.frame>a.dd)a.dd=L.frame}}if(a.Ad&&!a.Zm){a.Zm=true;for(o=0;o<a.ra.length;++o){h=a.ra[o];for(d=0;d<h.Af.length;++d){var A=h.Af[d],u=A.Hi;p=a.Za[A.oi];var H=p.m[u];A.un=H.f.e();A.tn=H.j.e()}}}nd(a,null,null);for(c=0;c<a.ra.length;++c){m=a.ra[c];for(b=0;b<m.Yg.length;++b){j=a.Za[m.Yg[b]];j.ze=m.Te.e()}}if(a.Za.length==0){a.ob.C.set(0,0,0);a.ob.M.set(0,0,0)}else{j=a.Za[0];a.ob.C=j.g.C.e();a.ob.M=j.g.M.e();for(c=1;c<a.Za.length;++c){j=
a.Za[c];if(j.ze==null){z(a.ob,j.g.C);z(a.ob,j.g.M)}else{var M=j.g.e();zb(j.ze,M);z(a.ob,M.C);z(a.ob,M.M)}}}}catch(J){la(n.na,"error finalizing skinned mesh: "+J)}if(a.td&&a.td.length){for(e=0;e<a.td.length;++e)(j=a.td[e])&&Hf(j,j.Sa,j.qb);a.td=null}}};this.lp=function(a,b){var c=0;switch(a){case 0:c=new Ub;c.nj=V(this.a);c.nf=V(this.a);c.ba=S(this.a);V(this.a);return c;case 1:b=new Vb;b.qe=V(this.a);b.Nc=V(this.a);b.ba=S(this.a);b.ha=this.P();if(b.qe==4)b.Mi=this.P();b.jf=S(this.a);b.Mc=V(this.a);
c=V(this.a);if(c&1){b.Od=true;b.Rc=V(this.a)}return b;case 2:b=new Zb;b.yl=V(this.a);b.pg=V(this.a);b.ba=S(this.a);b.ha=this.P();b.Oj=false;c=V(this.a);if(c&1){b.Oj=true;b.Kl=V(this.a)}return b;case 3:c=new dc;c.Al=V(this.a);c.qg=V(this.a);c.ba=S(this.a);c.ha=this.P();V(this.a);return c;case 4:c=new ec;c.md=V(this.a);c.Zb=V(this.a);c.ba=S(this.a);c.Bg=this.ld();if(c.md==1)c.Kk=V(this.a);V(this.a);return c;case 5:b=new Ic;c=V(this.a);b.bf=(c&1)!=0;b.Jb=this.tl();b.ne=W(this.a);b.Ah=W(this.a);b.Eg=
W(this.a);b.jg=S(this.a);b.Oc=V(this.a);b.kg=S(this.a);b.nl=this.P();return b;case 6:c=new Mc;c.sn=V(this.a);return c;case 7:c=new fc;V(this.a);c.Nk=this.Q();return c;case 8:c=new gc;V(this.a);c.Nl=this.Q();c.ga=this.Q();return c;case 9:c=new hc;c.og=V(this.a);c.ba=S(this.a);c.Vb=S(this.a);c.xk=this.Q();V(this.a);return c;case 10:c=new jc(this.aa);c.mf=this.Q();V(this.a);return c;case 11:c=new lc(this.aa);c.Mf=V(this.a);V(this.a);return c;case 12:b=new nc;b.qe=V(this.a);b.Nc=V(this.a);b.ba=S(this.a);
b.ha=this.P();b.jf=S(this.a);b.Mc=V(this.a);c=V(this.a);if(c&1){b.Od=true;b.Rc=V(this.a)}return b;case 13:a=new qc;a.Yh=V(this.a);a.fe=V(this.a);a.Ri=W(this.a);a.pf=V(this.a);a.Sc=W(this.a);c=V(this.a);if(c&1){a.of=V(this.a);a.Vj=S(this.a);a.Vg=this.P()}if(c&2)a.Sg=this.hb(b);if(c&4)a.Uj=this.P();return a;case 14:this.xa();return null;case 15:c=new Rb;V(this.a);c.Zb=V(this.a);c.ba=S(this.a);c.cb=this.Q();return c;case 16:c=new Ac;V(this.a);c.Lb=this.Q();c.kl=V(this.a);c.yf=V(this.a);c.Pd=this.Q();
return c;case 17:a=new Gc;c=V(this.a);a.Lb=this.Q();a.Ti=V(this.a);a.yf=V(this.a);a.Pd=this.Q();a.o=this.hb(b);if(c&1)a.ei=this.hb(b);return a;case 18:c=new Hc;c.Xh=V(this.a);c.ba=S(this.a);V(this.a);return c;case 19:c=new Nc;V(this.a);c.Lb=this.Q();c.tj=S(this.a);return c;case 20:c=new Tc(this.aa);V(this.a);c.mf=this.Q();this.Rm=true;return c;case 22:c=new Wc;c.rg=V(this.a);c.Ak=S(this.a);V(this.a);c.o=this.hb(b);return c;case 23:c=new Uc;c.sg=V(this.a);c.Fk=S(this.a);c.Gl=V(this.a);V(this.a);return c;
case 24:c=new Hg;c.Ub=this.Q();V(this.a);this.bn(c.mc,b);return c;case 25:a=new Zc(this.aa);c=V(this.a);a.bf=(c&1)!=0;a.Si=V(this.a);a.Ll=this.Q();V(this.a);a.Oc=V(this.a);a.kg=S(this.a);a.Wk=V(this.a);a.Ki=this.hb(b);a.Ji=this.hb(b);return a;case 26:c=new Kc;V(this.a);c.Jb=this.tl();return c;default:this.xa()}return null}};function Ig(){this.i=-1}l=Ig.prototype;l.k=k("none");l.gb=k(false);l.Vd=aa();l.If=aa();l.pd=aa();l.He=aa();l.Fe=k(false);l.Ge=k(false);l.reset=aa();l.Ef=k(null);l.h=k(null);function Re(a,b){this.i=-1;this.tc=0;this.pe=false;this.Mg=true;this.ti=this.Be=this.Ke=this.Ie=this.De=this.gm=this.ok=false;this.Dj=0;this.Lg=new s(0,0,0);this.jm=this.Wd=this.dm=0;this.oo=20;this.fm=100;this.Eq=(this.fm-this.oo)/50;this.Ko=90;this.tc=q();this.Da=a;this.aa=b;this.Dd=this.Cd=-1;this.Vk=true;a&&pc(this,a.ga)}Re.prototype=new Ig;l=Re.prototype;l.k=k("camerafps");l.ag=88;l.Gb=0.06;l.Yb=200;l.ke=0;l.pe=false;l.yj=true;function Se(a,b){a.yj=b}
function pc(a,b){if(a.Da!=null){b=b.substract(a.Da.f);b=Ja(b);a.Wd=b.c;a.jm=b.b;if(a.Wd>a.ag)a.Wd-=360}}l=Re.prototype;
l.gb=function(a){if(this.Da==null)return false;if(this.Da.r.fa!==this.Da)return false;var b=q(),c=b-this.tc;if(c==0)return false;if(c>250)c=250;this.tc=b;var d=new s(0,0,0);if(this.yj&&(this.Ke||this.Be)){var e=this.Da.f.substract(this.Da.ga);if(this.pe)e.b=0;e.normalize();this.Ke&&d.pa(x(e,this.Gb*-c));this.Be&&d.pa(x(e,this.Gb*c))}if(this.yj&&(this.De||this.Ie)){e=Ia(this.Da.f.substract(this.Da.ga),this.Da.Kb);e.normalize();if(this.De){e=x(e,this.Gb*-c);d.pa(e)}if(this.Ie){e=x(e,this.Gb*c);d.pa(e)}}if(this.Dj!=
0){e=d.e();if(xa(e)){if(this.dm!=0&&!xa(this.Lg)){e=b-this.dm;if(e>0&&e<this.Dj){e=this.Lg.getLength()*(1-e/this.Dj)*c;var f=this.Lg.e();f.normalize();Ca(f,e*0.5);d.pa(f)}else this.Lg.set(0,0,0)}}else{this.Lg=e;Ca(this.Lg,1/c);this.dm=b}}d.normalize();Ca(d,c*this.Gb);this.Da.f.pa(d);oc(this.Da,this.Da.ga.add(d));d=new s(0,0,1);e=new D;vb(e,new s(this.Wd,this.jm,0));mb(e,d);e=false;if(this.aa!=null)e=this.aa.wi;var g=0;var i=f=2.0E-5,j=false;if(this.aa!=null&&a.r!=null&&!e){j=a.r;j=j.La==null||j.wh==
null?null:pg(j,j.La,this.aa.Eb,this.aa.Fb,true);j=j!=null}if(this.Mg){f*=3;i*=3}if(!j)if(e)g=this.aa.Fb;else if(this.ok){var m=this.aa.S.Mb(),o=this.aa.Fb;if(m>0&&o>0&&this.aa.Fh)g=Math.sin((o-m/2)/m)*100*0.5}else if(this.Mg||this.gm)if(this.aa.Eh){m=this.aa.Fb;g=this.Dd==-1?0:m-this.Dd;if(g!=0)this.aa.Rk=b;this.Dd=m}else this.Dd=-1;g+=0;c=c;if(c>100)c=100;if(g>300)g=300;if(g<-300)g=-300;this.Wd+=g*c*this.Yb*i;if(this.Wd<-this.ag)this.Wd=-this.ag;if(this.Wd>this.ag)this.Wd=this.ag;g=0;if(!j)if(e)g=
this.aa.Eb;else if(this.ok){b=this.aa.S.Nb();i=this.aa.Eb;if(b>0&&i>0&&this.aa.Fh)g=Math.sin((i-b/2)/b)*100*0.5}else if(this.Mg||this.gm)if(this.aa.Eh){i=this.aa.Eb;g=this.Cd==-1?0:i-this.Cd;if(g!=0)this.aa.Rk=b;this.Cd=i}else this.Cd=-1;g+=0;if(g>300)g=300;if(g<-300)g=-300;this.jm+=g*c*this.Yb*f;if(e||this.Mg||this.gm)Xe(this.aa);if(this.yj)if(this.ti){if(this.Vk)if((a=N(a,"collisionresponse"))&&!a.ge){this.Vk=false;if(a.Bd==0)a.Bd=this.ke*100}}else this.Vk=true;oc(this.Da,this.Da.f.add(d));return false};
l.Vd=function(a){Ig.prototype.Vd.call(this,a)};l.If=aa();l.pd=function(a){Ig.prototype.pd.call(this,a)};l.He=function(a){Ig.prototype.He.call(this,a)};l.Ai=function(a,b){if(b==37||b==65){if(this.De=a)this.Ie=false;return true}if(b==39||b==68){if(this.Ie=a)this.De=false;return true}if(b==38||b==87){if(this.Ke=a)this.Be=false;return true}if(b==40||b==83){if(this.Be=a)this.Ke=false;return true}if(b==32){this.ti=a;return true}return false};l.Fe=function(a){return this.Ai(true,a.keyCode)};
l.Ge=function(a){return this.Ai(false,a.keyCode)};function ug(a,b){this.i=-1;this.Yb=1E4;this.Ea=100;this.pe=false;this.tc=q();this.Da=a;this.aa=b;this.rn=false;this.Ld=this.Kd=this.Db=0;this.wm=false;this.ni=this.me=this.oe=0;this.Dc=90;this.el=-66666;this.Dd=this.Cd=-1}ug.prototype=new Ig;l=ug.prototype;l.k=k("cameramodelviewer");l.Yb=0.06;l.Ea=100;l.pe=false;
l.gb=function(){if(this.Da==null)return false;if(this.Da.r.fa!==this.Da)return false;var a=q(),b=a-this.tc;if(b>250)b=250;this.tc=a;a=this.Da.f.e();var c=this.Da.ga.e(),d=c.substract(O(this.Da)),e=0,f=0;if(this.aa.Eh){var g=this.aa.Eb,i=this.aa.Fb;e=(this.Cd==-1?0:g-this.Cd)*this.Yb/5E4;f=(this.Dd==-1?0:i-this.Dd)*this.Yb/5E4;this.Cd=g;this.Dd=i}else this.Dd=this.Cd=-1;if(this.rn&&this.Db!=0){if(n.qa(e)){e=this.Kd;this.Kd*=0.9;if(this.Kd>0)this.Kd=Math.max(0,this.Kd-b/this.Db);else if(this.Kd<0)this.Kd=
Math.min(0,this.Kd+b/this.Db)}else this.Kd=e*(this.Db/1E3);if(n.qa(f)){f=this.Ld;this.Ld*=0.9;if(this.Ld>0)this.Ld=Math.max(0,this.Ld-b/this.Db);else if(this.Ld<0)this.Ld=Math.min(0,this.Ld+b/this.Db)}else this.Ld=f*(this.Db/1E3)}d=Ia(d,this.Da.Kb);d.b=0;d.normalize();if(!n.qa(e)){Ca(d,b*e);a.pa(d)}if(!this.pe&&!n.qa(f)){e=this.Da.Kb.e();e.normalize();b=a.add(x(e,b*f));f=b.e();f.b=c.b;e=this.Ea/10;if(f.ub(c)>e)a=b}if(this.pe){if(n.D(this.el,-66666))this.el=a.b;a.b=this.el}Xe(this.aa);if(this.wm){b=
n.yi(this.Da.hd);if(this.Dc<this.oe)this.Dc=this.oe;if(this.Dc>this.me)this.Dc=this.me;f=this.ni;f=Math.abs(this.Dc-b)/8;if(f<this.ni)f=this.ni;if(b<this.me-f&&b<this.Dc){b+=f;if(b>this.me)b=this.me}if(b>this.oe+f&&b>this.Dc){b-=f;if(b<this.oe)b=this.oe}gf(this.Da,n.Sn(b))}d=a.substract(c);va(d,this.Ea);a=c.add(d);this.Da.f=a;return false};l.If=function(a){this.Dc+=a*this.ni;if(this.Dc<this.oe)this.Dc=this.oe;if(this.Dc>this.me)this.Dc=this.me};function vg(a){this.hi=5E3;this.vj=this.Lk=this.yn=false;this.Gj=true;this.fi=0;this.Uk=true;this.Sf=Jg;this.Xj=false;this.Ed=a;this.Ma=0;this.yn=false;this.Hd=this.rj=null;this.Xj=false;this.Lh=null;this.fi=0;this.bh=this.Me=null;this.Om=0;this.Jn=false}vg.prototype=new Ig;var Jg=0;vg.prototype.k=k("followpath");
vg.prototype.h=function(a,b,c,d){a=new vg;a.hi=this.hi;a.vj=this.vj;a.Gj=this.Gj;a.Lh=this.Lh;a.fi=this.fi;a.Me=this.Me?this.Me.e():null;a.Sf=this.Sf;a.bh=this.bh;a.o=this.o?this.o.h(c,d):null;return a};
vg.prototype.gb=function(a,b){if(a==null||!this.Ed||!this.hi)return false;if(a!==this.rj){if(this.rj=a)this.Lk=this.rj.k()=="camera";return false}if(!this.Hd)if(!this.yn)if(this.Lh.length)if(this.Ed){var c=cg(this.Ed,this.Lh);c&&c.k()=="path"&&Kg(this,c)}if(this.Hd==null)return false;c=false;var d=null;if(this.Lk&&this.Gj){c=!this.Uk;d=a;if(this.Ed.fa!==d){if(this.Hd.Bb.length)d.f=vf(this.Hd,0);this.Uk=true;return false}else this.Uk=false;if(!this.Ma||!c)this.Ma=b}if(!this.Ma)this.Ma=this.Ed.Ma;d=
(b-this.Ma+this.fi)/this.hi;if(d>1&&!this.Hd.Ve)switch(this.Sf){case Jg:d%=1;break;case 1:d=1;break;case 2:d=1;if(!this.Xj){if(this.Ed)if(this.bh.length)if((c=cg(this.Ed,this.bh))&&c.k()=="camera"){(b=this.Ed.wh)&&Oe(c,b.Nb(),b.Mb());this.Ed.fa=c}this.Xj=true}break;case 3:if(d>this.Om+1&&this.o!=null){this.o.execute(a);this.Om=d}d%=1;break;case 4:d=1;if(!this.Jn&&this.o!=null){this.o.execute(a);this.Jn=true}break}else this.Xj=false;b=xf(this.Hd,d);c=!b.D(a.f);a.f=b;if(this.vj&&this.Hd.Bb.length){d=
xf(this.Hd,d+0.0010);if(!n.qa(d.ub(b))){var e=d.substract(b);va(e,100);if(this.Lk){d=a;a=b.add(e);c=c||!a.D(d.ga);oc(d,a)}else{if(!this.Me||xa(this.Me))d=Ja(e);else{d=new D;vb(d,Ja(e));b=new D;vb(b,this.Me);d=E(d,b);d=wb(d)}c=c||!d.D(a.R);a.R=d}}}return c};function Kg(a,b){a.Hd=b}vg.prototype.Ef=function(a){if(this.o)return Sc(this.o,a);return null};function Wb(a,b,c,d,e,f){this.Y=new s(0,0,0);this.N=new s(40,40,40);this.Ma=q();this.nd=3E3;this.wn=this.Wg=this.hh=this.Vb=false;this.pn=null;this.on=0;this.Lf=this.bj=false;this.lh=0;if(a)this.Y=a.e();if(b)this.N=b.e();if(c)this.nd=c;if(d)this.Vb=d;Xb(this);if(e)this.hh=e;if(f)this.Wg=f}Wb.prototype=new Ig;Wb.prototype.k=k("flystraight");
Wb.prototype.h=function(a,b,c,d){a=new Wb;a.Y=this.Y.e();a.N=this.N.e();a.ha=this.ha.e();a.Ml=this.Ml;a.Hl=this.Hl;a.nd=this.nd;a.Vb=this.Vb;a.Wg=this.Wg;a.bj=this.bj;a.Lf=this.Lf?this.Lf.h(c,d):null;a.lh=this.lh;return a};
Wb.prototype.gb=function(a,b){var c=b-this.Ma,d=false;if(c!=0){var e=this.Y.e();if(!this.Vb&&c>=this.nd){e=this.N.e();d=true}else e.pa(x(this.ha,c%this.nd*this.Hl));if(this.Wg){if(a.k()=="camera"){oc(a,e);var f=N(a,"camerafps");f!=null&&pc(f,e)}}else a.f=e;if(this.wn&&this.Ma!=b){if(a){P(a);b=bf(a);e=false;f=rc(a.r,"gameai");for(var g=0;g<f.length;++g)if(f[g]!==this.pn){var i=N(f[g],"gameai");if(!(i&&!(i.Tb>0)))if(Va(b,bf(f[g]))){wc(i,this.on,f[g]);e=true;break}}b=e}else b=false;d=b||d}if(d){if(a.r)a.r.Qk=
a.f.e();if(this.Lf){d=true;if(this.lh>0&&c>this.lh)d=false;d&&this.Lf.execute(a)}this.hh&&df(a,this);this.bj&&a.r&&Vc(a.r,a,0)}return true}return false};function Xb(a){a.ha=a.N.substract(a.Y);a.Ml=a.ha.getLength();a.ha.normalize();a.Hl=a.Ml/a.nd};function sg(a,b,c,d){this.dh=new s;this.Fa=new s(0,1,0);this.ji=new s;this.Ae=new s;this.Ma=q();this.$h=0.01;this.Ea=100;if(a)this.dh=a.e();if(b)this.Ea=b;if(c)this.Fa=c.e();if(d)this.$h=d;this.eb()}sg.prototype=new Ig;sg.prototype.k=k("flycircle");sg.prototype.h=function(){var a=new sg;a.dh=this.dh.e();a.Fa=this.Fa.e();a.ji=this.ji.e();a.Ae=this.Ae.e();a.$h=this.$h;a.Ea=this.Ea;return a};
sg.prototype.gb=function(a,b){b=b-this.Ma;if(b!=0){b=b*this.$h;b=x(this.ji,Math.cos(b)).add(x(this.Ae,Math.sin(b)));Ca(b,this.Ea);a.f=this.dh.add(b);return true}return false};sg.prototype.eb=function(){this.Fa.normalize();this.Ae=this.Fa.b!=0?new s(50,0,0):new s(0,50,0);this.Ae=Ia(this.Ae,this.Fa);this.Ae.normalize();this.ji=Ia(this.Ae,this.Fa);this.ji.normalize()};function $b(a){this.te=new s;if(a)this.te=a.e();this.Ma=q();this.jn=false;this.xl=0;this.ym=null}$b.prototype=new Ig;$b.prototype.k=k("rotation");$b.prototype.h=function(){var a=new $b(this.ta,this.Qa);a.te=this.te.e();a.Ma=this.Ma;return a};
$b.prototype.gb=function(a,b){var c=b-this.Ma;if(this.jn){if(this.xl-this.Ma==0)return false;b=(b-this.Ma)/(this.xl-this.Ma);if(b>1){a.R=this.te.e();df(a,this)}else{c=new Ab;var d=x(this.te,n.yd);Fb(c,d.c,d.b,d.d);var e=new Ab;d=x(this.ym,n.yd);Fb(e,d.c,d.b,d.d);Cb(e,e,c,b);d=new s;Eb(e,d);Ca(d,n.re);a.R=d;return true}}else if(c!=0){a.R.pa(x(this.te,c/10));this.Ma=b;return true}return false};function xg(a,b,c){this.Va=[];this.Vb=true;this.wf=20;this.$k=this.Ag=this.md=0;if(a)this.Va=a;if(b)this.wf=b;if(c==true)this.loop=false}xg.prototype=new Ig;xg.prototype.k=k("animatetexture");xg.prototype.h=function(){var a=new xg;a.Va=this.Va;a.Vb=this.Vb;a.wf=this.wf;a.md=this.md;a.Ag=this.Ag;return a};
xg.prototype.gb=function(a,b){if(a==null||this.Va==null)return false;var c=false,d=null;if(this.Va.length){var e=this.$k==0?a.r.Ma:this.$k;d=b-e;var f=e+this.wf*this.Va.length;e=0;e=!this.Vb&&b>=f?this.Va.length-1:this.wf>0?Math.floor(d/this.wf%this.Va.length):0;if(e<this.Va.length)if(this.md==1){if(this.Ag>=0&&this.Ag<a.Yc())if((d=a.sc(this.Ag))&&d.bb!==this.Va[e]){d.bb=this.Va[e];c=true}}else{b=a.Yc();for(f=0;f<b;++f)if((d=a.sc(f))&&d.bb!==this.Va[e]){d.bb=this.Va[e];c=true}}}return c};
xg.prototype.reset=function(){this.$k=q()};function yc(a,b,c,d){this.Qa=b;this.Ep=0;this.tp=false;this.Kq=null;this.ta=a;this.ph=c;this.Xe=false;this.Qe=true;this.xc=false;this.ye=this.ja=this.o=null;d!=true&&eg(a,this)}yc.prototype=new Ig;l=yc.prototype;l.k=k("onclick");l.h=function(a,b,c,d){a=new yc(this.ta,this.Qa);a.Qe=this.Qe;a.xc=this.xc;a.o=this.o?this.o.h(c,d):null;a.ja=this.ja;return a};l.gb=function(a){this.ye=a;a=this.Xe;this.Xe=false;return a};
l.pd=function(a){var b=this.ye;if(!b)return false;if(b.r!==this.ta)return false;if(q()-this.Qa.Rk<250)return false;var c=Ve(this.Qa,a);a=We(this.Qa,a);if(this.Qa.wi){a=this.ta.wh;if(!a)return false;c=a.Nb()/2;a=a.Mb()/2}if(this.ye.tb==null){this.ye=null;return false}if(ef(b)&&Lg(this,b,c,a)){this.Xe=true;this.ph&&this.ph();this.nk(b);Ge(this.ta);return true}};l.nk=function(a){this.o&&this.o.execute(a)};
function Lg(a,b,c,d){if(b==null)return false;if(b.k()=="2doverlay"){var e=Cf(b,false,a.Qa.S);if(e.x<=c&&e.y<=d&&e.x+e.Ta>=c&&e.y+e.Ra>=d)return true}c=Ye(a.Qa,c,d);if(c==null)return false;d=a.ta.fa;if(d==null)return false;d=O(d);e=new Ma;e.Y=d;e.N=c;return zc(a,a.ta,b,e,a.Qe,a.xc,a.ja,null)}function xc(a,b,c,d,e,f){if(!e||!b)return 999999999999;if(a=e.Hg(c,d,true,null,f))return c.ub(a);return 999999999999}
function zc(a,b,c,d,e,f,g,i){var j=c.lb(),m=0;m=new D(false);if(pb(c.$,m))if(Ua(j,lb(m,d.Y),lb(m,d.N))){m=null;if(c.Wp&&c.U)m=c;e=m==null||e;if(!e){j=m.ab;if(j==null){j=m.U&&ld(m.U)>100?new mg(m.U,m,0):new ng(m.U,m);m.ab=j}if(j){j=j.Hg(d.Y,d.N,true,null,true);if(j!=null)if(f){m=xc(a,b,d.Y,j,g,true);a=j.ub(d.Y);if(m+n.Cp<a)return false;else{if(i!=null)i.Ja=j.ub(d.Y);return true}}else{if(i!=null)i.Ja=d.Y.ub(Ra(bf(c)));return true}}else e=true}if(e)if(f){d=d.Y.e();j=bf(c);m=Sa(j);Ca(m,0.5);f=n.bq(m.c,
m.b,m.d);f=Math.sqrt(f*f+f*f);c=Ra(bf(c));m=xc(a,b,d,c,g,true);a=c.ub(d)-f;if(m<a)return false;else{if(i!=null)i.Ja=a;return true}}else{if(i!=null)i.Ja=d.Y.ub(Ra(bf(c)));return true}}return false}yc.prototype.Ef=function(a){if(this.o)return Sc(this.o,a);return null};function yg(a,b){this.Qa=b;this.ta=a;this.ae=this.Zd=null;this.Rl=this.Il=0}yg.prototype=new yc(null,null,null,true);yg.prototype.k=k("onmove");yg.prototype.h=function(a,b,c,d){a=new yg(this.ta,this.Qa);a.Qe=this.Qe;a.xc=this.xc;a.o=this.o?this.o.h(c,d):null;a.ja=this.ja;a.Zd=this.Zd?this.Zd.h(c,d):null;a.ae=this.ae?this.ae.h(c,d):null;return a};
yg.prototype.gb=function(a){var b=this.Il==0,c=q();if(b||c-this.Il>100){this.Il=c;c=Lg(this,a,this.Qa.Eb,this.Qa.Fb);if(b)this.Rl=c;else if(c!=this.Rl){if((this.Rl=c)&&this.Zd)this.Zd.execute(a);else!c&&this.ae&&this.ae.execute(a);return true}}return false};yg.prototype.Ef=function(a){var b=null;if(this.ae)if(b=Sc(this.ae,a))return b;if(this.Zd)if(b=Sc(this.Zd,a))return b;return null};function wg(a,b,c,d,e){this.Ep=0;this.qk=a;this.Qh=this.xm=this.Lj=this.kh=0;this.ql=null;this.tg=0;this.o=null;this.ph=d;if(b)this.Qh=b;if(c)this.tg=c;if(e)this.kh=1;this.Mk=false}wg.prototype=new Ig;l=wg.prototype;l.k=k("oncollide");l.h=function(a,b,c,d){a=new wg(this.qk);a.kh=this.kh;a.Lj=this.Lj;a.Qh=this.Qh;a.tg=this.tg;a.o=this.o?this.o.h(c,d):null;return a};
l.gb=function(a){if(a==null||this.qk==null)return false;var b=false,c=null;if(this.Lj==0)c=this.qk.fa;else if(this.tg!=-1)c=G(this.qk,this.tg);if(c){if(a===c)return false;var d=O(c),e=O(a),f=false;switch(this.xm){case 0:f=d.ub(e)<this.Qh;break;case 1:e=new D(false);if(pb(a.$,e)){d=d.e();mb(e,d);f=new y;f.C=x(this.ql,-0.5);f.M=x(this.ql,0.5);f=f.Kg(d)}}switch(this.kh){case 0:if(f&&!this.Mk){this.nk(c,a);b=true}break;case 1:if(!f&&this.Mk){this.nk(c,a);b=true}break}this.Mk=f}return b};
l.nk=function(a,b){this.ph&&this.ph.call(a,b);this.o&&this.o.execute(a)};l.Ef=function(a){if(this.o)return Sc(this.o,a);return null};function tg(a,b,c,d){this.Ea=a;this.Li=true;this.xf=b;this.ja=c;this.Db=d;this.An=false;this.We=this.wa=null;this.le=new s(0,0,0);this.ge=false;this.Bd=this.Im=0;this.bk=false;if(this.Ea==null)this.Ea=new s(30,50,30);if(this.xf==null)this.xf=new s(0,0,0);if(this.Db==null)this.Db=5.0E-4;this.reset()}tg.prototype=new Ig;l=tg.prototype;l.k=k("collisionresponse");l.h=function(){var a=new tg;a.Ea=this.Ea.e();a.Li=this.Li;a.xf=this.xf.e();a.le=this.le.e();a.bk=this.bk;a.ja=this.ja;return a};
l.reset=function(){this.wa=null;this.We=q()};l.ad=ca("ja");
l.gb=function(a,b){var c=b-this.We;if(!this.ja)return false;if(c>150)c=150;if(c==0)return false;this.We=b;if(this.wa!==a){this.wa=a;this.le=a.f.e();return false}var d=a.f.e(),e=a.f.substract(this.le),f=new s(0,-0.1*a.r.zd,0);if(!this.Li)f.b=0;d=x(f,c);if(this.ge){f=(b-this.Im)/1E3;if(f>5)f=5;Ca(d,f)}else Ca(d,0.0010);if(this.Bd>0){e.b+=this.Bd*0.0010*c;this.Bd-=c;if(this.Bd<0)this.Bd=0}c=e.add(d);if(!xa(c)){if(!this.An)this.Db=this.Ea.getLength()*0.0010;c=null;if(a&&a.k()=="camera")c=a;var g;if(c)g=
c.ga.substract(c.f);f=new C;var i={};i.Ja=0;this.ja.Bi(a);var j=this.ja,m=this.le.substract(this.xf),o=this.Ea,p=this.Db;if(!j||o.c==0||o.b==0||o.d==0)d=m;else{var h={};h.Oh=m.e();h.pl=e.e();h.rc=o.e();h.ui=9.99999999E7;h.uq=j;h.vq=p;h.sk=0;h.ri=new s;j=Ha(h.Oh,h.rc);e=Ha(h.pl,h.rc);j=Mg(this,0,h,j,e);i.Ja=0;if(!xa(d)){h.Oh=Fa(j,h.rc);h.pl=d.e();h.sk=0;e=Ha(d,h.rc);j=Mg(this,0,h,j,e);i.Ja=h.sk==0?1:0;if(i.Ja<0.5&&h.si){d=fb(h.si);d.normalize();if(!(Math.abs(d.b)>Math.abs(d.c)&&Math.abs(d.b)>Math.abs(d.d)))i.Ja=
1}}if(h.sk&&f!=null){f.T=h.si.T.e();f.ca=h.si.ca.e();f.da=h.si.da.e();Ea(f.T,h.rc);Ea(f.ca,h.rc);Ea(f.da,h.rc)}Ea(j,h.rc);d=j}this.ja.Bi(null);d.pa(this.xf);if(i.Ja<0.5)this.ge=false;else{if(!this.ge)this.Im=b;this.ge=true}if(a.f.D(d)){this.le=a.f.e();return false}a.f=d.e();if(this.bk)if(!this.ge)if(!(xa(f.T)&&xa(f.ca)&&xa(f.da))){b=a.R.b;d=f.T.add(f.ca).add(f.da);Ca(d,1/3);f.T.c-=d.c;f.T.d-=d.d;f.ca.c-=d.c;f.ca.d-=d.d;f.da.c-=d.c;f.da.d-=d.d;Ka(f.T,b);Ka(f.ca,b);Ka(f.da,b);f.T.c+=d.c;f.T.d+=d.d;
f.ca.c+=d.c;f.ca.d+=d.d;f.da.c+=d.c;f.da.d+=d.d;b=fb(f);f=new s;f.c=Math.atan2(b.d,b.b)*n.re;f.b=a.R.b;f.d=-Math.atan2(b.c,b.b)*n.re;a.R=f}if(c&&g){b=true;for(f=0;f<a.ia.length;++f)if((d=a.ia[f])&&d.k()=="cameramodelviewer"){b=false;break}if(b)c.ga=a.f.add(g)}}this.le.D(a.f);this.le=a.f.e();return false};
function Mg(a,b,c,d,e){var f=c.vq;if(b>5){a=e.e();va(a,f);return d.add(a)}c.tk=e.e();c.ro=e.e();c.ro.normalize();c.ek=d.e();c.Ul=false;c.ui=9.99999999E7;var g=new y;c.Oh.Ba(g.C);c.Oh.Ba(g.M);z(g,c.Oh.add(c.pl));ta(g.C,c.rc);g.M.pa(c.rc);var i=[],j=new D,m=1/c.rc.b,o=1/c.rc.d;j.p=1/c.rc.c;j.q=m;j.n=o;j.Oa=false;c.uq.Jg(g,j,i);for(g=0;g<i.length;++g)a:{j=i[g];var p=db(j);if(cb(p,c.ro)){var h=m=0,w=false,t=0;m=p.ub(c.ek);o=p.j.ka(c.tk);if(n.qa(o))if(Math.abs(m)>=1)break a;else{w=true;h=0}else{o=1/o;
h=(-1-m)*o;m=(1-m)*o;if(h>m){o=m;m=h;h=o}if(h>1||m<0)break a;h=n.qc(h,0,1);n.qc(m,0,1)}m=new s;o=false;var L=1;if(!w){p=c.ek.substract(p.j).add(x(c.tk,h));t=j.ca.substract(j.T);var A=j.da.substract(j.T);w=t.ka(t);var u=t.ka(A),H=A.ka(A),M=p.substract(j.T);t=M.ka(t);M=M.ka(A);A=t*H-M*u;t=M*w-t*u;if(A+t-(w*H-u*u)<0&&!(A<0||t<0)){o=true;L=h;m=p.e()}}if(!o){h=c.tk.e();p=c.ek.e();w=Ba(h);var J=A=t=0;u={};u.Ja=0;t=w;A=2*h.ka(p.substract(j.T));J=Ba(j.T.substract(p))-1;if(Ng(a,t,A,J,L,u)){L=u.Ja;o=true;m=
j.T.e()}if(!o){A=2*h.ka(p.substract(j.ca));J=Ba(j.ca.substract(p))-1;if(Ng(a,t,A,J,L,u)){L=u.Ja;o=true;m=j.ca.e()}}if(!o){A=2*h.ka(p.substract(j.da));J=Ba(j.da.substract(p))-1;if(Ng(a,t,A,J,L,u)){L=u.Ja;o=true;m=j.da.e()}}H=j.ca.substract(j.T);J=j.T.substract(p);M=Ba(H);var X=H.ka(h),ea=H.ka(J);t=M*-w+X*X;A=M*2*h.ka(J)-2*X*ea;J=M*(1-Ba(J))+ea*ea;if(Ng(a,t,A,J,L,u)){t=(X*u.Ja-ea)/M;if(t>=0&&t<=1){L=u.Ja;o=true;m=j.T.add(x(H,t))}}H=j.da.substract(j.ca);J=j.ca.substract(p);M=Ba(H);X=H.ka(h);ea=H.ka(J);
t=M*-w+X*X;A=M*2*h.ka(J)-2*X*ea;J=M*(1-Ba(J))+ea*ea;if(Ng(a,t,A,J,L,u)){t=(X*u.Ja-ea)/M;if(t>=0&&t<=1){L=u.Ja;o=true;m=j.ca.add(x(H,t))}}H=j.T.substract(j.da);J=j.da.substract(p);M=Ba(H);X=H.ka(h);ea=H.ka(J);t=M*-w+X*X;A=M*2*h.ka(J)-2*X*ea;J=M*(1-Ba(J))+ea*ea;if(Ng(a,t,A,J,L,u)){t=(X*u.Ja-ea)/M;if(t>=0&&t<=1){L=u.Ja;o=true;m=j.da.add(x(H,t))}}}if(o){o=L*c.tk.getLength();if(!c.Ul||o<c.ui){c.ui=o;c.ri=m.e();c.Ul=true;c.si=j;++c.sk}}}}if(!c.Ul)return d.add(e);i=d.add(e);d=d.e();if(c.ui>=f){e=e.e();va(e,
c.ui-f);d=c.ek.add(e);e.normalize();ta(c.ri,x(e,f))}e=c.ri.e();g=d.substract(c.ri);g.normalize();j=new Wa;j.j=g.e();ab(j,e);e=i.substract(x(g,j.ub(i))).substract(c.ri);if(e.getLength()<f)return d;return Mg(a,b+1,c,d,e)}function Ng(a,b,c,d,e,f){a=c*c-4*b*d;if(a<0)return false;d=Math.sqrt(a);a=(-c-d)/(2*b);b=(-c+d)/(2*b);if(a>b){c=b;b=a;a=c}if(a>0&&a<e){f.Ja=a;return true}if(b>0&&b<e){f.Ja=b;return true}return false};function zg(a){this.gi=0;this.ta=a;this.o=null;this.Cg=0;this.gi=q()}zg.prototype=new Ig;zg.prototype.k=k("timer");zg.prototype.h=function(a,b,c,d){a=new zg(this.ta);a.o=this.o?this.o.h(c,d):null;a.gi=this.gi;a.Cg=this.Cg;return a};zg.prototype.gb=function(a){if(a==null)return false;if(this.Cg>0){var b=q();if(b-this.gi>this.Cg){this.gi=b;this.o&&this.o.execute(a);return true}}return false};
function Ag(a,b){this.ta=a;this.za=b;this.o=null;this.Cg=0;this.Gd=null;this.Xe=false;this!=null&&b.Uh.push(this);this!=null&&b.Th.push(this);eg(a,this)}Ag.prototype=new Ig;l=Ag.prototype;l.k=k("keypress");l.h=function(a,b,c,d){a=new Ag(this.ta,this.za);a.Yf=this.Yf;a.Jc=this.Jc;a.o=this.o?this.o.h(c,d):null;return a};l.gb=function(a){this.Gd=a;a=this.Xe;this.Xe=false;return a};l.Fe=function(a){if(this.Yf==0&&a.keyCode==this.Jc){Og(this);return true}return false};
l.Ge=function(a){if(this.Yf==1&&a.keyCode==this.Jc){Og(this);return true}return false};l.pd=function(a){if(this.Yf==1)if(a.button>1&&this.Jc==2)Og(this);else a.button<=1&&this.Jc==1&&Og(this)};l.Vd=function(a){if(this.Yf==0)if(a.button>1&&this.Jc==2)Og(this);else a.button<=1&&this.Jc==1&&Og(this)};l.Ef=function(a){if(this.o)return Sc(this.o,a);return null};
function Og(a){if(a.Gd&&a.Gd.r===a.ta&&ef(a.Gd)&&oe(a.za)===a.Gd.r){if(a.Gd.tb==null&&a.Gd.i!=-1){a.Gd=null;return}a.Xe=true;a.o&&a.o.execute(a.Gd);Ge(a.ta);return true}return null}
function Bg(a){this.Ug=this.Fd=this.bd=0;this.Nf=false;this.Tb=100;this.ig=3E3;this.Kh=-1;this.Zg=this.Yj="";this.Mh=100;this.Vh=0;this.wb=new s;this.Ni=this.cj=this.Rd=this.Md="";this.Yd=this.$d=this.Xd=this.cd=null;this.Sk=this.dl=this.Ic=0;this.Pf=null;this.Qi=this.Re=this.xd=this.eh=0;this.$o=null;this.Bk=this.um=this.yk=false;this.Ck=new Ma;this.Ej=0;this.ye=this.ja=null;this.vf=a;this.Qm=0;this.El=new s;this.bl=null;this.cl=0}Bg.prototype=new Ig;Bg.prototype.k=k("gameai");
Bg.prototype.h=function(a,b,c,d){a=new Bg(this.vf);a.bd=this.bd;a.Fd=this.Fd;a.Ug=this.Ug;a.Nf=this.Nf;a.Tb=this.Tb;a.Yj=this.Yj;a.Zg=this.Zg;a.Mh=this.Mh;a.Vh=this.Vh;a.Kh=this.Kh;a.ig=this.ig;a.wb=this.wb?this.wb.e():null;a.Md=this.Md;a.Rd=this.Rd;a.cj=this.cj;a.Ni=this.Ni;a.cd=this.cd?this.cd.h(c,d):null;a.Xd=this.Xd?this.Xd.h(c,d):null;a.$d=this.$d?this.$d.h(c,d):null;a.Yd=this.Yd?this.Yd.h(c,d):null;return a};
Bg.prototype.gb=function(a,b){if(a==null||this.vf==null)return false;var c=b-this.Qm;if(c>150)c=150;this.Qm=b;var d=0,e=false;if(this.ye!==a){this.ye=a;P(a);this.El=O(a)}var f=O(a);if(this.Ic!=3)if(this.Ic==1){d=Pg(this,a);if(this.Pf.substract(f).getLength()<d){this.Ic=0;this.ac(a,0);e=true}else{e=false;if(this.xd>2){d=this.xd*(this.Fd/1E3);if(this.Qi.substract(f).getLength()*1.2<d){this.Ic=0;this.ac(a,0);e=true}}if(!e){this.xd+=c;e=this.Pf.substract(f);va(e,this.Fd/1E3*c);if(!this.Nf)e.b=0;a.f.pa(e)}e=
Qg(this,a,b-this.eh,this.Pf.substract(f),this.Vh)}}else if(this.Ic==2){this.xd+=c;if(!this.yk&&this.xd>this.Re/2){this.Bk=true;this.cd&&this.cd.execute(a);this.Bk=false;e=this.yk=true}if(this.xd>this.Re)this.Ic=0;else e=Qg(this,a,b-this.eh,this.Pf.substract(f),Math.min(this.Vh,this.Re))}else if(this.Ic==0)if(this.bd==1||this.bd==2||this.bd==3){if(this.Ug<=0||!this.ye||this.Zg.length==0||!this.vf)c=null;else if(!this.dl||b>this.dl){this.cl=this.Ug;this.bl=null;Rg(this,this.vf.La,f,this.Zg);this.dl=
b+500+Math.random()*1E3;c=this.bl}else c=null;if(c!=null){e=1E3;if(this.cd)if(d=Sc(this.cd,"Shoot"))e=d.Sc;d=e;!this.um&&this.Xd&&this.Xd.execute(a);e=this.um=true;if(O(c).ub(f)<d)if(!c||!a?false:Sg(this,Ra(bf(c)),Ra(bf(a)))){this.Ck.Y=Ra(bf(a));this.Ck.N=Ra(bf(c));Tg(this,a,c,O(c),f,b)}else Ug(this,a,O(c),f,b);else Ug(this,a,O(c),f,b)}else if(this.bd==2||this.bd==3)if(!this.Sk||b>this.Sk+this.ig){d=Pg(this,a);c=null;if(this.bd==3){var g=null;if(this.Kh!=-1&&this.vf!=null)g=G(this.vf,this.Kh);if(g!=
null&&g.k()=="path"){if(this.Ej>=g.Bb.length)this.Ej=0;c=vf(g,this.Ej)}++this.Ej}else{c=this.Mh;this.Sk=b;c=new s((Math.random()-0.5)*c,(Math.random()-0.5)*c,(Math.random()-0.5)*c);c.pa(this.El);if(!this.Nf)c.b=this.El.b}if(!(c.substract(f).getLength()<d)){Ug(this,a,c,f,b);e=true}}}return e};
function Qg(a,b,c,d,e){if(!b)return false;if(b.k()=="camera")return false;if(!a.Nf)d.b=0;var f=new D;vb(f,Ja(d));d=new D;vb(d,a.wb);f=E(f,d);a=wb(f);f=b.R.e();c=Math.min(c,e)/e;c=n.qc(c,0,1);Ca(a,n.yd);Ca(f,n.yd);e=new Ab;Fb(e,a.c,a.b,a.d);d=new Ab;Fb(d,f.c,f.b,f.d);Cb(d,d,e,c);Eb(d,a);Ca(a,n.re);if(b.R.D(a))return false;b.R=a;return true}function Ug(a,b,c,d,e){a.Ic=1;a.Pf=c;a.eh=e;a.Qi=d;a.xd=0;a.Re=0;a.ac(b,1)}
function Tg(a,b,c,d,e,f){a.Ic=2;a.Pf=d;a.eh=f;a.$o=c;a.Qi=e;a.xd=0;a.Re=500;a.yk=false;b=a.ac(b,2);if(b!=0)a.Re=b}function Sg(a,b,c){if(!a.ja||!a.vf)return true;if(a.ja.Hg(b,c,true,null,true)!=null)return false;return true}function Rg(a,b,c,d){if(b&&b.V){var e=false,f=c.ub(O(b));if(f<a.cl){var g=N(b,"gameai");if(g&&d!=""&&g!==a&&g.Tb>0)e=g.Yj.indexOf(d)!=-1}if(e){a.cl=f;a.bl=b}for(e=0;e<b.X.length;++e)Rg(a,b.X[e],c,d)}}function Pg(a,b){if(b!=null)return 10;a=Sa(bf(b));a.b=0;return a.getLength()}
Bg.prototype.Zl=function(a){switch(a){case 0:return this.Md;case 1:return this.Rd;case 2:return this.Ni;case 3:return this.cj}return""};Bg.prototype.ac=function(a,b){if(!a||a.k()!="animatedmesh")return 0;var c=a.Ha;if(!c)return 0;if(c=rd(c,this.Zl(b))){Hf(a,c.ud,c.N);c.Ac!=0&&If(a,c.Ac);a.Wb=b==1||b==0;return(c.N-c.ud)*c.Ac*1E3}else{Hf(a,1,1);a.Wb=false}return 0};
function wc(a,b,c){if(c)if(a.Tb!=0){a.Tb-=b;if(a.Tb<0)a.Tb=0;if(a.Tb==0){a.Yd!=null&&a.Yd.execute(c);b=O(c);a.Ic=3;a.eh=0;a.Qi=b;a.xd=0;a.Re=500;a.ac(c,3)}else a.$d!=null&&a.$d.execute(c)}}Bg.prototype.Ef=function(a){var b=null;if(this.cd)if(b=Sc(this.cd,a))return b;if(this.Xd)if(b=Sc(this.Xd,a))return b;if(this.$d)if(b=Sc(this.$d,a))return b;if(this.Yd)if(b=Sc(this.Yd,a))return b;return null};n.Vo=[];function Bc(){this.Qc=this.l="";this.hc=this.jc=this.cc=0}
function Sb(a,b,c){if(a==null)return null;for(var d=a.toLowerCase(),e=n.Vo,f=0;f<e.length;++f){var g=e[f];if(g!=null&&g.getName().toLowerCase()==d)return g}f=Vg(a,c);if(f==null)c=null;else{c=new Bc;c.mm(a);Ec(c,0);d=f.Ee;if(f.Tc=="health"&&d!=null){d=N(d,"gameai");d!=null&&Ec(c,d.Tb)}else if(f.Tc=="movementspeed"&&d!=null){f=N(d,"gameai");g=N(d,"keyboardcontrolled");if(d=N(d,"camerafps"))Dc(c,d.Gb);else if(g)Dc(c,g.Gb);else f&&Dc(c,f.Fd)}else if(f.Tc=="damage"&&d!=null)(d=af(d,"Shoot"))&&Ec(c,d.fe);
else if(f.Tc=="colsmalldistance"&&d!=null){d=N(d,"collisionresponse");d!=null&&Dc(c,d.Db)}else f.Tc=="soundvolume"&&Dc(c,n.Sd.je*100);c=c}if(c)return c;if(b==true){b=new Bc;b.mm(a);e.push(b);return b}return null}
function Fc(a,b){var c=Vg(a.l,b);if(c!=null){b=c.Ee;if(c.Tc=="health"&&b!=null){c=N(b,"gameai");if(c!=null){var d=c.Tb;a=Wg(a);d=d-a;if(d>0)wc(c,d,b);else c.Tb=a}}else if(c.Tc=="movementspeed"&&b!=null){c=N(b,"gameai");d=N(b,"keyboardcontrolled");if(b=N(b,"camerafps"))b.Gb=Q(a);else if(d)d.Gb=Q(a);else if(c)c.Fd=Q(a)}else if(c.Tc=="damage"&&b!=null){if(b=af(b,"Shoot"))b.fe=Wg(a)}else if(c.Tc=="damage"&&b!=null){if(b=af(b,"Shoot"))b.fe=Wg(a)}else if(c.Tc=="colsmalldistance"&&b!=null){b=N(b,"collisionresponse");
if(b!=null){b.Db=Wg(a);b.An=true}}else c.Tc=="soundvolume"&&ee(n.Sd,Q(a)/100)}}function Vg(a,b){if(a.length==0||b==null)return null;if(a[0]!="#")return null;var c=a.indexOf(".");if(c==-1)return null;var d=a.substr(c+1,a.length-c);if(d.length==0)return null;c=a.substr(1,c-1);a=null;if(c!="system"){a=cg(b,c);if(a==null)return null}b={};b.Ee=a;b.Tc=d;return b}Bc.prototype.getName=da("l");Bc.prototype.mm=ca("l");
function Tb(a){switch(a.cc){case 1:return String(a.jc);case 2:return a.hc%1==0?String(a.hc):a.hc.toFixed(6)}return a.Qc}function Wg(a){switch(a.cc){case 0:return Math.floor(a.Qc);case 1:return a.jc;case 2:return a.hc}return 0}function Q(a){switch(a.cc){case 0:return Number(a.Qc);case 1:return a.jc;case 2:return a.hc}return 0}function Cc(a,b){a.cc=0;a.Qc=b}function Ec(a,b){a.cc=1;a.jc=b}function Dc(a,b){a.cc=2;a.hc=b}
function Dg(a,b){this.tc=0;this.ta=a;this.ke=this.Yb=this.Qj=this.Gb=0;this.ii=this.ml=false;this.Rf=this.Ii=0;this.ie=15;this.wb=new s;this.Pj=this.pj=this.Rd=this.Md="";this.Mm=this.We=q();this.ti=this.Be=this.Ke=this.Ie=this.De=this.tp=this.Bl=this.En=false;this.uc=0;this.wk=false;this.fk=true;this.ej=false;this.za=b;this!=null&&b.Uh.push(this);this!=null&&b.Th.push(this)}Dg.prototype=new Ig;l=Dg.prototype;l.k=k("keyboardcontrolled");
l.h=function(){var a=new Dg(this.ta,this.za);a.Gb=this.Gb;a.Qj=this.Qj;a.Yb=this.Yb;a.ke=this.ke;a.ie=this.ie;a.wb=this.wb?this.wb.e():null;a.Md=this.Md;a.Rd=this.Rd;a.pj=this.pj;a.Pj=this.Pj;a.ii=this.ii;a.Ii=this.Ii;a.Rf=this.Rf;a.ej=this.ej;return a};
l.Ai=function(a,b){if(b==37||b==65){if(this.De=a)this.Ie=false;return true}if(b==39||b==68){if(this.Ie=a)this.De=false;return true}if(b==38||b==87){if(this.Ke=a)this.Be=false;return true}if(b==40||b==83){if(this.Be=a)this.Ke=false;return true}if(b==32){this.ti=a;return true}return false};l.Fe=function(a){this.Bl=a.shiftKey==1;return this.Ai(true,a.keyCode)};l.Ge=function(a){this.Bl=a.shiftKey==1;return this.Ai(false,a.keyCode)};
l.gb=function(a,b){var c=b-this.tc;if(c>250)c=250;this.tc=b;var d=false;this.We=b;if(this.ej){var e=a.r.fa;if(e!=null){e=N(e,"3rdpersoncamera");if(e!=null){if(e.lc!==a)return false}else return false}}e=a.R;if(this.De){e.b-=c*this.Yb*0.0010;d=true}if(this.Ie){e.b+=c*this.Yb*0.0010;d=true}var f=new D;vb(f,e);e=new s(0,0,1);var g=new D;vb(g,this.wb);f=E(f,g);jb(f,e);f=this.Bl;var i=(f?this.Qj:this.Gb)*c,j=0;g=this.Be;var m=this.Ke;if(this.ii&&c)if(m||g){if(this.wk!=m)if(this.Rf==0)this.uc*=-1;else this.uc=
0;this.wk=!g;j=i/c;this.uc+=this.Ii*j*(c/1E3);if(this.uc>j)this.uc=j;i=this.uc*c}else if(this.Rf==0)this.uc=0;else{j=i/Number(c);this.uc-=this.Rf*j*(c/1E3);if(this.uc<0)this.uc=0;i=this.uc*c}va(e,i);if(m||g||this.ii&&this.uc!=0){d=e.e();if(g||!(m||g)&&!this.wk)Ca(d,-1);a.f.pa(d);this.En=d=true}if(m||g){this.ac(a,f?3:1,g);d=this.En=true}else{c=false;if(e=N(a,"collisionresponse"))c=e.ge;if(!c&&(this.ac(a,1,false,true)||this.ac(a,3,false,true)||this.ac(a,2,false,true)))this.ac(a,0,false)}if(this.ti)if((c=
N(a,"collisionresponse"))&&!c.ge){e=0;if(this.ta&&this.ta.zd!=0)e=Math.floor(this.ke*(1/this.ta.zd)*2E3);if(!this.ml||this.ml&&b-this.Mm>e){if(c.Bd==0)c.Bd=this.ke*100;this.ac(a,2,false);this.Mm=b;d=true}}return d};l.Zl=function(a){switch(a){case 0:return this.Md;case 1:return this.Rd;case 2:return this.pj;case 3:return this.Pj}return""};
l.ac=function(a,b,c,d){if(!a||a.k()!="animatedmesh")return false;var e=a.Ha;if(!e)return false;if(e=rd(e,this.Zl(b))){var f=1*e.Ac;if(c)f*=-1;if(d)return a.qb==e.N&&a.Sa==e.ud;if(!(a.qb==e.N&&a.Sa==e.ud&&n.D(a.yb,f))){Hf(a,e.ud,e.N);f&&If(a,f);a.Wb=b==0||b==1||b==3}return false}else if(!d){Hf(a,1,1);a.Wb=false}return false};
function Cg(a){this.tc=0;this.ta=a;this.Wh=-1;this.ie=15;this.wb=new s;this.$j=this.ij=0;this.xc=false;this.We=this.ja=0;this.Ue=new s;this.jh=new s;this.lc=null;this.xn=false;this.fk=true}Cg.prototype=new Ig;Cg.prototype.k=k("3rdpersoncamera");Cg.prototype.h=function(){var a=new Cg(this.ta);a.Wh=this.Wh;a.ie=this.ie;a.wb=this.wb.e();a.ij=this.ij;a.$j=this.$j;a.xc=this.xc;a.ja=this.ja;return a};
Cg.prototype.gb=function(a,b){var c=b-this.tc;if(c>250)c=250;this.tc=b;var d=false;if(a==null)return false;d=a.r;if(!this.xn)if(this.Wh!=-1)if(d!=null){if((d=G(d,this.Wh))&&d!==this.lc){this.lc=d;this.fk=true}this.xn=true}if(!this.lc)return false;d=false;var e=a.ga.e();a.ga=O(this.lc);a.ga.pa(this.jh);a.ga.b+=this.$j;a.ga.D(e)||(d=true);if(this.fk){P(this.lc);P(a);this.jh=Sa(this.lc.lb());this.jh.b/=2;this.jh.c=0;this.jh.d=0;this.tc=b;this.fk=false}if(a.r.fa!==a)return false;if(xa(this.Ue)){this.Ue=
O(this.lc).substract(O(a));b=new D;vb(b,this.lc.R);e=this.Ue;var f=e.e();e.c=f.c*b.p+f.b*b.u+f.d*b.s;e.b=f.c*b.v+f.b*b.q+f.d*b.t;e.d=f.c*b.w+f.b*b.A+f.d*b.n}b=this.lc.R;e=new D;vb(e,b);b=new D;vb(b,this.wb);e=E(e,b);b=a.f.e();switch(this.ij){case 0:break;case 2:b=O(this.lc).substract(this.Ue);break;case 1:b=this.Ue.e();jb(e,b);b=O(this.lc).substract(b);e=O(a).ub(b);f=this.Ue.getLength();f=e>f*2.2;if(n.D(this.ie,0)||f)b=b;else{c=Math.sqrt(e)*(c/1E3)*this.ie;if(c>e)c=e;b=b.substract(a.f);va(b,c);b.pa(a.f);
b=b}break}if(this.xc&&this.ja!=null&&!a.f.D(b)){this.ja.Bi(this.lc);c=new Ma;c.Y=a.ga.e();c.N=b.e();var g=Na(c);e=g.getLength();f=this.Ue.getLength()/10;va(g,f);c.N.pa(g);g=new C;g=this.ja.Hg(c.Y,c.N,true,g,true);if(g!=null){b=g.substract(c.Y);g=b.getLength();if(g<f)g=f;g-=f;if(g>e)g=e;va(b,g);b=c.Y.add(b)}this.ja.Bi(null)}if(!a.f.D(b)){d=true;a.f=b}return d};function Eg(a){this.Ro=this.kn=false;this.ta=a;this.o=null}Eg.prototype=new Ig;Eg.prototype.k=k("onfirstframe");
Eg.prototype.gb=function(a){if(this.kn)return false;this.kn=true;if(this.o){this.o.execute(a);return true}return false};function Ff(a,b,c){this.ta=b;this.sa=c;this.Qa=a;this.eg=false;eg(b,this);this.Ok=[];for(a=0;a<255;++a)this.Ok.push(false);this.Of=[];this.Of.push(new Qa(-1,0));this.Of.push(new Qa(0,-1));this.Of.push(new Qa(1,0));this.Of.push(new Qa(0,1))}Ff.prototype=new Ig;Ff.prototype.k=k("mobileinput");
Ff.prototype.gb=function(){var a=false;if(this.sa.mj==1)Xg(this,this.eg&&this.sa.Cj,this.sa.Jc);else if(Math.sqrt(this.sa.fc*this.sa.fc+this.sa.gc*this.sa.gc)<0.3||!this.eg){if(!this.eg){a=this.sa.fc!=0&&this.sa.gc!=0;this.sa.fc=0;this.sa.gc=0}Xg(this,false,37);Xg(this,false,38);Xg(this,false,39);Xg(this,false,40)}else for(var b=0;b<4;++b){var c=this.Of[b].c-this.sa.fc,d=this.Of[b].b-this.sa.gc;c=Math.sqrt(c*c+d*d)<1;Xg(this,c,37+b)}return a};
function Xg(a,b,c){if(a.Ok[c]!=b){a.Ok[c]=b;var d={};d.keyCode=c;b?qe(a.Qa,d):te(a.Qa,d)}}Ff.prototype.pd=function(){this.eg=false};Ff.prototype.Vd=function(){this.eg=true};Ff.prototype.He=function(a){if(this.eg&&this.sa.Cj&&this.sa.vl!=0&&this.sa.ul!=0){var b=Ve(this.Qa,a)-this.sa.gn;a=We(this.Qa,a)-this.sa.hn;this.sa.fc=b/this.sa.vl;this.sa.gc=a/this.sa.ul;this.sa.fc=n.qc(this.sa.fc,0,1);this.sa.gc=n.qc(this.sa.gc,0,1);this.sa.fc=this.sa.fc*2-1;this.sa.gc=this.sa.gc*2-1}};function vector3d(a,b,c){if(a!==null){this.x=a;this.y=b;this.z=c}else this.z=this.y=this.x=0}l=vector3d.prototype;l.add=function(a){return new vector3d(this.x+a.x,this.y+a.y,this.z+a.z)};l.substract=function(a){return new vector3d(this.x-a.x,this.y-a.y,this.z-a.z)};l.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};l.normalize=function(){var a=this.getLength();if(a!=0){a=1/a;this.x*=a;this.y*=a;this.z*=a}};
l.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};l.x=0;l.y=0;l.z=0;function Yg(){this.po=-1;this.xg=[];this.th=false;this.za=this.S=this.db=this.$i=this.pb=null;this.Cf=[];this.Qn=[];this.Lm=0;this.mn=false;this.ll=null;this.nn={};this.Em=0}n.Ca=null;function Z(){if(n.Ca==null)n.Ca=new Yg;return n.Ca}function ne(a,b){a.za=b}function Ie(a){return a.Cf.length!=0}function Gg(a,b){try{eval(b)}catch(c){ma(n.na,c)}}function Zg(a){++a.po;return a.po}
function Me(a,b){a.th=true;if(a.Cf.length!=null){a.S=b;for(b=0;b<a.Cf.length;++b)a.Cf[b]();a.S=null}a.th=false}
function $g(a,b,c,d,e){switch(c){case "Position Mode":b.Jd=d=="absolute (pixels)";break;case "Pos X (percent)":b.ef=d/100;break;case "Pos Y (percent)":b.ff=d/100;break;case "Width (percent)":b.rf=d;break;case "Height (percent)":b.qf=d;break;case "Pos X (pixels)":b.cf=d;break;case "Pos Y (pixels)":b.df=d;break;case "Width (pixels)":b.tf=d/100;break;case "Height (pixels)":b.sf=d/100;break;case "Alpha":b.Hc=(d&255)<<24|b.Hc&16777215;break;case "Image":a=ud(a.db,d);b.Ia=a;break;case "Background Color":b.Hc=
e;break;case "Draw Text":b.Se=d?true:false;break;case "TextColor":b.uf=e;break;case "Text":b.cb=d;break}}
function ah(a,b,c){switch(c){case "Position Mode":return b.Jd;case "Pos X (percent)":return b.ef*100;case "Pos Y (percent)":return b.ff*100;case "Width (percent)":return b.rf;case "Height (percent)":return b.qf;case "Pos X (pixels)":return b.cf;case "Pos Y (pixels)":return b.df;case "Width (pixels)":return b.tf*100;case "Height (pixels)":return b.sf*100;case "Alpha":return n.Td(b.Hc);case "Image":return b.Ia?b.Ia.l:null;case "Background Color":return b.Hc;case "Draw Text":return b.Se;case "TextColor":return b.uf;
case "Text":return b.cb}return null}n.Ne=function(a){this.Ub=null;this.mc=[];this.Ql=this.In=false;this.Id=-1;this.Kn=false;this.ta=a};n.Ne.prototype=new Ig;function bh(a,b,c){a.In=b;a.Ql=c;if(!a.Kn&&a.ta){b=Z().za;if(c){a!=null&&b.Uh.push(a);a!=null&&b.Th.push(a)}eg(a.ta,a)}}n.Ne.prototype.k=k("extensionscript");n.Ne.prototype.h=function(a,b,c,d){a=new n.Ne(b);a.Ub=this.Ub;for(b=0;b<this.mc.length;++b){var e=this.mc[b];e!=null?a.mc.push(e.h(c,d)):a.mc.push(null)}return a};
n.Ne.prototype.gb=function(a,b){if(a==null)return false;if(this.Ub==null||this.Ub.length==0)return false;var c=Z();c.$i=this;this.Id==-1&&ch(this,a,c);if(this.Id!=-1)try{_ccbScriptCache[this.Id].onAnimate(a,b)}catch(d){ma(n.na,this.Ub+": "+d)}c.$i=null;return true};
function ch(a,b,c){var d="";a.Id=Zg(c);d+="if (typeof _ccbScriptCache == 'undefined') _ccbScriptCache = new Array(); ";d+="_ccbScriptCache[";d+=a.Id;d+="] = new ";d+=a.Ub;d+="();";Gg(c,d);var e="_ccbScriptCache[";e+=a.Id;e+="].";d="try {";d+=dh(e,a.mc);d+="} catch(e) { }";Gg(c,d);d=false;if(b.k()=="camera")d=true;a.Kn=d;d="try { ccbRegisterBehaviorEventReceiver(typeof ";d+=e;d+="onMouseEvent != 'undefined', typeof ";d+=e;d+="onKeyEvent != 'undefined'); } catch(e) { }";Gg(c,d)}
function eh(a,b,c){a.In&&_ccbScriptCache[a.Id].onMouseEvent(b,c)}l=n.Ne.prototype;l.pd=function(a){var b=false;if(a&&a.button==2)b=true;eh(this,b?4:2,0)};l.If=function(a){eh(this,1,a)};l.Vd=function(a){var b=false;if(a&&a.button==2)b=true;eh(this,b?5:3,0)};l.He=function(){eh(this,0,0)};l.Fe=function(a){this.Ql&&_ccbScriptCache[this.Id].onKeyEvent(a.keyCode,true)};l.Ge=function(a){this.Ql&&_ccbScriptCache[this.Id].onKeyEvent(a.keyCode,false)};
function Fg(){this.i=-1;this.zf=this.Qc=this.l=null;this.jc=this.hc=0;this.di=this.Tg=null}Fg.prototype.h=function(a,b){var c=new Fg;c.i=this.i;c.l=this.l;c.Qc=this.Qc;c.zf=this.zf?this.zf.e():null;c.hc=this.hc;c.jc=this.jc;if(this.Tg)c.Tg=this.Tg.h(a,b);c.di=this.di;return c};
function dh(a,b){for(var c="",d=0;d<b.length;++d){var e=b[d];if(e!=null){c+=a;c+=e.l;c+=" = ";switch(e.i){case 1:c+=e.hc;c+="; ";break;case 2:c+='"';var f=e.Qc.split('"').join('\\"');c+=f;c+='"; ';break;case 3:c+=e.jc?"true":"false";c+="; ";break;case 6:c+="new vector3d(";c+=e.zf.c;c+=", ";c+=e.zf.b;c+=", ";c+=e.zf.d;c+="); ";break;case 7:c+='"';c+=e.di?e.di.l:"";c+='"; ';break;case 8:c+="ccbGetSceneNodeFromId(";c+=e.jc;c+="); ";break;case 9:a:{f=Z();e=e.Tg;for(var g=0;g<f.xg.length;++g)if(f.xg[g]===
e){f=g;break a}f.xg.push(e);f=f.xg.length-1}c+=f;c+="; ";break;case 0:case 5:case 4:default:c+=e.jc;c+="; ";break}}}return c}function Hg(){this.i="ExtensionScript";this.mc=[];this.Ub=null}Hg.prototype.h=function(a,b){var c=new Hg;c.Ub=this.Ub;for(var d=0;d<this.mc.length;++d){var e=this.mc[d];e!=null?c.mc.push(e.h(a,b)):c.mc.push(null)}return c};
Hg.prototype.execute=function(a){if(!(this.Ub==null||this.Ub.length==0||a==null)){var b=Z(),c="";c="_ccbScriptTmp = new ";c+=this.Ub;c+="();";Gg(b,c);c="try { ";c+=dh("_ccbScriptTmp.",this.mc);c+="} catch(e) { }";Gg(b,c);c="try { _ccbScriptTmp.execute(ccbGetSceneNodeFromId(";c+=a.Ga;c+=")); } catch(e) { }";Gg(b,c)}};function fh(a){var b=n.Ca.pb;if(b==null)return null;return G(b,a)}
function gh(a){var b=n.Ca.pb;if(a==null)return null;var c=a.Ga,d=Xc(b);c=a.h(a.tb,c,d);if(c!=null){c.Ga=d;b.zi(a,c)}if((a=a.ab)&&b)if(a=a.h(c)){c.ab=a;b.wd&&Yc(b.wd,a)}return c}function hh(){var a=n.Ca.pb;if(a==null)return null;return a.fa}function ih(a){var b=n.Ca.pb;b!=null&&a!=null&&a.k()=="camera"&&$f(b,a)}function jh(a,b){if(a==null)return-1;if(b<0||b>=a.X.length)return null;return a.X[b]}function kh(){var a=n.Ca.pb;if(a==null)return null;return a.La}
function lh(a){if(a==null)return 0;return a.X.length}function mh(a){var b=n.Ca.pb;if(b==null)return null;return cg(b,a)}function nh(a){var b=n.Ca.pb;b!=null&&Vc(b,a,0)}function oh(a,b){a&&b&&vc(b,a)}function ph(a){if(a==null)return 0;return a.Yc()}
function qh(a,b,c){if(a==null)return null;if(b<0||b>=a.Yc())return null;a=a.sc(b);if(a==null)return null;if(c=="Type")switch(a.i){case 0:return"solid";case 2:return"lightmap";case 3:return"lightmap_add";case 4:return"lightmap_m2";case 5:return"lightmap_m4";case 11:return"reflection_2layer";case 12:return"trans_add";case 13:return"trans_alphach";case 16:return"trans_reflection_2layer"}else if(c=="Texture1")return a.bb==null?"":a.bb.l;else if(c=="Texture2")return a.pc==null?"":a.pc.l;else if(c=="Lighting")return a.Bc;
else if(c=="Backfaceculling")return a.Uo;return null}function rh(){}
function sh(a,b,c,d){if(a!=null)if(!(b<0||b>=a.Yc())){a=a.sc(b);if(a!=null){b=typeof d=="string"?d:null;var e=null;e=Z();if(c=="Type")if(b)switch(b){case "solid":a.i=0;break;case "lightmap":case "lightmap_add":case "lightmap_m2":case "lightmap_m4":a.i=2;break;case "reflection_2layer":a.i=11;break;case "trans_add":a.i=12;break;case "trans_alphach":a.i=13;break;case "trans_reflection_2layer":a.i=16;break}else{c=parseInt(d);if(c!=NaN)a.i=c}else if(c=="Texture1"){if(b!=null&&e.db!=null){e=ud(e.db,b);
if(e!=null)a.bb=e}}else if(c=="Texture2"){if(b!=null&&e.db!=null){e=ud(e.db,b);if(e!=null)a.pc=e}}else if(c=="Lighting")a.Bc=d;else if(c=="Backfaceculling")a.Uo=d}}}
function th(a,b,c,d,e){if(a!=null){var f=0,g=0,i=0,j=0;if(c!=null)j=c;if(d==null&&c!=null&&typeof c.x!="undefined"){f=c.x;g=c.y;i=c.z}if(d!=null&&e!=null){f=c;g=d;i=e;j=n.Df(255,Math.floor(c),Math.floor(d),Math.floor(e))}var m=e=d=null,o=null,p=a.k();if(p=="camera")d=a;else if(p=="animatedmesh")e=a;else if(p=="light")m=a;else if(p=="2doverlay")o=a;if(b=="Visible")a.V=c;else if(b=="Position"){a.f.c=f;a.f.b=g;a.f.d=i}else if(b=="Rotation"){a.R.c=f;a.R.b=g;a.R.d=i}else if(b=="Scale"){a.ma.c=f;a.ma.b=
g;a.ma.d=i}else if(b=="Target")d!=null&&oc(d,new s(f,g,i));else if(b=="UpVector"){if(d!=null)d.Kb=new s(f,g,i)}else if(b=="FieldOfView_Degrees")d!=null&&gf(d,n.Sn(c));else if(b=="AspectRatio")d!=null&&Qe(d,c);else if(b=="Animation")e!=null&&ic(e,c,e.Wb);else if(b=="Looping")e!=null&&Jf(e,c);else if(b=="FramesPerSecond")e!=null&&If(e,c*0.0010);else if(b=="AnimationBlending"){if(e!=null)e.be=c}else if(b=="BlendTimeMs"){if(e!=null)e.ed=c}else if(b=="Radius"){if(m!=null)m.Ya.Ea=c}else if(b=="Color"){if(m!=
null)m.Ya.oa=n.Rn(j)}else if(b=="Direction"){if(m!=null){m.Ya.Fa=new s(f,g,i);m.Ya.Fa.normalize()}}else if(b=="FogColor")n.Ca.pb.Sb=j;else if(b=="BackgroundColor"&&a===kh())n.Ca.pb.ah=j;else if(b=="AmbientLight")n.Ca.pb.Ob=n.Rn(j);else if(b=="Name")a.l=c;else o!=null&&$g(Z(),o,b,c,j)}}
function uh(a,b){if(a==null)return null;var c=null,d=null,e=null,f=null,g=a.k();if(g=="camera")c=a;else if(g=="animatedmesh")d=a;else if(g=="light")e=a;else if(g=="2doverlay")f=a;if(b=="Visible")return a.V;else if(b=="Position")return new vector3d(a.f.c,a.f.b,a.f.d);else if(b=="Rotation")return new vector3d(a.R.c,a.R.b,a.R.d);else if(b=="Scale")return new vector3d(a.ma.c,a.ma.b,a.ma.d);else if(b=="Target"){if(c!=null)return new vector3d(c.ga.c,c.ga.b,c.ga.d)}else if(b=="UpVector"){if(c!=null)return new vector3d(c.Kb.c,
c.Kb.b,c.Kb.d)}else if(b=="FieldOfView_Degrees"){if(c!=null)return n.yi(c.hd)}else if(b=="AspectRatio"){if(c!=null)return c.Gc}else if(b=="Animation")return"";else if(b=="Looping"){if(d!=null)return d.Wb}else if(b=="FramesPerSecond"){if(d!=null)return d.yb*1E3}else if(b=="AnimationBlending"){if(d!=null)return d.be}else if(b=="BlendTimeMs"){if(d!=null)return d.ed}else if(b=="Radius"){if(e!=null)return e.Ya.Ea}else if(b=="Color"){if(e!=null)return n.Df(255,e.Ya.oa.nc*255,e.Ya.oa.ic*255,e.Ya.oa.dc*255)}else if(b==
"Direction"){if(e!=null)return e.Ya.Fa}else if(b=="Name")return a.l;else if(b=="FogColor")return n.Ca.pb.Sb;else if(b=="BackgroundColor"&&a===kh())return n.Ca.pb.ah;else if(f!=null)return ah(Z(),f,b);return null}function vh(a,b,c,d){if(a!=null){a.f.c=b;a.f.b=c;a.f.d=d;for(b=0;b<a.ia.length;++b){c=a.ia[b];c!=null&&c.k()=="collisionresponse"&&c.reset()}}}function wh(a){Z().Cf.push(a)}function xh(a){var b=Z();a=b.Cf.indexOf(a);a!=-1&&b.Cf.splice(a,1)}
function yh(a,b,c,d,e){var f=Z();!f.th||f.S==null||Md(f.S,b,c,d-b,e-c,a,true)}function zh(a,b,c,d,e){a=Z();!a.th||a.S==null||Md(a.S,b,c,d-b,e-c,4278190080,true)}function Ah(a,b,c,d,e){a=Z();!a.th||a.S==null||Md(a.S,b,c,d-b,e-c,4278190080,true)}function Bh(a,b){var c=Z().za;a=Ye(c,a,b);if(a!=null)return new vector3d(a.c,a.b,a.d);return null}function Ch(a,b,c){var d=Z().za;a=Ze(d,new s(a,b,c));return new vector3d(a.c,a.b,0)}
function Dh(a,b,c,d,e,f){var g=new Ma;g.Y=new s(a,b,c);g.N=new s(d,e,f);a=n.Ca.pb;a=xc(yc.prototype,a,g.Y,g.N,a.wd,true);if(a<999999999){b=Na(g);va(b,a);g=g.Y.add(b);return new vector3d(g.c,g.b,g.d)}return null}function Eh(a,b,c,d,e,f,g){if(a==null)return false;if(a.$==null)return false;b=new s(b,c,d);e=new s(e,f,g);return Ua(bf(a),b,e)}function Fh(){window.close()}function Gh(){}function Hh(a){var b=Z();a=td(b.db,a,true);if(a!=null)return a.l;return null}
function Ih(){var a=Z().za;if(a)return a.Eb;return 0}function Jh(){var a=Z().za;if(a)return a.Fb;return 0}function Kh(){var a=Z().za;if(a!=null&&a.S)return a.S.Nb();return 0}function Lh(){var a=Z().za;if(a!=null&&a.S)return a.S.Mb();return 0}function Mh(){}function Nh(){}function Oh(a){var b=Z().za;if(b!=null)return kc(b,a,true);return false}function Ph(a){var b=n.Sd;a=$d(b,a);a!=null&&Jc(b,a,false,1)}function Qh(a){Lc(n.Sd,a)}
function Rh(a){a=Sb(a,true,n.Ca.pb);if(a==null)return null;if(a.cc==0)return Tb(a);if(a.cc==1)return Wg(a);if(a.cc==2)return Q(a);return null}function Sh(a,b){var c=n.Ca.pb;a=Sb(a,true,c);if(a!=null){typeof b=="number"?Dc(a,b):Cc(a,b);Fc(a,c)}}function Th(a,b){var c=Z().za;c&&$e(c,a,b)}function Uh(){return null}function Vh(){}function Wh(){return"webgl"}function Xh(a,b){var c=n.Ca.pb;if(c!=null){if(b==null)b=c.La;if(a>=0&&a<n.Ca.xg.length){a=n.Ca.xg[a];a!=null&&a.execute(b)}}}
function Yh(a){ma(n.na,a)}function Zh(){}function $h(a,b){n.Ca.$i!=null&&bh(n.Ca.$i,a,b)}function ai(a,b){++n.Ca.Lm;var c=n.Ca.Lm;a=new na(a);var d=n.Ca.Qn,e={};e.$p=a;e.id=c;d.push(e);a.load(function(f){b&&b(f);for(f=0;f<d.length;++f)if(d[f].id==c){d.splice(f,1);break}});return c}function bi(a){for(var b=n.Ca.Qn,c=0;c<b.length;++c)if(b[c].id==a){b[c].$p.abort();b.splice(c,1);break}}
function ci(a,b,c,d){var e=Z(),f=e.za.S;if(f==null)return-1;c=f.fb[c];a=Ud(f,a,b,c.Nn,c.On,c.Mn);if(a!=-1){if(d!=null)e.nn["_"+a]=d;if(!e.mn){e.mn=true;e.ll=f.Hh;f.Hh=function(g){e.ll&&e.ll();var i=e.nn["_"+g];if(i!=null){e.Em=g;i()}}}}return a}function di(a,b,c,d,e,f){var g=Z(),i=g.za.S;if(i!=null){a=i.Z;g=Vd(i,g.Em);b=a.getUniformLocation(g,b);a.uniform4f(b,c,d,e,f)}}n.Yl=null;function ei(){return n.Yl}
function fi(a,b,c){if(a){var d=N(a,"gameai");if(d)if(b=="cancel"){d.Ic=0;d.ac(a,0)}else if(b=="moveto"){b=new s(0,0,0);if(c!=null&&typeof c.x!="undefined"){b.c=c.x;b.b=c.y;b.d=c.z}Ug(d,a,b,O(a),q())}else b=="attack"&&Tg(d,a,c,O(c),O(a),q())}};function he(){this.fh=-1;this.So="";this.Ib=[];this.Fp=2;this.Bn=false;this.Hq=320;this.Gq=200;this.Pl=function(a){this.Ib.push(a)};this.Ig=function(){if(this.fh<0||this.fh>=this.Ib.length)return null;return this.Ib[this.fh]};this.Eo=function(a){for(var b=0;b<this.Ib.length;++b)if(this.Ib[b]===a){this.fh=b;return}}};n.Jp=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);
n.Kp=function(a){var b,c,d,e,f,g=n.Jp;e=a.length;d=0;for(f="";d<e;){do b=g[a.charCodeAt(d++)&255];while(d<e&&b==-1);if(b==-1)break;do c=g[a.charCodeAt(d++)&255];while(d<e&&c==-1);if(c==-1)break;f+=String.fromCharCode(b<<2|(c&48)>>4);do{b=a.charCodeAt(d++)&255;if(b==61)return f;b=g[b]}while(d<e&&b==-1);if(b==-1)break;f+=String.fromCharCode((c&15)<<4|(b&60)>>2);do{c=a.charCodeAt(d++)&255;if(c==61)return f;c=g[c]}while(d<e&&c==-1);if(c==-1)break;f+=String.fromCharCode((b&3)<<6|c)}return f};function gi(){}l=gi.prototype;l.Hf=aa();l.Jg=function(a,b,c){this.Hf(b,c)};
l.Hg=function(a,b,c,d,e){if(!a||!b)return null;if(this.wa!=null&&e&&this.wa.V==false)return null;var f=new y;f.C=a.e();f.M=a.e();z(f,b);e=[];this.Jg(f,null,e);f=b.substract(a);f.normalize();for(var g,i=9.999999999E8,j=Ba(b.substract(a)),m=Math.min(a.c,b.c),o=Math.max(a.c,b.c),p=Math.min(a.b,b.b),h=Math.max(a.b,b.b),w=Math.min(a.d,b.d),t=Math.max(a.d,b.d),L=null,A=0;A<e.length;++A){var u=e[A];if(!(c&&!cb(db(u),f)))if(!(m>u.T.c&&m>u.ca.c&&m>u.da.c))if(!(o<u.T.c&&o<u.ca.c&&o<u.da.c))if(!(p>u.T.b&&p>
u.ca.b&&p>u.da.b))if(!(h<u.T.b&&h<u.ca.b&&h<u.da.b))if(!(w>u.T.d&&w>u.ca.d&&w>u.da.d))if(!(t<u.T.d&&t<u.ca.d&&t<u.da.d))if(!(ya(a,u.T)>=i&&ya(a,u.ca)>=i&&ya(a,u.da)>=i))if(g=u.$l(a,f)){var H=ya(g,a),M=ya(g,b);if(H<j&&M<j&&H<i){i=H;d&&u.Ba(d);L=g}}}if(L)return L.e();return null};l.gk=k(null);l.Bi=aa();l.h=k(null);
function ng(a,b,c){if(a){this.wa=b;this.F=[];if(a!=null)for(b=0;b<a.va.length;++b){var d=a.va[b];if(d)if(!(c!=null&&d.O&&d.O.i==c))for(var e=d.ea.length,f=0;f<e;f+=3)this.F.push(new C(d.m[d.ea[f]].f,d.m[d.ea[f+1]].f,d.m[d.ea[f+2]].f))}}}ng.prototype=new gi;
ng.prototype.Hf=function(a,b){if(this.wa.$){a=a?E(a,this.wa.$):this.wa.$;var c;if(gb(a))for(c=0;c<this.F.length;++c)b.push(this.F[c]);else if(hb(a))for(c=0;c<this.F.length;++c)b.push(new C(nb(a,this.F[c].T),nb(a,this.F[c].ca),nb(a,this.F[c].da)));else for(c=0;c<this.F.length;++c)b.push(new C(lb(a,this.F[c].T),lb(a,this.F[c].ca),lb(a,this.F[c].da)))}};ng.prototype.Jg=function(a,b,c){this.Hf(b,c)};ng.prototype.gk=da("wa");ng.prototype.h=function(a){var b=new ng(null,a);b.wa=a;b.F=this.F;return b};
function og(a,b){if(b){this.wa=b;this.F=[];if(a!=null){a=Ta(a);this.F.push(new C(a[3],a[0],a[2]));this.F.push(new C(a[3],a[1],a[0]));this.F.push(new C(a[3],a[2],a[7]));this.F.push(new C(a[7],a[2],a[6]));this.F.push(new C(a[7],a[6],a[4]));this.F.push(new C(a[5],a[7],a[4]));this.F.push(new C(a[5],a[4],a[0]));this.F.push(new C(a[5],a[0],a[1]));this.F.push(new C(a[1],a[3],a[7]));this.F.push(new C(a[1],a[7],a[5]));this.F.push(new C(a[0],a[6],a[2]));this.F.push(new C(a[0],a[4],a[6]))}}}og.prototype=new ng;
og.prototype.h=function(a){var b=new og(null,a);b.wa=a;b.F=this.F;return b};function fg(){this.Pc=[];this.fl=null}fg.prototype=new gi;fg.prototype.Hf=function(a,b){for(var c=this.fl,d=0;d<this.Pc.length;++d){var e=this.Pc[d];c!=null&&c==e.gk()||e.Hf(a,b)}};fg.prototype.Jg=function(a,b,c){for(var d=this.fl,e=0;e<this.Pc.length;++e){var f=this.Pc[e];d!=null&&d==f.gk()||f.Jg(a,b,c)}};function Yc(a,b){a.Pc.push(b)}
function He(a,b){for(var c=0;c<a.Pc.length;)if(a.Pc[c]===b){a.Pc.splice(c,1);return}else++c}fg.prototype.clear=function(){this.Pc=[]};fg.prototype.Hg=function(a,b,c,d,e){var f=9.999999999E8,g=null,i=null;if(d)i=new C;for(var j=0;j<this.Pc.length;++j){var m=this.Pc[j].Hg(a,b,c,i,e);if(m!=null){var o=ya(m,a);if(o<f){g=m.e();f=o;d&&i.Ba(d)}}}return g};fg.prototype.Bi=ca("fl");n.zl=function(){this.F=[];this.g=new y;this.fd=[]};
function mg(a,b,c,d){this.Xo=this.Wo=0;this.Um=c==null?64:c;if(a){this.wa=b;this.se=new n.zl;this.F=[];for(b=0;b<a.va.length;++b)if(c=a.va[b])if(!(d!=null&&c.O&&c.O.i==d))for(var e=c.ea.length,f=0;f<e;f+=3){var g=new C(c.m[c.ea[f]].f,c.m[c.ea[f+1]].f,c.m[c.ea[f+2]].f);this.se.F.push(g);this.F.push(g)}hi(this,this.se)}}mg.prototype=new gi;
function hi(a,b){++a.Wo;b.g.C=b.F[0].T.e();b.g.M=b.g.C.e();for(var c,d=b.F.length,e=0;e<d;++e){c=b.F[e];z(b.g,c.T);z(b.g,c.ca);z(b.g,c.da)}if(!b.g.C.D(b.g.M)&&d>a.Um){d=Ra(b.g);for(var f=Ta(b.g),g=new y,i=0;i<8;++i){var j=[];g.C=d.e();g.M=d.e();z(g,f[i]);b.fd.push(new n.zl);for(e=0;e<b.F.length;++e){c=b.F[e];g.Kg(c.T)&&g.Kg(c.ca)&&g.Kg(c.da)?b.fd[i].F.push(c):j.push(c)}b.F=j;if(b.fd[i].F.length==0)b.fd[i]=null;else hi(a,b.fd[i])}}a.Xo+=b.F.length}
mg.prototype.Hf=function(a,b){ng.prototype.Hf.call(this,a,b)};mg.prototype.Jg=function(a,b,c){if(this.wa.$){var d=new D;a=a.e();if(this.wa){d=this.wa.$.e();qb(d);zb(d,a)}var e=d;e.p=1;e.u=0;e.s=0;e.G=0;e.v=0;e.q=1;e.t=0;e.H=0;e.w=0;e.A=0;e.n=1;e.I=0;e.J=0;e.K=0;e.B=0;e.L=1;e.Oa=true;if(b)d=b.e();if(this.wa)d=E(d,this.wa.$);this.se&&ii(this,this.se,c,a,d)}};
function ii(a,b,c,d,e){if(Va(b.g,d)){var f=b.F.length,g;if(gb(e))for(g=0;g<f;++g)c.push(b.F[g]);else if(hb(e))for(g=0;g<f;++g)c.push(new C(nb(e,b.F[g].T),nb(e,b.F[g].ca),nb(e,b.F[g].da)));else for(g=0;g<f;++g)c.push(new C(lb(e,b.F[g].T),lb(e,b.F[g].ca),lb(e,b.F[g].da)));for(g=0;g<b.fd.length;++g){f=b.fd[g];f!=null&&ii(a,f,c,d,e)}}}mg.prototype.gk=da("wa");function ji(a,b){var c=new n.zl;c.F=b.F;c.g=b.g.e();for(var d=0;d<b.fd.length;++d){var e=b.fd[d],f=null;if(e)f=ji(a,e);c.fd.push(f)}return c}
mg.prototype.h=function(a){var b=new mg(null,a,this.Um);b.wa=a;b.F=this.F;b.se=null;if(this.se)b.se=ji(this,this.se);return b};(function(a){function b(){this.list=this.next=null}function c(){this.od=this.Uc=this.Fc=0;this.Jf=null}function d(K,T,U,r,v,ba){this.Oe=16;this.hp=288;this.status=0;this.Je=null;this.Ud=0;var R=new Array(this.Oe+1),ob,ia,Ga,I,B,F,Oa,Pa=new Array(this.Oe+1),za,sa,oa,ja=new c,Ib=new Array(this.Oe);I=new Array(this.hp);var pa,Xa=new Array(this.Oe+1),ac,Ya,bc;bc=this.Je=null;for(B=0;B<R.length;B++)R[B]=0;for(B=0;B<Pa.length;B++)Pa[B]=0;for(B=0;B<Ib.length;B++)Ib[B]=null;for(B=0;B<I.length;B++)I[B]=0;
for(B=0;B<Xa.length;B++)Xa[B]=0;ob=T>256?K[256]:this.Oe;za=K;sa=0;B=T;do{R[za[sa]]++;sa++}while(--B>0);if(R[0]==T){this.Je=null;this.status=this.Ud=0}else{for(F=1;F<=this.Oe;F++)if(R[F]!=0)break;Oa=F;if(ba<F)ba=F;for(B=this.Oe;B!=0;B--)if(R[B]!=0)break;Ga=B;if(ba>B)ba=B;for(ac=1<<F;F<B;F++,ac<<=1)if((ac-=R[F])<0){this.status=2;this.Ud=ba;return}if((ac-=R[B])<0){this.status=2;this.Ud=ba}else{R[B]+=ac;Xa[1]=F=0;za=R;sa=1;for(oa=2;--B>0;)Xa[oa++]=F+=za[sa++];za=K;B=sa=0;do if((F=za[sa++])!=0)I[Xa[F]++]=
B;while(++B<T);T=Xa[Ga];Xa[0]=B=0;za=I;sa=0;I=-1;pa=Pa[0]=0;oa=null;for(Ya=0;Oa<=Ga;Oa++)for(K=R[Oa];K-- >0;){for(;Oa>pa+Pa[1+I];){pa+=Pa[1+I];I++;Ya=(Ya=Ga-pa)>ba?ba:Ya;if((ia=1<<(F=Oa-pa))>K+1){ia-=K+1;for(oa=Oa;++F<Ya;){if((ia<<=1)<=R[++oa])break;ia-=R[oa]}}if(pa+F>ob&&pa<ob)F=ob-pa;Ya=1<<F;Pa[1+I]=F;oa=new Array(Ya);for(ia=0;ia<Ya;ia++)oa[ia]=new c;bc=bc==null?(this.Je=new b):(bc.next=new b);bc.next=null;bc.list=oa;Ib[I]=oa;if(I>0){Xa[I]=B;ja.Uc=Pa[I];ja.Fc=16+F;ja.Jf=oa;F=(B&(1<<pa)-1)>>pa-Pa[I];
Ib[I-1][F].Fc=ja.Fc;Ib[I-1][F].Uc=ja.Uc;Ib[I-1][F].od=ja.od;Ib[I-1][F].Jf=ja.Jf}}ja.Uc=Oa-pa;if(sa>=T)ja.Fc=99;else if(za[sa]<U){ja.Fc=za[sa]<256?16:15;ja.od=za[sa++]}else{ja.Fc=v[za[sa]-U];ja.od=r[za[sa++]-U]}ia=1<<Oa-pa;for(F=B>>pa;F<Ya;F+=ia){oa[F].Fc=ja.Fc;oa[F].Uc=ja.Uc;oa[F].od=ja.od;oa[F].Jf=ja.Jf}for(F=1<<Oa-1;(B&F)!=0;F>>=1)B^=F;for(B^=F;(B&(1<<pa)-1)!=Xa[I];){pa-=Pa[I];I--}}this.Ud=Pa[1];this.status=ac!=0&&Ga!=1?1:0}}}function e(){if(Kd.length==re)return-1;return Kd.charCodeAt(re++)&255}
function f(K){for(;ea<K;){X|=e()<<ea;ea+=8}}function g(K){return X&ki[K]}function i(K){X>>=K;ea-=K}function j(K,T,U){var r,v,ba;if(U==0)return 0;for(ba=0;;){f(Aa);v=Za.list[g(Aa)];for(r=v.Fc;r>16;){if(r==99)return-1;i(v.Uc);r-=16;f(r);v=v.Jf[g(r)];r=v.Fc}i(v.Uc);if(r==16){u&=h-1;K[T+ba++]=A[u++]=v.od}else{if(r==15)break;f(r);qa=v.od+g(r);i(r);f(Jb);v=se.list[g(Jb)];for(r=v.Fc;r>16;){if(r==99)return-1;i(v.Uc);r-=16;f(r);v=v.Jf[g(r)];r=v.Fc}i(v.Uc);f(r);cc=u-v.od-g(r);for(i(r);qa>0&&ba<U;){qa--;cc&=
h-1;u&=h-1;K[T+ba++]=A[u++]=A[cc++]}}if(ba==U)return U}$a=-1;return ba}function m(K,T,U){if(H==null){var r,v=new Array(288);for(r=0;r<144;r++)v[r]=8;for(;r<256;r++)v[r]=9;for(;r<280;r++)v[r]=7;for(;r<288;r++)v[r]=8;J=7;r=new d(v,288,257,gg,hg,J);if(r.status!=0){alert("HufBuild error: "+r.status);return-1}H=r.Je;J=r.Ud;for(r=0;r<30;r++)v[r]=5;zip_fixed_bd=5;r=new d(v,30,0,ig,jg,zip_fixed_bd);if(r.status>1){H=null;alert("HufBuild error: "+r.status);return-1}M=r.Je;zip_fixed_bd=r.Ud}Za=H;se=M;Aa=J;Jb=
zip_fixed_bd;return j(K,T,U)}function o(K,T,U){var r,v,ba,R,ob,ia,Ga,I=new Array(316);for(r=0;r<I.length;r++)I[r]=0;f(5);ia=257+g(5);i(5);f(5);Ga=1+g(5);i(5);f(4);r=4+g(4);i(4);if(ia>286||Ga>30)return-1;for(v=0;v<r;v++){f(3);I[kg[v]]=g(3);i(3)}for(;v<19;v++)I[kg[v]]=0;Aa=7;v=new d(I,19,19,null,null,Aa);if(v.status!=0)return-1;Za=v.Je;Aa=v.Ud;R=ia+Ga;for(r=ba=0;r<R;){f(Aa);ob=Za.list[g(Aa)];v=ob.Uc;i(v);v=ob.od;if(v<16)I[r++]=ba=v;else if(v==16){f(2);v=3+g(2);i(2);if(r+v>R)return-1;for(;v-- >0;)I[r++]=
ba}else{if(v==17){f(3);v=3+g(3);i(3)}else{f(7);v=11+g(7);i(7)}if(r+v>R)return-1;for(;v-- >0;)I[r++]=0;ba=0}}Aa=t;v=new d(I,ia,257,gg,hg,Aa);if(Aa==0)v.status=1;if(v.status!=0)return-1;Za=v.Je;Aa=v.Ud;for(r=0;r<Ga;r++)I[r]=I[r+ia];Jb=L;v=new d(I,Ga,0,ig,jg,Jb);se=v.Je;Jb=v.Ud;if(Jb==0&&ia>257)return-1;if(v.status!=0)return-1;return j(K,T,U)}function p(K,T,U){var r,v;for(r=0;r<U;){if(uc&&$a==-1)return r;if(qa>0){if($a!=w)for(;qa>0&&r<U;){qa--;cc&=h-1;u&=h-1;K[T+r++]=A[u++]=A[cc++]}else{for(;qa>0&&r<
U;){qa--;u&=h-1;f(8);K[T+r++]=A[u++]=g(8);i(8)}if(qa==0)$a=-1}if(r==U)return r}if($a==-1){if(uc)break;f(1);if(g(1)!=0)uc=true;i(1);f(2);$a=g(2);i(2);Za=null;qa=0}switch($a){case 0:v=T+r;var ba=U-r,R=undefined;R=ea&7;i(R);f(16);R=g(16);i(16);f(16);if(R!=(~X&65535))v=-1;else{i(16);qa=R;for(R=0;qa>0&&R<ba;){qa--;u&=h-1;f(8);K[v+R++]=A[u++]=g(8);i(8)}if(qa==0)$a=-1;v=R}break;case 1:v=Za!=null?j(K,T+r,U-r):m(K,T+r,U-r);break;case 2:v=Za!=null?j(K,T+r,U-r):o(K,T+r,U-r);break;default:v=-1;break}if(v==-1){if(uc)return 0;
return-1}r+=v}return r}var h=32768,w=0,t=9,L=6,A,u,H=null,M,J,X,ea,$a,uc,qa,cc,Za,se,Aa,Jb,Kd,re,ki=new Array(0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535),gg=new Array(3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0),hg=new Array(0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99),ig=new Array(1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577),jg=new Array(0,
0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13),kg=new Array(16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15),lg={};a.JSInflate=lg;lg.Yp=function(K){var T,U,r;if(A==null)A=new Array(2*h);ea=X=u=0;$a=-1;uc=false;qa=cc=0;Za=null;Kd=K;re=0;T=new Array(1024);for(K="";(U=p(T,0,T.length))>0;)for(r=0;r<U;r++)K+=String.fromCharCode(T[r]);Kd=null;return K}})(this);jsdummyfunc=void 0;window.startCopperLichtFromFile=function(a,b,c,d,e){a=new ge(a,true,null,false,c,d,e);a.load(b);return a};window.CL3D=n;window.ccbGetSceneNodeFromId=fh;window.ccbCloneSceneNode=gh;window.ccbGetActiveCamera=hh;window.ccbSetActiveCamera=ih;window.ccbGetChildSceneNode=jh;window.ccbGetRootSceneNode=kh;window.ccbGetSceneNodeChildCount=lh;window.ccbGetSceneNodeFromName=mh;window.ccbRemoveSceneNode=nh;window.ccbSetSceneNodeParent=oh;window.ccbGetSceneNodeMaterialCount=ph;
window.ccbGetSceneNodeMaterialProperty=qh;window.ccbSetSceneNodeMaterialProperty=sh;window.ccbSetSceneNodeProperty=th;window.ccbGetSceneNodeProperty=uh;window.ccbSetSceneNodePositionWithoutCollision=vh;window.ccbRegisterOnFrameEvent=wh;window.ccbDrawColoredRectangle=yh;window.ccbDrawTextureRectangle=zh;window.ccbDrawTextureRectangleWithAlpha=Ah;window.ccbGet3DPosFrom2DPos=Bh;window.ccbGet2DPosFrom3DPos=Ch;window.ccbGetCollisionPointOfWorldWithLine=Dh;window.ccbEndProgram=Fh;
window.ccbDoesLineCollideWithBoundingBoxOfSceneNode=Eh;window.ccbLoadTexture=Hh;window.ccbGetMousePosX=Ih;window.ccbGetMousePosY=Jh;window.ccbGetScreenWidth=Kh;window.ccbGetScreenHeight=Lh;window.ccbSetCloseOnEscapePressed=Mh;window.ccbSetCursorVisible=Nh;window.ccbSwitchToScene=Oh;window.ccbPlaySound=Ph;window.ccbStopSound=Qh;window.ccbGetCopperCubeVariable=Rh;window.ccbSetCopperCubeVariable=Sh;window.ccbReadFileContent=Uh;window.ccbWriteFileContent=Vh;window.ccbGetPlatform=Wh;
window.ccbInvokeAction=Xh;window.ccbCleanMemory=rh;window.print=Yh;window.system=Zh;window.ccbRegisterBehaviorEventReceiver=$h;window.ccbUnregisterOnFrameEvent=xh;window.ccbSwitchToFullscreen=Th;window.ccbDoHTTPRequest=ai;window.ccbCancelHTTPRequest=bi;window.ccbCreateMaterial=ci;window.ccbSetShaderConstant=di;window.ccbSetPhysicsVelocity=Gh;window.ccbUpdatePhysicsGeometry=Gh;window.ccbAICommand=fi;window.ccbGetCurrentNode=ei;
